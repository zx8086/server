// @bun
var $X=Object.create;var{defineProperty:C8,getPrototypeOf:YX,getOwnPropertyNames:WX}=Object;var XX=Object.prototype.hasOwnProperty;var Z1=($,Y,W)=>{W=$!=null?$X(YX($)):{};const X=Y||!$||!$.__esModule?C8(W,"default",{value:$,enumerable:!0}):W;for(let Z of WX($))if(!XX.call(X,Z))C8(X,Z,{get:()=>$[Z],enumerable:!0});return X};var Q0=($,Y)=>()=>(Y||$((Y={exports:{}}).exports,Y),Y.exports);var R8=Q0((O7,e$)=>{var r1=function(){},QX=function($,Y,W){this.fn=$,this.context=Y,this.once=W||!1},G8=function($,Y,W,X,Z){if(typeof W!=="function")throw new TypeError("The listener must be a function");var Q=new QX(W,X||$,Z),J=_0?_0+Y:Y;if(!$._events[J])$._events[J]=Q,$._eventsCount++;else if(!$._events[J].fn)$._events[J].push(Q);else $._events[J]=[$._events[J],Q];return $},K$=function($,Y){if(--$._eventsCount===0)$._events=new r1;else delete $._events[Y]},b0=function(){this._events=new r1,this._eventsCount=0},ZX=Object.prototype.hasOwnProperty,_0="~";if(Object.create){if(r1.prototype=Object.create(null),!new r1().__proto__)_0=!1}b0.prototype.eventNames=function $(){var Y=[],W,X;if(this._eventsCount===0)return Y;for(X in W=this._events)if(ZX.call(W,X))Y.push(_0?X.slice(1):X);if(Object.getOwnPropertySymbols)return Y.concat(Object.getOwnPropertySymbols(W));return Y};b0.prototype.listeners=function $(Y){var W=_0?_0+Y:Y,X=this._events[W];if(!X)return[];if(X.fn)return[X.fn];for(var Z=0,Q=X.length,J=new Array(Q);Z<Q;Z++)J[Z]=X[Z].fn;return J};b0.prototype.listenerCount=function $(Y){var W=_0?_0+Y:Y,X=this._events[W];if(!X)return 0;if(X.fn)return 1;return X.length};b0.prototype.emit=function $(Y,W,X,Z,Q,J){var z=_0?_0+Y:Y;if(!this._events[z])return!1;var A=this._events[z],D=arguments.length,F,S;if(A.fn){if(A.once)this.removeListener(Y,A.fn,void 0,!0);switch(D){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,W),!0;case 3:return A.fn.call(A.context,W,X),!0;case 4:return A.fn.call(A.context,W,X,Z),!0;case 5:return A.fn.call(A.context,W,X,Z,Q),!0;case 6:return A.fn.call(A.context,W,X,Z,Q,J),!0}for(S=1,F=new Array(D-1);S<D;S++)F[S-1]=arguments[S];A.fn.apply(A.context,F)}else{var b=A.length,j;for(S=0;S<b;S++){if(A[S].once)this.removeListener(Y,A[S].fn,void 0,!0);switch(D){case 1:A[S].fn.call(A[S].context);break;case 2:A[S].fn.call(A[S].context,W);break;case 3:A[S].fn.call(A[S].context,W,X);break;case 4:A[S].fn.call(A[S].context,W,X,Z);break;default:if(!F)for(j=1,F=new Array(D-1);j<D;j++)F[j-1]=arguments[j];A[S].fn.apply(A[S].context,F)}}}return!0};b0.prototype.on=function $(Y,W,X){return G8(this,Y,W,X,!1)};b0.prototype.once=function $(Y,W,X){return G8(this,Y,W,X,!0)};b0.prototype.removeListener=function $(Y,W,X,Z){var Q=_0?_0+Y:Y;if(!this._events[Q])return this;if(!W)return K$(this,Q),this;var J=this._events[Q];if(J.fn){if(J.fn===W&&(!Z||J.once)&&(!X||J.context===X))K$(this,Q)}else{for(var z=0,A=[],D=J.length;z<D;z++)if(J[z].fn!==W||Z&&!J[z].once||X&&J[z].context!==X)A.push(J[z]);if(A.length)this._events[Q]=A.length===1?A[0]:A;else K$(this,Q)}return this};b0.prototype.removeAllListeners=function $(Y){var W;if(Y){if(W=_0?_0+Y:Y,this._events[W])K$(this,W)}else this._events=new r1,this._eventsCount=0;return this};b0.prototype.off=b0.prototype.removeListener;b0.prototype.addListener=b0.prototype.on;b0.prefixed=_0;b0.EventEmitter=b0;if(typeof e$!=="undefined")e$.exports=b0});var E0=Q0((v8)=>{var JX=function($){return O$($)&&(Symbol.asyncIterator in $)},zX=function($){return O$($)&&(Symbol.iterator in $)},HX=function($){return ArrayBuffer.isView($)},qX=function($){return $ instanceof Promise},NX=function($){return $ instanceof Uint8Array},MX=function($){return $ instanceof Date&&Number.isFinite($.getTime())},UX=function($,Y){return Y in $},AX=function($){return O$($)&&d8($.constructor)&&$.constructor.name==="Object"},O$=function($){return $!==null&&typeof $==="object"},BX=function($){return Array.isArray($)&&!ArrayBuffer.isView($)},x8=function($){return $===void 0},k8=function($){return $===null},g8=function($){return typeof $==="boolean"},$6=function($){return typeof $==="number"},FX=function($){return $6($)&&Number.isInteger($)},f8=function($){return typeof $==="bigint"},T8=function($){return typeof $==="string"},d8=function($){return typeof $==="function"},y8=function($){return typeof $==="symbol"},DX=function($){return f8($)||g8($)||k8($)||$6($)||T8($)||y8($)||x8($)};Object.defineProperty(v8,"__esModule",{value:!0});v8.IsValueType=v8.IsSymbol=v8.IsFunction=v8.IsString=v8.IsBigInt=v8.IsInteger=v8.IsNumber=v8.IsBoolean=v8.IsNull=v8.IsUndefined=v8.IsArray=v8.IsObject=v8.IsPlainObject=v8.HasPropertyKey=v8.IsDate=v8.IsUint8Array=v8.IsPromise=v8.IsTypedArray=v8.IsIterator=v8.IsAsyncIterator=void 0;v8.IsAsyncIterator=JX;v8.IsIterator=zX;v8.IsTypedArray=HX;v8.IsPromise=qX;v8.IsUint8Array=NX;v8.IsDate=MX;v8.HasPropertyKey=UX;v8.IsPlainObject=AX;v8.IsObject=O$;v8.IsArray=BX;v8.IsUndefined=x8;v8.IsNull=k8;v8.IsBoolean=g8;v8.IsNumber=$6;v8.IsInteger=FX;v8.IsBigInt=f8;v8.IsString=T8;v8.IsFunction=d8;v8.IsSymbol=y8;v8.IsValueType=DX});var x0=Q0((h8)=>{Object.defineProperty(h8,"__esModule",{value:!0});h8.Type=h8.JsonType=h8.JavaScriptTypeBuilder=h8.JsonTypeBuilder=h8.TypeBuilder=h8.TypeBuilderError=h8.TransformEncodeBuilder=h8.TransformDecodeBuilder=h8.TemplateLiteralDslParser=h8.TemplateLiteralGenerator=h8.TemplateLiteralGeneratorError=h8.TemplateLiteralFinite=h8.TemplateLiteralFiniteError=h8.TemplateLiteralParser=h8.TemplateLiteralParserError=h8.TemplateLiteralResolver=h8.TemplateLiteralPattern=h8.TemplateLiteralPatternError=h8.UnionResolver=h8.KeyArrayResolver=h8.KeyArrayResolverError=h8.KeyResolver=h8.ObjectMap=h8.Intrinsic=h8.IndexedAccessor=h8.TypeClone=h8.TypeExtends=h8.TypeExtendsResult=h8.TypeExtendsError=h8.ExtendsUndefined=h8.TypeGuard=h8.TypeGuardUnknownTypeError=h8.ValueGuard=h8.FormatRegistry=h8.TypeBoxError=h8.TypeRegistry=h8.PatternStringExact=h8.PatternNumberExact=h8.PatternBooleanExact=h8.PatternString=h8.PatternNumber=h8.PatternBoolean=h8.Kind=h8.Hint=h8.Optional=h8.Readonly=h8.Transform=void 0;h8.Transform=Symbol.for("TypeBox.Transform");h8.Readonly=Symbol.for("TypeBox.Readonly");h8.Optional=Symbol.for("TypeBox.Optional");h8.Hint=Symbol.for("TypeBox.Hint");h8.Kind=Symbol.for("TypeBox.Kind");h8.PatternBoolean="(true|false)";h8.PatternNumber="(0|[1-9][0-9]*)";h8.PatternString="(.*)";h8.PatternBooleanExact=`^${h8.PatternBoolean}\$`;h8.PatternNumberExact=`^${h8.PatternNumber}\$`;h8.PatternStringExact=`^${h8.PatternString}\$`;var Y6;(function($){const Y=new Map;function W(){return new Map(Y)}$.Entries=W;function X(){return Y.clear()}$.Clear=X;function Z(A){return Y.delete(A)}$.Delete=Z;function Q(A){return Y.has(A)}$.Has=Q;function J(A,D){Y.set(A,D)}$.Set=J;function z(A){return Y.get(A)}$.Get=z})(Y6||(h8.TypeRegistry=Y6={}));class e0 extends Error{constructor($){super($)}}h8.TypeBoxError=e0;var i8;(function($){const Y=new Map;function W(){return new Map(Y)}$.Entries=W;function X(){return Y.clear()}$.Clear=X;function Z(A){return Y.delete(A)}$.Delete=Z;function Q(A){return Y.has(A)}$.Has=Q;function J(A,D){Y.set(A,D)}$.Set=J;function z(A){return Y.get(A)}$.Get=z})(i8||(h8.FormatRegistry=i8={}));var V;(function($){function Y(D){return Array.isArray(D)}$.IsArray=Y;function W(D){return typeof D==="bigint"}$.IsBigInt=W;function X(D){return typeof D==="boolean"}$.IsBoolean=X;function Z(D){return D===null}$.IsNull=Z;function Q(D){return typeof D==="number"}$.IsNumber=Q;function J(D){return typeof D==="object"&&D!==null}$.IsObject=J;function z(D){return typeof D==="string"}$.IsString=z;function A(D){return D===void 0}$.IsUndefined=A})(V||(h8.ValueGuard=V={}));class u8 extends e0{}h8.TypeGuardUnknownTypeError=u8;var B;(function($){function Y(N){try{return new RegExp(N),!0}catch{return!1}}function W(N){if(!V.IsString(N))return!1;for(let c=0;c<N.length;c++){const O0=N.charCodeAt(c);if(O0>=7&&O0<=13||O0===27||O0===127)return!1}return!0}function X(N){return J(N)||Y0(N)}function Z(N){return V.IsUndefined(N)||V.IsBigInt(N)}function Q(N){return V.IsUndefined(N)||V.IsNumber(N)}function J(N){return V.IsUndefined(N)||V.IsBoolean(N)}function z(N){return V.IsUndefined(N)||V.IsString(N)}function A(N){return V.IsUndefined(N)||V.IsString(N)&&W(N)&&Y(N)}function D(N){return V.IsUndefined(N)||V.IsString(N)&&W(N)}function F(N){return V.IsUndefined(N)||Y0(N)}function S(N){return _(N,"Any")&&z(N.$id)}$.TAny=S;function b(N){return _(N,"Array")&&N.type==="array"&&z(N.$id)&&Y0(N.items)&&Q(N.minItems)&&Q(N.maxItems)&&J(N.uniqueItems)&&F(N.contains)&&Q(N.minContains)&&Q(N.maxContains)}$.TArray=b;function j(N){return _(N,"AsyncIterator")&&N.type==="AsyncIterator"&&z(N.$id)&&Y0(N.items)}$.TAsyncIterator=j;function M(N){return _(N,"BigInt")&&N.type==="bigint"&&z(N.$id)&&Z(N.exclusiveMaximum)&&Z(N.exclusiveMinimum)&&Z(N.maximum)&&Z(N.minimum)&&Z(N.multipleOf)}$.TBigInt=M;function P(N){return _(N,"Boolean")&&N.type==="boolean"&&z(N.$id)}$.TBoolean=P;function O(N){return _(N,"Constructor")&&N.type==="Constructor"&&z(N.$id)&&V.IsArray(N.parameters)&&N.parameters.every((c)=>Y0(c))&&Y0(N.returns)}$.TConstructor=O;function U(N){return _(N,"Date")&&N.type==="Date"&&z(N.$id)&&Q(N.exclusiveMaximumTimestamp)&&Q(N.exclusiveMinimumTimestamp)&&Q(N.maximumTimestamp)&&Q(N.minimumTimestamp)&&Q(N.multipleOfTimestamp)}$.TDate=U;function w(N){return _(N,"Function")&&N.type==="Function"&&z(N.$id)&&V.IsArray(N.parameters)&&N.parameters.every((c)=>Y0(c))&&Y0(N.returns)}$.TFunction=w;function I(N){return _(N,"Integer")&&N.type==="integer"&&z(N.$id)&&Q(N.exclusiveMaximum)&&Q(N.exclusiveMinimum)&&Q(N.maximum)&&Q(N.minimum)&&Q(N.multipleOf)}$.TInteger=I;function R(N){return _(N,"Intersect")&&(V.IsString(N.type)&&N.type!=="object"?!1:!0)&&V.IsArray(N.allOf)&&N.allOf.every((c)=>Y0(c)&&!w0(c))&&z(N.type)&&(J(N.unevaluatedProperties)||F(N.unevaluatedProperties))&&z(N.$id)}$.TIntersect=R;function k(N){return _(N,"Iterator")&&N.type==="Iterator"&&z(N.$id)&&Y0(N.items)}$.TIterator=k;function _(N,c){return X0(N)&&N[h8.Kind]===c}$.TKindOf=_;function X0(N){return V.IsObject(N)&&(h8.Kind in N)&&V.IsString(N[h8.Kind])}$.TKind=X0;function e(N){return p0(N)&&V.IsString(N.const)}$.TLiteralString=e;function N0(N){return p0(N)&&V.IsNumber(N.const)}$.TLiteralNumber=N0;function _1(N){return p0(N)&&V.IsBoolean(N.const)}$.TLiteralBoolean=_1;function p0(N){return _(N,"Literal")&&z(N.$id)&&(V.IsBoolean(N.const)||V.IsNumber(N.const)||V.IsString(N.const))}$.TLiteral=p0;function i0(N){return _(N,"Never")&&V.IsObject(N.not)&&Object.getOwnPropertyNames(N.not).length===0}$.TNever=i0;function H0(N){return _(N,"Not")&&Y0(N.not)}$.TNot=H0;function J0(N){return _(N,"Null")&&N.type==="null"&&z(N.$id)}$.TNull=J0;function m0(N){return _(N,"Number")&&N.type==="number"&&z(N.$id)&&Q(N.exclusiveMaximum)&&Q(N.exclusiveMinimum)&&Q(N.maximum)&&Q(N.minimum)&&Q(N.multipleOf)}$.TNumber=m0;function r0(N){return _(N,"Object")&&N.type==="object"&&z(N.$id)&&V.IsObject(N.properties)&&X(N.additionalProperties)&&Q(N.minProperties)&&Q(N.maxProperties)&&Object.entries(N.properties).every(([c,O0])=>W(c)&&Y0(O0))}$.TObject=r0;function T0(N){return _(N,"Promise")&&N.type==="Promise"&&z(N.$id)&&Y0(N.item)}$.TPromise=T0;function G(N){return _(N,"Record")&&N.type==="object"&&z(N.$id)&&X(N.additionalProperties)&&V.IsObject(N.patternProperties)&&((c)=>{const O0=Object.getOwnPropertyNames(c.patternProperties);return O0.length===1&&Y(O0[0])&&V.IsObject(c.patternProperties)&&Y0(c.patternProperties[O0[0]])})(N)}$.TRecord=G;function f(N){return V.IsObject(N)&&(h8.Hint in N)&&N[h8.Hint]==="Recursive"}$.TRecursive=f;function i(N){return _(N,"Ref")&&z(N.$id)&&V.IsString(N.$ref)}$.TRef=i;function h(N){return _(N,"String")&&N.type==="string"&&z(N.$id)&&Q(N.minLength)&&Q(N.maxLength)&&A(N.pattern)&&D(N.format)}$.TString=h;function z0(N){return _(N,"Symbol")&&N.type==="symbol"&&z(N.$id)}$.TSymbol=z0;function F0(N){return _(N,"TemplateLiteral")&&N.type==="string"&&V.IsString(N.pattern)&&N.pattern[0]==="^"&&N.pattern[N.pattern.length-1]==="$"}$.TTemplateLiteral=F0;function D0(N){return _(N,"This")&&z(N.$id)&&V.IsString(N.$ref)}$.TThis=D0;function w0(N){return V.IsObject(N)&&(h8.Transform in N)}$.TTransform=w0;function q0(N){return _(N,"Tuple")&&N.type==="array"&&z(N.$id)&&V.IsNumber(N.minItems)&&V.IsNumber(N.maxItems)&&N.minItems===N.maxItems&&(V.IsUndefined(N.items)&&V.IsUndefined(N.additionalItems)&&N.minItems===0||V.IsArray(N.items)&&N.items.every((c)=>Y0(c)))}$.TTuple=q0;function B1(N){return _(N,"Undefined")&&N.type==="undefined"&&z(N.$id)}$.TUndefined=B1;function K(N){return E(N)&&N.anyOf.every((c)=>e(c)||N0(c))}$.TUnionLiteral=K;function E(N){return _(N,"Union")&&z(N.$id)&&V.IsObject(N)&&V.IsArray(N.anyOf)&&N.anyOf.every((c)=>Y0(c))}$.TUnion=E;function L(N){return _(N,"Uint8Array")&&N.type==="Uint8Array"&&z(N.$id)&&Q(N.minByteLength)&&Q(N.maxByteLength)}$.TUint8Array=L;function p(N){return _(N,"Unknown")&&z(N.$id)}$.TUnknown=p;function T(N){return _(N,"Unsafe")}$.TUnsafe=T;function d(N){return _(N,"Void")&&N.type==="void"&&z(N.$id)}$.TVoid=d;function $0(N){return V.IsObject(N)&&N[h8.Readonly]==="Readonly"}$.TReadonly=$0;function K0(N){return V.IsObject(N)&&N[h8.Optional]==="Optional"}$.TOptional=K0;function Y0(N){return V.IsObject(N)&&(S(N)||b(N)||P(N)||M(N)||j(N)||O(N)||U(N)||w(N)||I(N)||R(N)||k(N)||p0(N)||i0(N)||H0(N)||J0(N)||m0(N)||r0(N)||T0(N)||G(N)||i(N)||h(N)||z0(N)||F0(N)||D0(N)||q0(N)||B1(N)||E(N)||L(N)||p(N)||T(N)||d(N)||X0(N)&&Y6.Has(N[h8.Kind]))}$.TSchema=Y0})(B||(h8.TypeGuard=B={}));var m8;(function($){function Y(W){return W[h8.Kind]==="Intersect"?W.allOf.every((X)=>Y(X)):W[h8.Kind]==="Union"?W.anyOf.some((X)=>Y(X)):W[h8.Kind]==="Undefined"?!0:W[h8.Kind]==="Not"?!Y(W.not):!1}$.Check=Y})(m8||(h8.ExtendsUndefined=m8={}));class Q6 extends e0{}h8.TypeExtendsError=Q6;var C;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(C||(h8.TypeExtendsResult=C={}));var P1;(function($){function Y(H){return H===C.False?H:C.True}function W(H){throw new Q6(H)}function X(H){return B.TNever(H)||B.TIntersect(H)||B.TUnion(H)||B.TUnknown(H)||B.TAny(H)}function Z(H,q){return B.TNever(q)?_(H,q):B.TIntersect(q)?w(H,q):B.TUnion(q)?r$(H,q):B.TUnknown(q)?L8(H,q):B.TAny(q)?Q(H,q):W("StructuralRight")}function Q(H,q){return C.True}function J(H,q){return B.TIntersect(q)?w(H,q):B.TUnion(q)&&q.anyOf.some((r)=>B.TAny(r)||B.TUnknown(r))?C.True:B.TUnion(q)?C.Union:B.TUnknown(q)?C.True:B.TAny(q)?C.True:C.Union}function z(H,q){return B.TUnknown(H)?C.False:B.TAny(H)?C.Union:B.TNever(H)?C.True:C.False}function A(H,q){return B.TObject(q)&&F0(q)?C.True:X(q)?Z(H,q):!B.TArray(q)?C.False:Y(Z0(H.items,q.items))}function D(H,q){return X(q)?Z(H,q):!B.TAsyncIterator(q)?C.False:Y(Z0(H.items,q.items))}function F(H,q){return X(q)?Z(H,q):B.TObject(q)?q0(H,q):B.TRecord(q)?p(H,q):B.TBigInt(q)?C.True:C.False}function S(H,q){return B.TLiteral(H)&&V.IsBoolean(H.const)?C.True:B.TBoolean(H)?C.True:C.False}function b(H,q){return X(q)?Z(H,q):B.TObject(q)?q0(H,q):B.TRecord(q)?p(H,q):B.TBoolean(q)?C.True:C.False}function j(H,q){return X(q)?Z(H,q):B.TObject(q)?q0(H,q):!B.TConstructor(q)?C.False:H.parameters.length>q.parameters.length?C.False:!H.parameters.every((r,u0)=>Y(Z0(q.parameters[u0],r))===C.True)?C.False:Y(Z0(H.returns,q.returns))}function M(H,q){return X(q)?Z(H,q):B.TObject(q)?q0(H,q):B.TRecord(q)?p(H,q):B.TDate(q)?C.True:C.False}function P(H,q){return X(q)?Z(H,q):B.TObject(q)?q0(H,q):!B.TFunction(q)?C.False:H.parameters.length>q.parameters.length?C.False:!H.parameters.every((r,u0)=>Y(Z0(q.parameters[u0],r))===C.True)?C.False:Y(Z0(H.returns,q.returns))}function O(H,q){return B.TLiteral(H)&&V.IsNumber(H.const)?C.True:B.TNumber(H)||B.TInteger(H)?C.True:C.False}function U(H,q){return B.TInteger(q)||B.TNumber(q)?C.True:X(q)?Z(H,q):B.TObject(q)?q0(H,q):B.TRecord(q)?p(H,q):C.False}function w(H,q){return q.allOf.every((r)=>Z0(H,r)===C.True)?C.True:C.False}function I(H,q){return H.allOf.some((r)=>Z0(r,q)===C.True)?C.True:C.False}function R(H,q){return X(q)?Z(H,q):!B.TIterator(q)?C.False:Y(Z0(H.items,q.items))}function k(H,q){return B.TLiteral(q)&&q.const===H.const?C.True:X(q)?Z(H,q):B.TObject(q)?q0(H,q):B.TRecord(q)?p(H,q):B.TString(q)?d(H,q):B.TNumber(q)?p0(H,q):B.TInteger(q)?O(H,q):B.TBoolean(q)?S(H,q):C.False}function _(H,q){return C.False}function X0(H,q){return C.True}function e(H){let[q,r]=[H,0];while(!0){if(!B.TNot(q))break;q=q.not,r+=1}return r%2===0?q:h8.Type.Unknown()}function N0(H,q){return B.TNot(H)?Z0(e(H),q):B.TNot(q)?Z0(H,e(q)):W("Invalid fallthrough for Not")}function _1(H,q){return X(q)?Z(H,q):B.TObject(q)?q0(H,q):B.TRecord(q)?p(H,q):B.TNull(q)?C.True:C.False}function p0(H,q){return B.TLiteralNumber(H)?C.True:B.TNumber(H)||B.TInteger(H)?C.True:C.False}function i0(H,q){return X(q)?Z(H,q):B.TObject(q)?q0(H,q):B.TRecord(q)?p(H,q):B.TInteger(q)||B.TNumber(q)?C.True:C.False}function H0(H,q){return Object.getOwnPropertyNames(H.properties).length===q}function J0(H){return F0(H)}function m0(H){return H0(H,0)||H0(H,1)&&("description"in H.properties)&&B.TUnion(H.properties.description)&&H.properties.description.anyOf.length===2&&(B.TString(H.properties.description.anyOf[0])&&B.TUndefined(H.properties.description.anyOf[1])||B.TString(H.properties.description.anyOf[1])&&B.TUndefined(H.properties.description.anyOf[0]))}function r0(H){return H0(H,0)}function T0(H){return H0(H,0)}function G(H){return H0(H,0)}function f(H){return H0(H,0)}function i(H){return F0(H)}function h(H){const q=h8.Type.Number();return H0(H,0)||H0(H,1)&&("length"in H.properties)&&Y(Z0(H.properties.length,q))===C.True}function z0(H){return H0(H,0)}function F0(H){const q=h8.Type.Number();return H0(H,0)||H0(H,1)&&("length"in H.properties)&&Y(Z0(H.properties.length,q))===C.True}function D0(H){const q=h8.Type.Function([h8.Type.Any()],h8.Type.Any());return H0(H,0)||H0(H,1)&&("then"in H.properties)&&Y(Z0(H.properties.then,q))===C.True}function w0(H,q){return Z0(H,q)===C.False?C.False:B.TOptional(H)&&!B.TOptional(q)?C.False:C.True}function q0(H,q){return B.TUnknown(H)?C.False:B.TAny(H)?C.Union:B.TNever(H)||B.TLiteralString(H)&&J0(q)||B.TLiteralNumber(H)&&r0(q)||B.TLiteralBoolean(H)&&T0(q)||B.TSymbol(H)&&m0(q)||B.TBigInt(H)&&G(q)||B.TString(H)&&J0(q)||B.TSymbol(H)&&m0(q)||B.TNumber(H)&&r0(q)||B.TInteger(H)&&r0(q)||B.TBoolean(H)&&T0(q)||B.TUint8Array(H)&&i(q)||B.TDate(H)&&f(q)||B.TConstructor(H)&&z0(q)||B.TFunction(H)&&h(q)?C.True:B.TRecord(H)&&B.TString(E(H))?(()=>{return q[h8.Hint]==="Record"?C.True:C.False})():B.TRecord(H)&&B.TNumber(E(H))?(()=>{return H0(q,0)?C.True:C.False})():C.False}function B1(H,q){return X(q)?Z(H,q):B.TRecord(q)?p(H,q):!B.TObject(q)?C.False:(()=>{for(let r of Object.getOwnPropertyNames(q.properties)){if(!(r in H.properties))return C.False;if(w0(H.properties[r],q.properties[r])===C.False)return C.False}return C.True})()}function K(H,q){return X(q)?Z(H,q):B.TObject(q)&&D0(q)?C.True:!B.TPromise(q)?C.False:Y(Z0(H.item,q.item))}function E(H){return h8.PatternNumberExact in H.patternProperties?h8.Type.Number():(h8.PatternStringExact in H.patternProperties)?h8.Type.String():W("Unknown record key pattern")}function L(H){return h8.PatternNumberExact in H.patternProperties?H.patternProperties[h8.PatternNumberExact]:(h8.PatternStringExact in H.patternProperties)?H.patternProperties[h8.PatternStringExact]:W("Unable to get record value schema")}function p(H,q){const[r,u0]=[E(q),L(q)];return B.TLiteralString(H)&&B.TNumber(r)&&Y(Z0(H,u0))===C.True?C.True:B.TUint8Array(H)&&B.TNumber(r)?Z0(H,u0):B.TString(H)&&B.TNumber(r)?Z0(H,u0):B.TArray(H)&&B.TNumber(r)?Z0(H,u0):B.TObject(H)?(()=>{for(let eW of Object.getOwnPropertyNames(H.properties))if(w0(u0,H.properties[eW])===C.False)return C.False;return C.True})():C.False}function T(H,q){return X(q)?Z(H,q):B.TObject(q)?q0(H,q):!B.TRecord(q)?C.False:Z0(L(H),L(q))}function d(H,q){return B.TLiteral(H)&&V.IsString(H.const)?C.True:B.TString(H)?C.True:C.False}function $0(H,q){return X(q)?Z(H,q):B.TObject(q)?q0(H,q):B.TRecord(q)?p(H,q):B.TString(q)?C.True:C.False}function K0(H,q){return X(q)?Z(H,q):B.TObject(q)?q0(H,q):B.TRecord(q)?p(H,q):B.TSymbol(q)?C.True:C.False}function Y0(H,q){return B.TTemplateLiteral(H)?Z0(Q1.Resolve(H),q):B.TTemplateLiteral(q)?Z0(H,Q1.Resolve(q)):W("Invalid fallthrough for TemplateLiteral")}function N(H,q){return B.TArray(q)&&H.items!==void 0&&H.items.every((r)=>Z0(r,q.items)===C.True)}function c(H,q){return B.TNever(H)?C.True:B.TUnknown(H)?C.False:B.TAny(H)?C.Union:C.False}function O0(H,q){return X(q)?Z(H,q):B.TObject(q)&&F0(q)?C.True:B.TArray(q)&&N(H,q)?C.True:!B.TTuple(q)?C.False:V.IsUndefined(H.items)&&!V.IsUndefined(q.items)||!V.IsUndefined(H.items)&&V.IsUndefined(q.items)?C.False:V.IsUndefined(H.items)&&!V.IsUndefined(q.items)?C.True:H.items.every((r,u0)=>Z0(r,q.items[u0])===C.True)?C.True:C.False}function t$(H,q){return X(q)?Z(H,q):B.TObject(q)?q0(H,q):B.TRecord(q)?p(H,q):B.TUint8Array(q)?C.True:C.False}function s$(H,q){return X(q)?Z(H,q):B.TObject(q)?q0(H,q):B.TRecord(q)?p(H,q):B.TVoid(q)?sW(H,q):B.TUndefined(q)?C.True:C.False}function r$(H,q){return q.anyOf.some((r)=>Z0(H,r)===C.True)?C.True:C.False}function lW(H,q){return H.anyOf.every((r)=>Z0(r,q)===C.True)?C.True:C.False}function L8(H,q){return C.True}function tW(H,q){return B.TNever(q)?_(H,q):B.TIntersect(q)?w(H,q):B.TUnion(q)?r$(H,q):B.TAny(q)?Q(H,q):B.TString(q)?d(H,q):B.TNumber(q)?p0(H,q):B.TInteger(q)?O(H,q):B.TBoolean(q)?S(H,q):B.TArray(q)?z(H,q):B.TTuple(q)?c(H,q):B.TObject(q)?q0(H,q):B.TUnknown(q)?C.True:C.False}function sW(H,q){return B.TUndefined(H)?C.True:B.TUndefined(H)?C.True:C.False}function rW(H,q){return B.TIntersect(q)?w(H,q):B.TUnion(q)?r$(H,q):B.TUnknown(q)?L8(H,q):B.TAny(q)?Q(H,q):B.TObject(q)?q0(H,q):B.TVoid(q)?C.True:C.False}function Z0(H,q){return B.TTemplateLiteral(H)||B.TTemplateLiteral(q)?Y0(H,q):B.TNot(H)||B.TNot(q)?N0(H,q):B.TAny(H)?J(H,q):B.TArray(H)?A(H,q):B.TBigInt(H)?F(H,q):B.TBoolean(H)?b(H,q):B.TAsyncIterator(H)?D(H,q):B.TConstructor(H)?j(H,q):B.TDate(H)?M(H,q):B.TFunction(H)?P(H,q):B.TInteger(H)?U(H,q):B.TIntersect(H)?I(H,q):B.TIterator(H)?R(H,q):B.TLiteral(H)?k(H,q):B.TNever(H)?X0(H,q):B.TNull(H)?_1(H,q):B.TNumber(H)?i0(H,q):B.TObject(H)?B1(H,q):B.TRecord(H)?T(H,q):B.TString(H)?$0(H,q):B.TSymbol(H)?K0(H,q):B.TTuple(H)?O0(H,q):B.TPromise(H)?K(H,q):B.TUint8Array(H)?t$(H,q):B.TUndefined(H)?s$(H,q):B.TUnion(H)?lW(H,q):B.TUnknown(H)?tW(H,q):B.TVoid(H)?rW(H,q):W(`Unknown left type operand '${H[h8.Kind]}'`)}function aW(H,q){return Z0(H,q)}$.Extends=aW})(P1||(h8.TypeExtends=P1={}));var m;(function($){function Y(J){const z=Object.getOwnPropertyNames(J).reduce((D,F)=>({...D,[F]:X(J[F])}),{}),A=Object.getOwnPropertySymbols(J).reduce((D,F)=>({...D,[F]:X(J[F])}),{});return{...z,...A}}function W(J){return J.map((z)=>X(z))}function X(J){return V.IsArray(J)?W(J):V.IsObject(J)?Y(J):J}function Z(J){return J.map((z)=>Q(z))}$.Rest=Z;function Q(J,z={}){return{...X(J),...z}}$.Type=Q})(m||(h8.TypeClone=m={}));var W6;(function($){function Y(j){return j.map((M)=>{const{[h8.Optional]:P,...O}=m.Type(M);return O})}function W(j){return j.every((M)=>B.TOptional(M))}function X(j){return j.some((M)=>B.TOptional(M))}function Z(j){return W(j.allOf)?h8.Type.Optional(h8.Type.Intersect(Y(j.allOf))):j}function Q(j){return X(j.anyOf)?h8.Type.Optional(h8.Type.Union(Y(j.anyOf))):j}function J(j){return j[h8.Kind]==="Intersect"?Z(j):j[h8.Kind]==="Union"?Q(j):j}function z(j,M){const P=j.allOf.reduce((O,U)=>{const w=S(U,M);return w[h8.Kind]==="Never"?O:[...O,w]},[]);return J(h8.Type.Intersect(P))}function A(j,M){const P=j.anyOf.map((O)=>S(O,M));return J(h8.Type.Union(P))}function D(j,M){const P=j.properties[M];return V.IsUndefined(P)?h8.Type.Never():h8.Type.Union([P])}function F(j,M){const P=j.items;if(V.IsUndefined(P))return h8.Type.Never();const O=P[M];if(V.IsUndefined(O))return h8.Type.Never();return O}function S(j,M){return j[h8.Kind]==="Intersect"?z(j,M):j[h8.Kind]==="Union"?A(j,M):j[h8.Kind]==="Object"?D(j,M):j[h8.Kind]==="Tuple"?F(j,M):h8.Type.Never()}function b(j,M,P={}){const O=M.map((U)=>S(j,U.toString()));return J(h8.Type.Union(O,P))}$.Resolve=b})(W6||(h8.IndexedAccessor=W6={}));var V1;(function($){function Y(F){const[S,b]=[F.slice(0,1),F.slice(1)];return`${S.toLowerCase()}${b}`}function W(F){const[S,b]=[F.slice(0,1),F.slice(1)];return`${S.toUpperCase()}${b}`}function X(F){return F.toUpperCase()}function Z(F){return F.toLowerCase()}function Q(F,S){const b=f1.ParseExact(F.pattern);if(!T1.Check(b))return{...F,pattern:J(F.pattern,S)};const P=[...d1.Generate(b)].map((w)=>h8.Type.Literal(w)),O=z(P,S),U=h8.Type.Union(O);return h8.Type.TemplateLiteral([U])}function J(F,S){return typeof F==="string"?S==="Uncapitalize"?Y(F):S==="Capitalize"?W(F):S==="Uppercase"?X(F):S==="Lowercase"?Z(F):F:F.toString()}function z(F,S){if(F.length===0)return[];const[b,...j]=F;return[D(b,S),...z(j,S)]}function A(F,S){return B.TTemplateLiteral(F)?Q(F,S):B.TUnion(F)?h8.Type.Union(z(F.anyOf,S)):B.TLiteral(F)?h8.Type.Literal(J(F.const,S)):F}function D(F,S){return A(F,S)}$.Map=D})(V1||(h8.Intrinsic=V1={}));var x1;(function($){function Y(J,z){return h8.Type.Intersect(J.allOf.map((A)=>Z(A,z)),{...J})}function W(J,z){return h8.Type.Union(J.anyOf.map((A)=>Z(A,z)),{...J})}function X(J,z){return z(J)}function Z(J,z){return J[h8.Kind]==="Intersect"?Y(J,z):J[h8.Kind]==="Union"?W(J,z):J[h8.Kind]==="Object"?X(J,z):J}function Q(J,z,A){return{...Z(m.Type(J),z),...A}}$.Map=Q})(x1||(h8.ObjectMap=x1={}));var S$;(function($){function Y(D){return D[0]==="^"&&D[D.length-1]==="$"?D.slice(1,D.length-1):D}function W(D,F){return D.allOf.reduce((S,b)=>[...S,...J(b,F)],[])}function X(D,F){const S=D.anyOf.map((b)=>J(b,F));return[...S.reduce((b,j)=>j.map((M)=>S.every((P)=>P.includes(M))?b.add(M):b)[0],new Set)]}function Z(D,F){return Object.getOwnPropertyNames(D.properties)}function Q(D,F){return F.includePatterns?Object.getOwnPropertyNames(D.patternProperties):[]}function J(D,F){return B.TIntersect(D)?W(D,F):B.TUnion(D)?X(D,F):B.TObject(D)?Z(D,F):B.TRecord(D)?Q(D,F):[]}function z(D,F){return[...new Set(J(D,F))]}$.ResolveKeys=z;function A(D){return`^(${z(D,{includePatterns:!0}).map((b)=>`(${Y(b)})`).join("|")})\$`}$.ResolvePattern=A})(S$||(h8.KeyResolver=S$={}));class J6 extends e0{}h8.KeyArrayResolverError=J6;var a1;(function($){function Y(W){return Array.isArray(W)?W:B.TUnionLiteral(W)?W.anyOf.map((X)=>X.const.toString()):B.TLiteral(W)?[W.const]:B.TTemplateLiteral(W)?(()=>{const X=f1.ParseExact(W.pattern);if(!T1.Check(X))throw new J6("Cannot resolve keys from infinite template expression");return[...d1.Generate(X)]})():[]}$.Resolve=Y})(a1||(h8.KeyArrayResolver=a1={}));var X6;(function($){function*Y(X){for(let Z of X.anyOf)if(Z[h8.Kind]==="Union")yield*Y(Z);else yield Z}function W(X){return h8.Type.Union([...Y(X)],{...X})}$.Resolve=W})(X6||(h8.UnionResolver=X6={}));class z6 extends e0{}h8.TemplateLiteralPatternError=z6;var L$;(function($){function Y(Q){throw new z6(Q)}function W(Q){return Q.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function X(Q,J){return B.TTemplateLiteral(Q)?Q.pattern.slice(1,Q.pattern.length-1):B.TUnion(Q)?`(${Q.anyOf.map((z)=>X(z,J)).join("|")})`:B.TNumber(Q)?`${J}${h8.PatternNumber}`:B.TInteger(Q)?`${J}${h8.PatternNumber}`:B.TBigInt(Q)?`${J}${h8.PatternNumber}`:B.TString(Q)?`${J}${h8.PatternString}`:B.TLiteral(Q)?`${J}${W(Q.const.toString())}`:B.TBoolean(Q)?`${J}${h8.PatternBoolean}`:Y(`Unexpected Kind '${Q[h8.Kind]}'`)}function Z(Q){return`^${Q.map((J)=>X(J,"")).join("")}$`}$.Create=Z})(L$||(h8.TemplateLiteralPattern=L$={}));var Q1;(function($){function Y(W){const X=f1.ParseExact(W.pattern);if(!T1.Check(X))return h8.Type.String();const Z=[...d1.Generate(X)].map((Q)=>h8.Type.Literal(Q));return h8.Type.Union(Z)}$.Resolve=Y})(Q1||(h8.TemplateLiteralResolver=Q1={}));class C$ extends e0{}h8.TemplateLiteralParserError=C$;var f1;(function($){function Y(j,M,P){return j[M]===P&&j.charCodeAt(M-1)!==92}function W(j,M){return Y(j,M,"(")}function X(j,M){return Y(j,M,")")}function Z(j,M){return Y(j,M,"|")}function Q(j){if(!(W(j,0)&&X(j,j.length-1)))return!1;let M=0;for(let P=0;P<j.length;P++){if(W(j,P))M+=1;if(X(j,P))M-=1;if(M===0&&P!==j.length-1)return!1}return!0}function J(j){return j.slice(1,j.length-1)}function z(j){let M=0;for(let P=0;P<j.length;P++){if(W(j,P))M+=1;if(X(j,P))M-=1;if(Z(j,P)&&M===0)return!0}return!1}function A(j){for(let M=0;M<j.length;M++)if(W(j,M))return!0;return!1}function D(j){let[M,P]=[0,0];const O=[];for(let w=0;w<j.length;w++){if(W(j,w))M+=1;if(X(j,w))M-=1;if(Z(j,w)&&M===0){const I=j.slice(P,w);if(I.length>0)O.push(S(I));P=w+1}}const U=j.slice(P);if(U.length>0)O.push(S(U));if(O.length===0)return{type:"const",const:""};if(O.length===1)return O[0];return{type:"or",expr:O}}function F(j){function M(U,w){if(!W(U,w))throw new C$("TemplateLiteralParser: Index must point to open parens");let I=0;for(let R=w;R<U.length;R++){if(W(U,R))I+=1;if(X(U,R))I-=1;if(I===0)return[w,R]}throw new C$("TemplateLiteralParser: Unclosed group parens in expression")}function P(U,w){for(let I=w;I<U.length;I++)if(W(U,I))return[w,I];return[w,U.length]}const O=[];for(let U=0;U<j.length;U++)if(W(j,U)){const[w,I]=M(j,U),R=j.slice(w,I+1);O.push(S(R)),U=I}else{const[w,I]=P(j,U),R=j.slice(w,I);if(R.length>0)O.push(S(R));U=I-1}return O.length===0?{type:"const",const:""}:O.length===1?O[0]:{type:"and",expr:O}}function S(j){return Q(j)?S(J(j)):z(j)?D(j):A(j)?F(j):{type:"const",const:j}}$.Parse=S;function b(j){return S(j.slice(1,j.length-1))}$.ParseExact=b})(f1||(h8.TemplateLiteralParser=f1={}));class H6 extends e0{}h8.TemplateLiteralFiniteError=H6;var T1;(function($){function Y(J){throw new H6(J)}function W(J){return J.type==="or"&&J.expr.length===2&&J.expr[0].type==="const"&&J.expr[0].const==="0"&&J.expr[1].type==="const"&&J.expr[1].const==="[1-9][0-9]*"}function X(J){return J.type==="or"&&J.expr.length===2&&J.expr[0].type==="const"&&J.expr[0].const==="true"&&J.expr[1].type==="const"&&J.expr[1].const==="false"}function Z(J){return J.type==="const"&&J.const===".*"}function Q(J){return X(J)?!0:W(J)||Z(J)?!1:J.type==="and"?J.expr.every((z)=>Q(z)):J.type==="or"?J.expr.every((z)=>Q(z)):J.type==="const"?!0:Y("Unknown expression type")}$.Check=Q})(T1||(h8.TemplateLiteralFinite=T1={}));class q6 extends e0{}h8.TemplateLiteralGeneratorError=q6;var d1;(function($){function*Y(J){if(J.length===1)return yield*J[0];for(let z of J[0])for(let A of Y(J.slice(1)))yield`${z}${A}`}function*W(J){return yield*Y(J.expr.map((z)=>[...Q(z)]))}function*X(J){for(let z of J.expr)yield*Q(z)}function*Z(J){return yield J.const}function*Q(J){return J.type==="and"?yield*W(J):J.type==="or"?yield*X(J):J.type==="const"?yield*Z(J):(()=>{throw new q6("Unknown expression")})()}$.Generate=Q})(d1||(h8.TemplateLiteralGenerator=d1={}));var Z6;(function($){function*Y(Q){const J=Q.trim().replace(/"|'/g,"");return J==="boolean"?yield h8.Type.Boolean():J==="number"?yield h8.Type.Number():J==="bigint"?yield h8.Type.BigInt():J==="string"?yield h8.Type.String():yield(()=>{const z=J.split("|").map((A)=>h8.Type.Literal(A.trim()));return z.length===0?h8.Type.Never():z.length===1?z[0]:h8.Type.Union(z)})()}function*W(Q){if(Q[1]!=="{"){const J=h8.Type.Literal("$"),z=X(Q.slice(1));return yield*[J,...z]}for(let J=2;J<Q.length;J++)if(Q[J]==="}"){const z=Y(Q.slice(2,J)),A=X(Q.slice(J+1));return yield*[...z,...A]}yield h8.Type.Literal(Q)}function*X(Q){for(let J=0;J<Q.length;J++)if(Q[J]==="$"){const z=h8.Type.Literal(Q.slice(0,J)),A=W(Q.slice(J));return yield*[z,...A]}yield h8.Type.Literal(Q)}function Z(Q){return[...X(Q)]}$.Parse=Z})(Z6||(h8.TemplateLiteralDslParser=Z6={}));class N6{constructor($){this.schema=$}Decode($){return new M6(this.schema,$)}}h8.TransformDecodeBuilder=N6;class M6{constructor($,Y){this.schema=$,this.decode=Y}Encode($){const Y=m.Type(this.schema);return B.TTransform(Y)?(()=>{const Z={Encode:(Q)=>Y[h8.Transform].Encode($(Q)),Decode:(Q)=>this.decode(Y[h8.Transform].Decode(Q))};return{...Y,[h8.Transform]:Z}})():(()=>{const W={Decode:this.decode,Encode:$};return{...Y,[h8.Transform]:W}})()}}h8.TransformEncodeBuilder=M6;var TX=0;class U6 extends e0{}h8.TypeBuilderError=U6;class A6{Create($){return $}Throw($){throw new U6($)}Discard($,Y){return Y.reduce((W,X)=>{const{[X]:Z,...Q}=W;return Q},$)}Strict($){return JSON.parse(JSON.stringify($))}}h8.TypeBuilder=A6;class I$ extends A6{ReadonlyOptional($){return this.Readonly(this.Optional($))}Readonly($){return{...m.Type($),[h8.Readonly]:"Readonly"}}Optional($){return{...m.Type($),[h8.Optional]:"Optional"}}Any($={}){return this.Create({...$,[h8.Kind]:"Any"})}Array($,Y={}){return this.Create({...Y,[h8.Kind]:"Array",type:"array",items:m.Type($)})}Boolean($={}){return this.Create({...$,[h8.Kind]:"Boolean",type:"boolean"})}Capitalize($,Y={}){return{...V1.Map(m.Type($),"Capitalize"),...Y}}Composite($,Y){const W=h8.Type.Intersect($,{}),Z=S$.ResolveKeys(W,{includePatterns:!1}).reduce((Q,J)=>({...Q,[J]:h8.Type.Index(W,[J])}),{});return h8.Type.Object(Z,Y)}Enum($,Y={}){const W=Object.getOwnPropertyNames($).filter((Q)=>isNaN(Q)).map((Q)=>$[Q]),Z=[...new Set(W)].map((Q)=>h8.Type.Literal(Q));return this.Union(Z,{...Y,[h8.Hint]:"Enum"})}Extends($,Y,W,X,Z={}){switch(P1.Extends($,Y)){case C.Union:return this.Union([m.Type(W,Z),m.Type(X,Z)]);case C.True:return m.Type(W,Z);case C.False:return m.Type(X,Z)}}Exclude($,Y,W={}){return B.TTemplateLiteral($)?this.Exclude(Q1.Resolve($),Y,W):B.TTemplateLiteral(Y)?this.Exclude($,Q1.Resolve(Y),W):B.TUnion($)?(()=>{const X=$.anyOf.filter((Z)=>P1.Extends(Z,Y)===C.False);return X.length===1?m.Type(X[0],W):this.Union(X,W)})():P1.Extends($,Y)!==C.False?this.Never(W):m.Type($,W)}Extract($,Y,W={}){return B.TTemplateLiteral($)?this.Extract(Q1.Resolve($),Y,W):B.TTemplateLiteral(Y)?this.Extract($,Q1.Resolve(Y),W):B.TUnion($)?(()=>{const X=$.anyOf.filter((Z)=>P1.Extends(Z,Y)!==C.False);return X.length===1?m.Type(X[0],W):this.Union(X,W)})():P1.Extends($,Y)!==C.False?m.Type($,W):this.Never(W)}Index($,Y,W={}){return B.TArray($)&&B.TNumber(Y)?(()=>{return m.Type($.items,W)})():B.TTuple($)&&B.TNumber(Y)?(()=>{const Z=(V.IsUndefined($.items)?[]:$.items).map((Q)=>m.Type(Q));return this.Union(Z,W)})():(()=>{const X=a1.Resolve(Y),Z=m.Type($);return W6.Resolve(Z,X,W)})()}Integer($={}){return this.Create({...$,[h8.Kind]:"Integer",type:"integer"})}Intersect($,Y={}){if($.length===0)return h8.Type.Never();if($.length===1)return m.Type($[0],Y);if($.some((Q)=>B.TTransform(Q)))this.Throw("Cannot intersect transform types");const W=$.every((Q)=>B.TObject(Q)),X=m.Rest($),Z=B.TSchema(Y.unevaluatedProperties)?{unevaluatedProperties:m.Type(Y.unevaluatedProperties)}:{};return Y.unevaluatedProperties===!1||B.TSchema(Y.unevaluatedProperties)||W?this.Create({...Y,...Z,[h8.Kind]:"Intersect",type:"object",allOf:X}):this.Create({...Y,...Z,[h8.Kind]:"Intersect",allOf:X})}KeyOf($,Y={}){return B.TRecord($)?(()=>{const W=Object.getOwnPropertyNames($.patternProperties)[0];return W===h8.PatternNumberExact?this.Number(Y):W===h8.PatternStringExact?this.String(Y):this.Throw("Unable to resolve key type from Record key pattern")})():B.TTuple($)?(()=>{const X=(V.IsUndefined($.items)?[]:$.items).map((Z,Q)=>h8.Type.Literal(Q.toString()));return this.Union(X,Y)})():B.TArray($)?(()=>{return this.Number(Y)})():(()=>{const W=S$.ResolveKeys($,{includePatterns:!1});if(W.length===0)return this.Never(Y);const X=W.map((Z)=>this.Literal(Z));return this.Union(X,Y)})()}Literal($,Y={}){return this.Create({...Y,[h8.Kind]:"Literal",const:$,type:typeof $})}Lowercase($,Y={}){return{...V1.Map(m.Type($),"Lowercase"),...Y}}Never($={}){return this.Create({...$,[h8.Kind]:"Never",not:{}})}Not($,Y){return this.Create({...Y,[h8.Kind]:"Not",not:m.Type($)})}Null($={}){return this.Create({...$,[h8.Kind]:"Null",type:"null"})}Number($={}){return this.Create({...$,[h8.Kind]:"Number",type:"number"})}Object($,Y={}){const W=Object.getOwnPropertyNames($),X=W.filter((z)=>B.TOptional($[z])),Z=W.filter((z)=>!X.includes(z)),Q=B.TSchema(Y.additionalProperties)?{additionalProperties:m.Type(Y.additionalProperties)}:{},J=W.reduce((z,A)=>({...z,[A]:m.Type($[A])}),{});return Z.length>0?this.Create({...Y,...Q,[h8.Kind]:"Object",type:"object",properties:J,required:Z}):this.Create({...Y,...Q,[h8.Kind]:"Object",type:"object",properties:J})}Omit($,Y,W={}){const X=a1.Resolve(Y);return x1.Map(this.Discard(m.Type($),["$id",h8.Transform]),(Z)=>{if(V.IsArray(Z.required)){if(Z.required=Z.required.filter((Q)=>!X.includes(Q)),Z.required.length===0)delete Z.required}for(let Q of Object.getOwnPropertyNames(Z.properties))if(X.includes(Q))delete Z.properties[Q];return this.Create(Z)},W)}Partial($,Y={}){return x1.Map(this.Discard(m.Type($),["$id",h8.Transform]),(W)=>{const X=Object.getOwnPropertyNames(W.properties).reduce((Z,Q)=>{return{...Z,[Q]:this.Optional(W.properties[Q])}},{});return this.Object(X,this.Discard(W,["required"]))},Y)}Pick($,Y,W={}){const X=a1.Resolve(Y);return x1.Map(this.Discard(m.Type($),["$id",h8.Transform]),(Z)=>{if(V.IsArray(Z.required)){if(Z.required=Z.required.filter((Q)=>X.includes(Q)),Z.required.length===0)delete Z.required}for(let Q of Object.getOwnPropertyNames(Z.properties))if(!X.includes(Q))delete Z.properties[Q];return this.Create(Z)},W)}Record($,Y,W={}){return B.TTemplateLiteral($)?(()=>{const X=f1.ParseExact($.pattern);return T1.Check(X)?this.Object([...d1.Generate(X)].reduce((Z,Q)=>({...Z,[Q]:m.Type(Y)}),{}),W):this.Create({...W,[h8.Kind]:"Record",type:"object",patternProperties:{[$.pattern]:m.Type(Y)}})})():B.TUnion($)?(()=>{const X=X6.Resolve($);if(B.TUnionLiteral(X)){const Z=X.anyOf.reduce((Q,J)=>({...Q,[J.const]:m.Type(Y)}),{});return this.Object(Z,{...W,[h8.Hint]:"Record"})}else this.Throw("Record key of type union contains non-literal types")})():B.TLiteral($)?(()=>{return V.IsString($.const)||V.IsNumber($.const)?this.Object({[$.const]:m.Type(Y)},W):this.Throw("Record key of type literal is not of type string or number")})():B.TInteger($)||B.TNumber($)?(()=>{return this.Create({...W,[h8.Kind]:"Record",type:"object",patternProperties:{[h8.PatternNumberExact]:m.Type(Y)}})})():B.TString($)?(()=>{const X=V.IsUndefined($.pattern)?h8.PatternStringExact:$.pattern;return this.Create({...W,[h8.Kind]:"Record",type:"object",patternProperties:{[X]:m.Type(Y)}})})():this.Never()}Recursive($,Y={}){if(V.IsUndefined(Y.$id))Y.$id=`T${TX++}`;const W=$({[h8.Kind]:"This",$ref:`${Y.$id}`});return W.$id=Y.$id,this.Create({...Y,[h8.Hint]:"Recursive",...W})}Ref($,Y={}){if(V.IsString($))return this.Create({...Y,[h8.Kind]:"Ref",$ref:$});if(V.IsUndefined($.$id))this.Throw("Reference target type must specify an $id");return this.Create({...Y,[h8.Kind]:"Ref",$ref:$.$id})}Required($,Y={}){return x1.Map(this.Discard(m.Type($),["$id",h8.Transform]),(W)=>{const X=Object.getOwnPropertyNames(W.properties).reduce((Z,Q)=>{return{...Z,[Q]:this.Discard(W.properties[Q],[h8.Optional])}},{});return this.Object(X,W)},Y)}Rest($){return B.TTuple($)&&!V.IsUndefined($.items)?m.Rest($.items):B.TIntersect($)?m.Rest($.allOf):B.TUnion($)?m.Rest($.anyOf):[]}String($={}){return this.Create({...$,[h8.Kind]:"String",type:"string"})}TemplateLiteral($,Y={}){const W=V.IsString($)?L$.Create(Z6.Parse($)):L$.Create($);return this.Create({...Y,[h8.Kind]:"TemplateLiteral",type:"string",pattern:W})}Transform($){return new N6($)}Tuple($,Y={}){const[W,X,Z]=[!1,$.length,$.length],Q=m.Rest($),J=$.length>0?{...Y,[h8.Kind]:"Tuple",type:"array",items:Q,additionalItems:W,minItems:X,maxItems:Z}:{...Y,[h8.Kind]:"Tuple",type:"array",minItems:X,maxItems:Z};return this.Create(J)}Uncapitalize($,Y={}){return{...V1.Map(m.Type($),"Uncapitalize"),...Y}}Union($,Y={}){return B.TTemplateLiteral($)?Q1.Resolve($):(()=>{const W=$;if(W.length===0)return this.Never(Y);if(W.length===1)return this.Create(m.Type(W[0],Y));const X=m.Rest(W);return this.Create({...Y,[h8.Kind]:"Union",anyOf:X})})()}Unknown($={}){return this.Create({...$,[h8.Kind]:"Unknown"})}Unsafe($={}){return this.Create({...$,[h8.Kind]:$[h8.Kind]||"Unsafe"})}Uppercase($,Y={}){return{...V1.Map(m.Type($),"Uppercase"),...Y}}}h8.JsonTypeBuilder=I$;class B6 extends I${AsyncIterator($,Y={}){return this.Create({...Y,[h8.Kind]:"AsyncIterator",type:"AsyncIterator",items:m.Type($)})}Awaited($,Y={}){const W=(X)=>X.length>0?(()=>{const[Z,...Q]=X;return[this.Awaited(Z),...W(Q)]})():X;return B.TIntersect($)?h8.Type.Intersect(W($.allOf)):B.TUnion($)?h8.Type.Union(W($.anyOf)):B.TPromise($)?this.Awaited($.item):m.Type($,Y)}BigInt($={}){return this.Create({...$,[h8.Kind]:"BigInt",type:"bigint"})}ConstructorParameters($,Y={}){return this.Tuple([...$.parameters],{...Y})}Constructor($,Y,W){const[X,Z]=[m.Rest($),m.Type(Y)];return this.Create({...W,[h8.Kind]:"Constructor",type:"Constructor",parameters:X,returns:Z})}Date($={}){return this.Create({...$,[h8.Kind]:"Date",type:"Date"})}Function($,Y,W){const[X,Z]=[m.Rest($),m.Type(Y)];return this.Create({...W,[h8.Kind]:"Function",type:"Function",parameters:X,returns:Z})}InstanceType($,Y={}){return m.Type($.returns,Y)}Iterator($,Y={}){return this.Create({...Y,[h8.Kind]:"Iterator",type:"Iterator",items:m.Type($)})}Parameters($,Y={}){return this.Tuple($.parameters,{...Y})}Promise($,Y={}){return this.Create({...Y,[h8.Kind]:"Promise",type:"Promise",item:m.Type($)})}RegExp($,Y={}){const W=V.IsString($)?$:$.source;return this.Create({...Y,[h8.Kind]:"String",type:"string",pattern:W})}RegEx($,Y={}){return this.RegExp($,Y)}ReturnType($,Y={}){return m.Type($.returns,Y)}Symbol($){return this.Create({...$,[h8.Kind]:"Symbol",type:"symbol"})}Undefined($={}){return this.Create({...$,[h8.Kind]:"Undefined",type:"undefined"})}Uint8Array($={}){return this.Create({...$,[h8.Kind]:"Uint8Array",type:"Uint8Array"})}Void($={}){return this.Create({...$,[h8.Kind]:"Void",type:"void"})}}h8.JavaScriptTypeBuilder=B6;h8.JsonType=new I$;h8.Type=new B6});var O6=Q0((l8)=>{var j6=function($,Y){switch(Y){case y.ValueErrorType.ArrayContains:return"Expected array to contain at least one matching value";case y.ValueErrorType.ArrayMaxContains:return`Expected array to contain no more than ${$.maxContains} matching values`;case y.ValueErrorType.ArrayMinContains:return`Expected array to contain at least ${$.minContains} matching values`;case y.ValueErrorType.ArrayMaxItems:return`Expected array length to be less or equal to ${$.maxItems}`;case y.ValueErrorType.ArrayMinItems:return`Expected array length to be greater or equal to ${$.minItems}`;case y.ValueErrorType.ArrayUniqueItems:return"Expected array elements to be unique";case y.ValueErrorType.Array:return"Expected array";case y.ValueErrorType.AsyncIterator:return"Expected AsyncIterator";case y.ValueErrorType.BigIntExclusiveMaximum:return`Expected bigint to be less than ${$.exclusiveMaximum}`;case y.ValueErrorType.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${$.exclusiveMinimum}`;case y.ValueErrorType.BigIntMaximum:return`Expected bigint to be less or equal to ${$.maximum}`;case y.ValueErrorType.BigIntMinimum:return`Expected bigint to be greater or equal to ${$.minimum}`;case y.ValueErrorType.BigIntMultipleOf:return`Expected bigint to be a multiple of ${$.multipleOf}`;case y.ValueErrorType.BigInt:return"Expected bigint";case y.ValueErrorType.Boolean:return"Expected boolean";case y.ValueErrorType.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${$.exclusiveMinimumTimestamp}`;case y.ValueErrorType.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${$.exclusiveMaximumTimestamp}`;case y.ValueErrorType.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${$.minimumTimestamp}`;case y.ValueErrorType.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${$.maximumTimestamp}`;case y.ValueErrorType.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${$.multipleOfTimestamp}`;case y.ValueErrorType.Date:return"Expected Date";case y.ValueErrorType.Function:return"Expected function";case y.ValueErrorType.IntegerExclusiveMaximum:return`Expected integer to be less than ${$.exclusiveMaximum}`;case y.ValueErrorType.IntegerExclusiveMinimum:return`Expected integer to be greater than ${$.exclusiveMinimum}`;case y.ValueErrorType.IntegerMaximum:return`Expected integer to be less or equal to ${$.maximum}`;case y.ValueErrorType.IntegerMinimum:return`Expected integer to be greater or equal to ${$.minimum}`;case y.ValueErrorType.IntegerMultipleOf:return`Expected integer to be a multiple of ${$.multipleOf}`;case y.ValueErrorType.Integer:return"Expected integer";case y.ValueErrorType.IntersectUnevaluatedProperties:return"Unexpected property";case y.ValueErrorType.Intersect:return"Expected all values to match";case y.ValueErrorType.Iterator:return"Expected Iterator";case y.ValueErrorType.Literal:return`Expected ${typeof $.const==="string"?`'${$.const}'`:$.const}`;case y.ValueErrorType.Never:return"Never";case y.ValueErrorType.Not:return"Value should not match";case y.ValueErrorType.Null:return"Expected null";case y.ValueErrorType.NumberExclusiveMaximum:return`Expected number to be less than ${$.exclusiveMaximum}`;case y.ValueErrorType.NumberExclusiveMinimum:return`Expected number to be greater than ${$.exclusiveMinimum}`;case y.ValueErrorType.NumberMaximum:return`Expected number to be less or equal to ${$.maximum}`;case y.ValueErrorType.NumberMinimum:return`Expected number to be greater or equal to ${$.minimum}`;case y.ValueErrorType.NumberMultipleOf:return`Expected number to be a multiple of ${$.multipleOf}`;case y.ValueErrorType.Number:return"Expected number";case y.ValueErrorType.Object:return"Expected object";case y.ValueErrorType.ObjectAdditionalProperties:return"Unexpected property";case y.ValueErrorType.ObjectMaxProperties:return`Expected object to have no more than ${$.maxProperties} properties`;case y.ValueErrorType.ObjectMinProperties:return`Expected object to have at least ${$.minProperties} properties`;case y.ValueErrorType.ObjectRequiredProperty:return"Required property";case y.ValueErrorType.Promise:return"Expected Promise";case y.ValueErrorType.StringFormatUnknown:return`Unknown format '${$.format}'`;case y.ValueErrorType.StringFormat:return`Expected string to match '${$.format}' format`;case y.ValueErrorType.StringMaxLength:return`Expected string length less or equal to ${$.maxLength}`;case y.ValueErrorType.StringMinLength:return`Expected string length greater or equal to ${$.minLength}`;case y.ValueErrorType.StringPattern:return`Expected string to match '${$.pattern}'`;case y.ValueErrorType.String:return"Expected string";case y.ValueErrorType.Symbol:return"Expected symbol";case y.ValueErrorType.TupleLength:return`Expected tuple to have ${$.maxItems||0} elements`;case y.ValueErrorType.Tuple:return"Expected tuple";case y.ValueErrorType.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${$.maxByteLength}`;case y.ValueErrorType.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${$.minByteLength}`;case y.ValueErrorType.Uint8Array:return"Expected Uint8Array";case y.ValueErrorType.Undefined:return"Expected undefined";case y.ValueErrorType.Union:return"Expected union value";case y.ValueErrorType.Void:return"Expected void";case y.ValueErrorType.Kind:return`Expected kind '${$[J1.Kind]}'`;default:return"Unknown error type"}};Object.defineProperty(l8,"__esModule",{value:!0});l8.DefaultErrorFunction=l8.TypeSystemPolicy=l8.TypeSystemErrorFunction=l8.TypeSystem=l8.TypeSystemDuplicateFormat=l8.TypeSystemDuplicateTypeKind=void 0;var b$=E0(),y=Y$(),J1=x0();class K6 extends J1.TypeBoxError{constructor($){super(`Duplicate type kind '${$}' detected`)}}l8.TypeSystemDuplicateTypeKind=K6;class P6 extends J1.TypeBoxError{constructor($){super(`Duplicate string format '${$}' detected`)}}l8.TypeSystemDuplicateFormat=P6;var n8;(function($){function Y(X,Z){if(J1.TypeRegistry.Has(X))throw new K6(X);return J1.TypeRegistry.Set(X,Z),(Q={})=>J1.Type.Unsafe({...Q,[J1.Kind]:X})}$.Type=Y;function W(X,Z){if(J1.FormatRegistry.Has(X))throw new P6(X);return J1.FormatRegistry.Set(X,Z),X}$.Format=W})(n8||(l8.TypeSystem=n8={}));var o8;(function($){let Y=j6;function W(){Y=j6}$.Reset=W;function X(Q){Y=Q}$.Set=X;function Z(){return Y}$.Get=Z})(o8||(l8.TypeSystemErrorFunction=o8={}));var c8;(function($){$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function Y(J,z){return $.ExactOptionalPropertyTypes?z in J:J[z]!==void 0}$.IsExactOptionalProperty=Y;function W(J){const z=(0,b$.IsObject)(J);return $.AllowArrayObject?z:z&&!(0,b$.IsArray)(J)}$.IsObjectLike=W;function X(J){return W(J)&&!(J instanceof Date)&&!(J instanceof Uint8Array)}$.IsRecordLike=X;function Z(J){const z=(0,b$.IsNumber)(J);return $.AllowNaN?z:z&&Number.isFinite(J)}$.IsNumberLike=Z;function Q(J){const z=(0,b$.IsUndefined)(J);return $.AllowNullVoid?z||J===null:z}$.IsVoidLike=Q})(c8||(l8.TypeSystemPolicy=c8={}));l8.DefaultErrorFunction=j6});var D1=Q0((s8)=>{var IZ=function($,Y){const W=Y.findIndex((X)=>X.$id===$.$ref);if(W===-1)throw new S6($);return Y[W]};Object.defineProperty(s8,"__esModule",{value:!0});s8.Deref=s8.TypeDereferenceError=void 0;var CZ=x0();class S6 extends CZ.TypeBoxError{constructor($){super(`Unable to dereference schema with \$id '${$.$id}'`);this.schema=$}}s8.TypeDereferenceError=S6;s8.Deref=IZ});var W$=Q0((YY)=>{function*EZ($){const Y=$===0?1:Math.ceil(Math.floor(Math.log2($)+1)/8);for(let W=0;W<Y;W++)yield $>>8*(Y-1-W)&255}var VZ=function($){G0(k0.Array);for(let Y of $)v1(Y)},xZ=function($){G0(k0.Boolean),G0($?1:0)},kZ=function($){G0(k0.BigInt),e8.setBigInt64(0,$);for(let Y of $Y)G0(Y)},gZ=function($){G0(k0.Date),v1($.getTime())},fZ=function($){G0(k0.Null)},TZ=function($){G0(k0.Number),e8.setFloat64(0,$);for(let Y of $Y)G0(Y)},dZ=function($){G0(k0.Object);for(let Y of globalThis.Object.keys($).sort())v1(Y),v1($[Y])},yZ=function($){G0(k0.String);for(let Y=0;Y<$.length;Y++)for(let W of EZ($.charCodeAt(Y)))G0(W)},vZ=function($){G0(k0.Symbol),v1($.description)},pZ=function($){G0(k0.Uint8Array);for(let Y=0;Y<$.length;Y++)G0($[Y])},iZ=function($){return G0(k0.Undefined)},v1=function($){if((0,h0.IsArray)($))return VZ($);if((0,h0.IsBoolean)($))return xZ($);if((0,h0.IsBigInt)($))return kZ($);if((0,h0.IsDate)($))return gZ($);if((0,h0.IsNull)($))return fZ($);if((0,h0.IsNumber)($))return TZ($);if((0,h0.IsPlainObject)($))return dZ($);if((0,h0.IsString)($))return yZ($);if((0,h0.IsSymbol)($))return vZ($);if((0,h0.IsUint8Array)($))return pZ($);if((0,h0.IsUndefined)($))return iZ($);throw new L6($)},G0=function($){y1=y1^_Z[$],y1=y1*GZ%RZ},mZ=function($){return y1=BigInt("14695981039346656037"),v1($),y1};Object.defineProperty(YY,"__esModule",{value:!0});YY.Hash=YY.ByteMarker=YY.ValueHashError=void 0;var h0=E0();class L6 extends Error{constructor($){super("Unable to hash value");this.value=$}}YY.ValueHashError=L6;var k0;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(k0||(YY.ByteMarker=k0={}));var y1=BigInt("14695981039346656037"),[GZ,RZ]=[BigInt("1099511628211"),BigInt("2")**BigInt("64")],_Z=Array.from({length:256}).map(($,Y)=>BigInt(Y)),a8=new Float64Array(1),e8=new DataView(a8.buffer),$Y=new Uint8Array(a8.buffer);YY.Hash=mZ});var Y$=Q0((ZY)=>{var l=function($){return $!==void 0},g=function($,Y,W,X){return{type:$,schema:Y,path:W,value:X,message:p1.TypeSystemErrorFunction.Get()(Y,$)}};function*oZ($,Y,W,X){}function*cZ($,Y,W,X){if(!(0,A0.IsArray)(X))return yield g(x.Array,$,W,X);if(l($.minItems)&&!(X.length>=$.minItems))yield g(x.ArrayMinItems,$,W,X);if(l($.maxItems)&&!(X.length<=$.maxItems))yield g(x.ArrayMaxItems,$,W,X);for(let J=0;J<X.length;J++)yield*S0($.items,Y,`${W}/${J}`,X[J]);if($.uniqueItems===!0&&!function(){const J=new Set;for(let z of X){const A=(0,nZ.Hash)(z);if(J.has(A))return!1;else J.add(A)}return!0}())yield g(x.ArrayUniqueItems,$,W,X);if(!(l($.contains)||l($.minContains)||l($.maxContains)))return;const Z=l($.contains)?$.contains:d0.Type.Never(),Q=X.reduce((J,z,A)=>S0(Z,Y,`${W}${A}`,z).next().done===!0?J+1:J,0);if(Q===0)yield g(x.ArrayContains,$,W,X);if((0,A0.IsNumber)($.minContains)&&Q<$.minContains)yield g(x.ArrayMinContains,$,W,X);if((0,A0.IsNumber)($.maxContains)&&Q>$.maxContains)yield g(x.ArrayMaxContains,$,W,X)}function*lZ($,Y,W,X){if(!(0,A0.IsAsyncIterator)(X))yield g(x.AsyncIterator,$,W,X)}function*tZ($,Y,W,X){if(!(0,A0.IsBigInt)(X))return yield g(x.BigInt,$,W,X);if(l($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield g(x.BigIntExclusiveMaximum,$,W,X);if(l($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield g(x.BigIntExclusiveMinimum,$,W,X);if(l($.maximum)&&!(X<=$.maximum))yield g(x.BigIntMaximum,$,W,X);if(l($.minimum)&&!(X>=$.minimum))yield g(x.BigIntMinimum,$,W,X);if(l($.multipleOf)&&X%$.multipleOf!==BigInt(0))yield g(x.BigIntMultipleOf,$,W,X)}function*sZ($,Y,W,X){if(!(0,A0.IsBoolean)(X))yield g(x.Boolean,$,W,X)}function*rZ($,Y,W,X){yield*S0($.returns,Y,W,X.prototype)}function*aZ($,Y,W,X){if(!(0,A0.IsDate)(X))return yield g(x.Date,$,W,X);if(l($.exclusiveMaximumTimestamp)&&!(X.getTime()<$.exclusiveMaximumTimestamp))yield g(x.DateExclusiveMaximumTimestamp,$,W,X);if(l($.exclusiveMinimumTimestamp)&&!(X.getTime()>$.exclusiveMinimumTimestamp))yield g(x.DateExclusiveMinimumTimestamp,$,W,X);if(l($.maximumTimestamp)&&!(X.getTime()<=$.maximumTimestamp))yield g(x.DateMaximumTimestamp,$,W,X);if(l($.minimumTimestamp)&&!(X.getTime()>=$.minimumTimestamp))yield g(x.DateMinimumTimestamp,$,W,X);if(l($.multipleOfTimestamp)&&X.getTime()%$.multipleOfTimestamp!==0)yield g(x.DateMultipleOfTimestamp,$,W,X)}function*eZ($,Y,W,X){if(!(0,A0.IsFunction)(X))yield g(x.Function,$,W,X)}function*$4($,Y,W,X){if(!(0,A0.IsInteger)(X))return yield g(x.Integer,$,W,X);if(l($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield g(x.IntegerExclusiveMaximum,$,W,X);if(l($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield g(x.IntegerExclusiveMinimum,$,W,X);if(l($.maximum)&&!(X<=$.maximum))yield g(x.IntegerMaximum,$,W,X);if(l($.minimum)&&!(X>=$.minimum))yield g(x.IntegerMinimum,$,W,X);if(l($.multipleOf)&&X%$.multipleOf!==0)yield g(x.IntegerMultipleOf,$,W,X)}function*Y4($,Y,W,X){for(let Z of $.allOf){const Q=S0(Z,Y,W,X).next();if(!Q.done)yield g(x.Intersect,$,W,X),yield Q.value}if($.unevaluatedProperties===!1){const Z=new RegExp(d0.KeyResolver.ResolvePattern($));for(let Q of Object.getOwnPropertyNames(X))if(!Z.test(Q))yield g(x.IntersectUnevaluatedProperties,$,`${W}/${Q}`,X)}if(typeof $.unevaluatedProperties==="object"){const Z=new RegExp(d0.KeyResolver.ResolvePattern($));for(let Q of Object.getOwnPropertyNames(X))if(!Z.test(Q)){const J=S0($.unevaluatedProperties,Y,`${W}/${Q}`,X[Q]).next();if(!J.done)yield J.value}}}function*W4($,Y,W,X){if(!(0,A0.IsIterator)(X))yield g(x.Iterator,$,W,X)}function*X4($,Y,W,X){if(X!==$.const)yield g(x.Literal,$,W,X)}function*Z4($,Y,W,X){yield g(x.Never,$,W,X)}function*Q4($,Y,W,X){if(S0($.not,Y,W,X).next().done===!0)yield g(x.Not,$,W,X)}function*J4($,Y,W,X){if(!(0,A0.IsNull)(X))yield g(x.Null,$,W,X)}function*z4($,Y,W,X){if(!p1.TypeSystemPolicy.IsNumberLike(X))return yield g(x.Number,$,W,X);if(l($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield g(x.NumberExclusiveMaximum,$,W,X);if(l($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield g(x.NumberExclusiveMinimum,$,W,X);if(l($.maximum)&&!(X<=$.maximum))yield g(x.NumberMaximum,$,W,X);if(l($.minimum)&&!(X>=$.minimum))yield g(x.NumberMinimum,$,W,X);if(l($.multipleOf)&&X%$.multipleOf!==0)yield g(x.NumberMultipleOf,$,W,X)}function*H4($,Y,W,X){if(!p1.TypeSystemPolicy.IsObjectLike(X))return yield g(x.Object,$,W,X);if(l($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))yield g(x.ObjectMinProperties,$,W,X);if(l($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))yield g(x.ObjectMaxProperties,$,W,X);const Z=Array.isArray($.required)?$.required:[],Q=Object.getOwnPropertyNames($.properties),J=Object.getOwnPropertyNames(X);for(let z of Z){if(J.includes(z))continue;yield g(x.ObjectRequiredProperty,$.properties[z],`${W}/${z}`,void 0)}if($.additionalProperties===!1){for(let z of J)if(!Q.includes(z))yield g(x.ObjectAdditionalProperties,$,`${W}/${z}`,X[z])}if(typeof $.additionalProperties==="object")for(let z of J){if(Q.includes(z))continue;yield*S0($.additionalProperties,Y,`${W}/${z}`,X[z])}for(let z of Q){const A=$.properties[z];if($.required&&$.required.includes(z)){if(yield*S0(A,Y,`${W}/${z}`,X[z]),d0.ExtendsUndefined.Check($)&&!(z in X))yield g(x.ObjectRequiredProperty,A,`${W}/${z}`,void 0)}else if(p1.TypeSystemPolicy.IsExactOptionalProperty(X,z))yield*S0(A,Y,`${W}/${z}`,X[z])}}function*q4($,Y,W,X){if(!(0,A0.IsPromise)(X))yield g(x.Promise,$,W,X)}function*N4($,Y,W,X){if(!p1.TypeSystemPolicy.IsRecordLike(X))return yield g(x.Object,$,W,X);if(l($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))yield g(x.ObjectMinProperties,$,W,X);if(l($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))yield g(x.ObjectMaxProperties,$,W,X);const[Z,Q]=Object.entries($.patternProperties)[0],J=new RegExp(Z);for(let[z,A]of Object.entries(X))if(J.test(z))yield*S0(Q,Y,`${W}/${z}`,A);if(typeof $.additionalProperties==="object"){for(let[z,A]of Object.entries(X))if(!J.test(z))yield*S0($.additionalProperties,Y,`${W}/${z}`,A)}if($.additionalProperties===!1)for(let[z,A]of Object.entries(X)){if(J.test(z))continue;return yield g(x.ObjectAdditionalProperties,$,`${W}/${z}`,A)}}function*M4($,Y,W,X){yield*S0((0,XY.Deref)($,Y),Y,W,X)}function*U4($,Y,W,X){if(!(0,A0.IsString)(X))return yield g(x.String,$,W,X);if(l($.minLength)&&!(X.length>=$.minLength))yield g(x.StringMinLength,$,W,X);if(l($.maxLength)&&!(X.length<=$.maxLength))yield g(x.StringMaxLength,$,W,X);if((0,A0.IsString)($.pattern)){if(!new RegExp($.pattern).test(X))yield g(x.StringPattern,$,W,X)}if((0,A0.IsString)($.format)){if(!d0.FormatRegistry.Has($.format))yield g(x.StringFormatUnknown,$,W,X);else if(!d0.FormatRegistry.Get($.format)(X))yield g(x.StringFormat,$,W,X)}}function*A4($,Y,W,X){if(!(0,A0.IsSymbol)(X))yield g(x.Symbol,$,W,X)}function*B4($,Y,W,X){if(!(0,A0.IsString)(X))return yield g(x.String,$,W,X);if(!new RegExp($.pattern).test(X))yield g(x.StringPattern,$,W,X)}function*F4($,Y,W,X){yield*S0((0,XY.Deref)($,Y),Y,W,X)}function*D4($,Y,W,X){if(!(0,A0.IsArray)(X))return yield g(x.Tuple,$,W,X);if($.items===void 0&&X.length!==0)return yield g(x.TupleLength,$,W,X);if(X.length!==$.maxItems)return yield g(x.TupleLength,$,W,X);if(!$.items)return;for(let Z=0;Z<$.items.length;Z++)yield*S0($.items[Z],Y,`${W}/${Z}`,X[Z])}function*w4($,Y,W,X){if(!(0,A0.IsUndefined)(X))yield g(x.Undefined,$,W,X)}function*j4($,Y,W,X){let Z=0;for(let Q of $.anyOf){const J=[...S0(Q,Y,W,X)];if(J.length===0)return;Z+=J.length}if(Z>0)yield g(x.Union,$,W,X)}function*K4($,Y,W,X){if(!(0,A0.IsUint8Array)(X))return yield g(x.Uint8Array,$,W,X);if(l($.maxByteLength)&&!(X.length<=$.maxByteLength))yield g(x.Uint8ArrayMaxByteLength,$,W,X);if(l($.minByteLength)&&!(X.length>=$.minByteLength))yield g(x.Uint8ArrayMinByteLength,$,W,X)}function*P4($,Y,W,X){}function*O4($,Y,W,X){if(!p1.TypeSystemPolicy.IsVoidLike(X))yield g(x.Void,$,W,X)}function*S4($,Y,W,X){if(!d0.TypeRegistry.Get($[d0.Kind])($,X))yield g(x.Kind,$,W,X)}function*S0($,Y,W,X){const Z=l($.$id)?[...Y,$]:Y,Q=$;switch(Q[d0.Kind]){case"Any":return yield*oZ(Q,Z,W,X);case"Array":return yield*cZ(Q,Z,W,X);case"AsyncIterator":return yield*lZ(Q,Z,W,X);case"BigInt":return yield*tZ(Q,Z,W,X);case"Boolean":return yield*sZ(Q,Z,W,X);case"Constructor":return yield*rZ(Q,Z,W,X);case"Date":return yield*aZ(Q,Z,W,X);case"Function":return yield*eZ(Q,Z,W,X);case"Integer":return yield*$4(Q,Z,W,X);case"Intersect":return yield*Y4(Q,Z,W,X);case"Iterator":return yield*W4(Q,Z,W,X);case"Literal":return yield*X4(Q,Z,W,X);case"Never":return yield*Z4(Q,Z,W,X);case"Not":return yield*Q4(Q,Z,W,X);case"Null":return yield*J4(Q,Z,W,X);case"Number":return yield*z4(Q,Z,W,X);case"Object":return yield*H4(Q,Z,W,X);case"Promise":return yield*q4(Q,Z,W,X);case"Record":return yield*N4(Q,Z,W,X);case"Ref":return yield*M4(Q,Z,W,X);case"String":return yield*U4(Q,Z,W,X);case"Symbol":return yield*A4(Q,Z,W,X);case"TemplateLiteral":return yield*B4(Q,Z,W,X);case"This":return yield*F4(Q,Z,W,X);case"Tuple":return yield*D4(Q,Z,W,X);case"Undefined":return yield*w4(Q,Z,W,X);case"Union":return yield*j4(Q,Z,W,X);case"Uint8Array":return yield*K4(Q,Z,W,X);case"Unknown":return yield*P4(Q,Z,W,X);case"Void":return yield*O4(Q,Z,W,X);default:if(!d0.TypeRegistry.Has(Q[d0.Kind]))throw new C6($);return yield*S4(Q,Z,W,X)}}var L4=function(...$){const Y=$.length===3?S0($[0],$[1],"",$[2]):S0($[0],[],"",$[1]);return new I6(Y)};Object.defineProperty(ZY,"__esModule",{value:!0});ZY.Errors=ZY.ValueErrorIterator=ZY.ValueErrorsUnknownTypeError=ZY.ValueErrorType=void 0;var A0=E0(),p1=O6(),XY=D1(),nZ=W$(),d0=x0(),x;(function($){$[$.ArrayContains=0]="ArrayContains",$[$.ArrayMaxContains=1]="ArrayMaxContains",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayMinContains=3]="ArrayMinContains",$[$.ArrayMinItems=4]="ArrayMinItems",$[$.ArrayUniqueItems=5]="ArrayUniqueItems",$[$.Array=6]="Array",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",$[$.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",$[$.BigIntMaximum=10]="BigIntMaximum",$[$.BigIntMinimum=11]="BigIntMinimum",$[$.BigIntMultipleOf=12]="BigIntMultipleOf",$[$.BigInt=13]="BigInt",$[$.Boolean=14]="Boolean",$[$.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateMaximumTimestamp=17]="DateMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",$[$.Date=20]="Date",$[$.Function=21]="Function",$[$.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerMaximum=24]="IntegerMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMultipleOf=26]="IntegerMultipleOf",$[$.Integer=27]="Integer",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Intersect=29]="Intersect",$[$.Iterator=30]="Iterator",$[$.Kind=31]="Kind",$[$.Literal=32]="Literal",$[$.Never=33]="Never",$[$.Not=34]="Not",$[$.Null=35]="Null",$[$.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",$[$.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",$[$.NumberMaximum=38]="NumberMaximum",$[$.NumberMinimum=39]="NumberMinimum",$[$.NumberMultipleOf=40]="NumberMultipleOf",$[$.Number=41]="Number",$[$.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",$[$.ObjectMaxProperties=43]="ObjectMaxProperties",$[$.ObjectMinProperties=44]="ObjectMinProperties",$[$.ObjectRequiredProperty=45]="ObjectRequiredProperty",$[$.Object=46]="Object",$[$.Promise=47]="Promise",$[$.StringFormatUnknown=48]="StringFormatUnknown",$[$.StringFormat=49]="StringFormat",$[$.StringMaxLength=50]="StringMaxLength",$[$.StringMinLength=51]="StringMinLength",$[$.StringPattern=52]="StringPattern",$[$.String=53]="String",$[$.Symbol=54]="Symbol",$[$.TupleLength=55]="TupleLength",$[$.Tuple=56]="Tuple",$[$.Uint8ArrayMaxByteLength=57]="Uint8ArrayMaxByteLength",$[$.Uint8ArrayMinByteLength=58]="Uint8ArrayMinByteLength",$[$.Uint8Array=59]="Uint8Array",$[$.Undefined=60]="Undefined",$[$.Union=61]="Union",$[$.Void=62]="Void"})(x||(ZY.ValueErrorType=x={}));class C6 extends d0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}ZY.ValueErrorsUnknownTypeError=C6;class I6{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){const $=this.iterator.next();return $.done?void 0:$.value}}ZY.ValueErrorIterator=I6;ZY.Errors=L4});var G$=Q0((S1)=>{var G4=S1&&S1.__createBinding||(Object.create?function($,Y,W,X){if(X===void 0)X=W;var Z=Object.getOwnPropertyDescriptor(Y,W);if(!Z||("get"in Z?!Y.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return Y[W]}};Object.defineProperty($,X,Z)}:function($,Y,W,X){if(X===void 0)X=W;$[X]=Y[W]}),R4=S1&&S1.__exportStar||function($,Y){for(var W in $)if(W!=="default"&&!Object.prototype.hasOwnProperty.call(Y,W))G4(Y,$,W)};Object.defineProperty(S1,"__esModule",{value:!0});R4(Y$(),S1)});var R$=Q0((zY)=>{Object.defineProperty(zY,"__esModule",{value:!0});zY.ValuePointer=zY.ValuePointerRootDeleteError=zY.ValuePointerRootSetError=void 0;class b6 extends Error{constructor($,Y,W){super("Cannot set root value");this.value=$,this.path=Y,this.update=W}}zY.ValuePointerRootSetError=b6;class G6 extends Error{constructor($,Y){super("Cannot delete root value");this.value=$,this.path=Y}}zY.ValuePointerRootDeleteError=G6;var JY;(function($){function Y(z){return z.indexOf("~")===-1?z:z.replace(/~1/g,"/").replace(/~0/g,"~")}function*W(z){if(z==="")return;let[A,D]=[0,0];for(let F=0;F<z.length;F++)if(z.charAt(F)==="/")if(F===0)A=F+1;else D=F,yield Y(z.slice(A,D)),A=F+1;else D=F;yield Y(z.slice(A))}$.Format=W;function X(z,A,D){if(A==="")throw new b6(z,A,D);let[F,S,b]=[null,z,""];for(let j of W(A)){if(S[j]===void 0)S[j]={};F=S,S=S[j],b=j}F[b]=D}$.Set=X;function Z(z,A){if(A==="")throw new G6(z,A);let[D,F,S]=[null,z,""];for(let b of W(A)){if(F[b]===void 0||F[b]===null)return;D=F,F=F[b],S=b}if(Array.isArray(D)){const b=parseInt(S);D.splice(b,1)}else delete D[S]}$.Delete=Z;function Q(z,A){if(A==="")return!0;let[D,F,S]=[null,z,""];for(let b of W(A)){if(F[b]===void 0)return!1;D=F,F=F[b],S=b}return Object.getOwnPropertyNames(D).includes(S)}$.Has=Q;function J(z,A){if(A==="")return z;let D=z;for(let F of W(A)){if(D[F]===void 0)return;D=D[F]}return D}$.Get=J})(JY||(zY.ValuePointer=JY={}))});var i1=Q0((qY)=>{var V4=function($){return[...Object.getOwnPropertyNames($),...Object.getOwnPropertySymbols($)].reduce((W,X)=>({...W,[X]:R6($[X])}),{})},x4=function($){return $.map((Y)=>R6(Y))},k4=function($){return $.slice()},g4=function($){return new Date($.toISOString())},f4=function($){return $},R6=function($){if((0,X$.IsArray)($))return x4($);if((0,X$.IsDate)($))return g4($);if((0,X$.IsPlainObject)($))return V4($);if((0,X$.IsTypedArray)($))return k4($);if((0,X$.IsValueType)($))return f4($);throw new Error("ValueClone: Unable to clone value")};Object.defineProperty(qY,"__esModule",{value:!0});qY.Clone=void 0;var X$=E0();qY.Clone=R6});var x6=Q0((AY)=>{var Z$=function($,Y){return{type:"update",path:$,value:Y}},MY=function($,Y){return{type:"insert",path:$,value:Y}},UY=function($){return{type:"delete",path:$}};function*T4($,Y,W){if(!(0,R0.IsPlainObject)(W))return yield Z$($,W);const X=[...Object.keys(Y),...Object.getOwnPropertySymbols(Y)],Z=[...Object.keys(W),...Object.getOwnPropertySymbols(W)];for(let Q of X){if((0,R0.IsSymbol)(Q))throw new m1(Q);if((0,R0.IsUndefined)(W[Q])&&Z.includes(Q))yield Z$(`${$}/${String(Q)}`,void 0)}for(let Q of Z){if((0,R0.IsUndefined)(Y[Q])||(0,R0.IsUndefined)(W[Q]))continue;if((0,R0.IsSymbol)(Q))throw new m1(Q);yield*_$(`${$}/${String(Q)}`,Y[Q],W[Q])}for(let Q of Z){if((0,R0.IsSymbol)(Q))throw new m1(Q);if((0,R0.IsUndefined)(Y[Q]))yield MY(`${$}/${String(Q)}`,W[Q])}for(let Q of X.reverse()){if((0,R0.IsSymbol)(Q))throw new m1(Q);if((0,R0.IsUndefined)(W[Q])&&!Z.includes(Q))yield UY(`${$}/${String(Q)}`)}}function*d4($,Y,W){if(!(0,R0.IsArray)(W))return yield Z$($,W);for(let X=0;X<Math.min(Y.length,W.length);X++)yield*_$(`${$}/${X}`,Y[X],W[X]);for(let X=0;X<W.length;X++){if(X<Y.length)continue;yield MY(`${$}/${X}`,W[X])}for(let X=Y.length-1;X>=0;X--){if(X<W.length)continue;yield UY(`${$}/${X}`)}}function*y4($,Y,W){if(!(0,R0.IsTypedArray)(W)||Y.length!==W.length||Object.getPrototypeOf(Y).constructor.name!==Object.getPrototypeOf(W).constructor.name)return yield Z$($,W);for(let X=0;X<Math.min(Y.length,W.length);X++)yield*_$(`${$}/${X}`,Y[X],W[X])}function*v4($,Y,W){if(Y===W)return;yield Z$($,W)}function*_$($,Y,W){if((0,R0.IsPlainObject)(Y))return yield*T4($,Y,W);if((0,R0.IsArray)(Y))return yield*d4($,Y,W);if((0,R0.IsTypedArray)(Y))return yield*y4($,Y,W);if((0,R0.IsValueType)(Y))return yield*v4($,Y,W);throw new V6(Y)}var p4=function($,Y){return[..._$("",$,Y)]},i4=function($){return $.length>0&&$[0].path===""&&$[0].type==="update"},m4=function($){return $.length===0},u4=function($,Y){if(i4(Y))return(0,E6.Clone)(Y[0].value);if(m4(Y))return(0,E6.Clone)($);const W=(0,E6.Clone)($);for(let X of Y)switch(X.type){case"insert":{_6.ValuePointer.Set(W,X.path,X.value);break}case"update":{_6.ValuePointer.Set(W,X.path,X.value);break}case"delete":{_6.ValuePointer.Delete(W,X.path);break}}return W};Object.defineProperty(AY,"__esModule",{value:!0});AY.Patch=AY.Diff=AY.ValueDeltaUnableToDiffUnknownValue=AY.ValueDeltaObjectWithSymbolKeyError=AY.Edit=AY.Delete=AY.Update=AY.Insert=void 0;var R0=E0(),y0=x0(),_6=R$(),E6=i1();AY.Insert=y0.Type.Object({type:y0.Type.Literal("insert"),path:y0.Type.String(),value:y0.Type.Unknown()});AY.Update=y0.Type.Object({type:y0.Type.Literal("update"),path:y0.Type.String(),value:y0.Type.Unknown()});AY.Delete=y0.Type.Object({type:y0.Type.Literal("delete"),path:y0.Type.String()});AY.Edit=y0.Type.Union([AY.Insert,AY.Update,AY.Delete]);class m1 extends Error{constructor($){super("Cannot diff objects with symbol keys");this.key=$}}AY.ValueDeltaObjectWithSymbolKeyError=m1;class V6 extends Error{constructor($){super("Unable to create diff edits for unknown value");this.value=$}}AY.ValueDeltaUnableToDiffUnknownValue=V6;AY.Diff=p4;AY.Patch=u4});var OY=Q0((KY)=>{var l4=function($,Y,W,X){if(!(0,g0.IsPlainObject)(W))E$.ValuePointer.Set($,Y,(0,k6.Clone)(X));else{const Z=Object.keys(W),Q=Object.keys(X);for(let J of Z)if(!Q.includes(J))delete W[J];for(let J of Q)if(!Z.includes(J))W[J]=null;for(let J of Q)T6($,`${Y}/${J}`,W[J],X[J])}},t4=function($,Y,W,X){if(!(0,g0.IsArray)(W))E$.ValuePointer.Set($,Y,(0,k6.Clone)(X));else{for(let Z=0;Z<X.length;Z++)T6($,`${Y}/${Z}`,W[Z],X[Z]);W.splice(X.length)}},s4=function($,Y,W,X){if((0,g0.IsTypedArray)(W)&&W.length===X.length)for(let Z=0;Z<W.length;Z++)W[Z]=X[Z];else E$.ValuePointer.Set($,Y,(0,k6.Clone)(X))},r4=function($,Y,W,X){if(W===X)return;E$.ValuePointer.Set($,Y,X)},T6=function($,Y,W,X){if((0,g0.IsArray)(X))return t4($,Y,W,X);if((0,g0.IsTypedArray)(X))return s4($,Y,W,X);if((0,g0.IsPlainObject)(X))return l4($,Y,W,X);if((0,g0.IsValueType)(X))return r4($,Y,W,X)},jY=function($){return(0,g0.IsTypedArray)($)||(0,g0.IsValueType)($)},a4=function($,Y){return(0,g0.IsPlainObject)($)&&(0,g0.IsArray)(Y)||(0,g0.IsArray)($)&&(0,g0.IsPlainObject)(Y)},e4=function($,Y){if(jY($)||jY(Y))throw new f6;if(a4($,Y))throw new g6;T6($,"",$,Y)};Object.defineProperty(KY,"__esModule",{value:!0});KY.Mutate=KY.ValueMutateInvalidRootMutationError=KY.ValueMutateTypeMismatchError=void 0;var g0=E0(),E$=R$(),k6=i1();class g6 extends Error{constructor(){super("Cannot assign due type mismatch of assignable values")}}KY.ValueMutateTypeMismatchError=g6;class f6 extends Error{constructor(){super("Only object and array types can be mutated at the root level")}}KY.ValueMutateInvalidRootMutationError=f6;KY.Mutate=e4});var CY=Q0((SY)=>{var WQ=function($,Y){if(!(0,z1.IsPlainObject)(Y))return!1;const W=[...Object.keys($),...Object.getOwnPropertySymbols($)],X=[...Object.keys(Y),...Object.getOwnPropertySymbols(Y)];if(W.length!==X.length)return!1;return W.every((Z)=>V$($[Z],Y[Z]))},XQ=function($,Y){return(0,z1.IsDate)(Y)&&$.getTime()===Y.getTime()},ZQ=function($,Y){if(!(0,z1.IsArray)(Y)||$.length!==Y.length)return!1;return $.every((W,X)=>V$(W,Y[X]))},QQ=function($,Y){if(!(0,z1.IsTypedArray)(Y)||$.length!==Y.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(Y).constructor.name)return!1;return $.every((W,X)=>V$(W,Y[X]))},JQ=function($,Y){return $===Y},V$=function($,Y){if((0,z1.IsPlainObject)($))return WQ($,Y);if((0,z1.IsDate)($))return XQ($,Y);if((0,z1.IsTypedArray)($))return QQ($,Y);if((0,z1.IsArray)($))return ZQ($,Y);if((0,z1.IsValueType)($))return JQ($,Y);throw new Error("ValueEquals: Unable to compare value")};Object.defineProperty(SY,"__esModule",{value:!0});SY.Equal=void 0;var z1=E0();SY.Equal=V$});var x$=Q0((H1)=>{var zQ=H1&&H1.__createBinding||(Object.create?function($,Y,W,X){if(X===void 0)X=W;var Z=Object.getOwnPropertyDescriptor(Y,W);if(!Z||("get"in Z?!Y.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return Y[W]}};Object.defineProperty($,X,Z)}:function($,Y,W,X){if(X===void 0)X=W;$[X]=Y[W]}),HQ=H1&&H1.__exportStar||function($,Y){for(var W in $)if(W!=="default"&&!Object.prototype.hasOwnProperty.call(Y,W))zQ(Y,$,W)};Object.defineProperty(H1,"__esModule",{value:!0});H1.ValueErrorType=void 0;var qQ=Y$();Object.defineProperty(H1,"ValueErrorType",{enumerable:!0,get:function(){return qQ.ValueErrorType}});HQ(O6(),H1)});var J$=Q0((bY)=>{var MQ=function($){return $[L0.Kind]==="Any"||$[L0.Kind]==="Unknown"},t=function($){return $!==void 0},UQ=function($,Y,W){return!0},AQ=function($,Y,W){if(!(0,B0.IsArray)(W))return!1;if(t($.minItems)&&!(W.length>=$.minItems))return!1;if(t($.maxItems)&&!(W.length<=$.maxItems))return!1;if(!W.every((Q)=>C0($.items,Y,Q)))return!1;if($.uniqueItems===!0&&!function(){const Q=new Set;for(let J of W){const z=(0,NQ.Hash)(J);if(Q.has(z))return!1;else Q.add(z)}return!0}())return!1;if(!(t($.contains)||(0,B0.IsNumber)($.minContains)||(0,B0.IsNumber)($.maxContains)))return!0;const X=t($.contains)?$.contains:L0.Type.Never(),Z=W.reduce((Q,J)=>C0(X,Y,J)?Q+1:Q,0);if(Z===0)return!1;if((0,B0.IsNumber)($.minContains)&&Z<$.minContains)return!1;if((0,B0.IsNumber)($.maxContains)&&Z>$.maxContains)return!1;return!0},BQ=function($,Y,W){return(0,B0.IsAsyncIterator)(W)},FQ=function($,Y,W){if(!(0,B0.IsBigInt)(W))return!1;if(t($.exclusiveMaximum)&&!(W<$.exclusiveMaximum))return!1;if(t($.exclusiveMinimum)&&!(W>$.exclusiveMinimum))return!1;if(t($.maximum)&&!(W<=$.maximum))return!1;if(t($.minimum)&&!(W>=$.minimum))return!1;if(t($.multipleOf)&&W%$.multipleOf!==BigInt(0))return!1;return!0},DQ=function($,Y,W){return(0,B0.IsBoolean)(W)},wQ=function($,Y,W){return C0($.returns,Y,W.prototype)},jQ=function($,Y,W){if(!(0,B0.IsDate)(W))return!1;if(t($.exclusiveMaximumTimestamp)&&!(W.getTime()<$.exclusiveMaximumTimestamp))return!1;if(t($.exclusiveMinimumTimestamp)&&!(W.getTime()>$.exclusiveMinimumTimestamp))return!1;if(t($.maximumTimestamp)&&!(W.getTime()<=$.maximumTimestamp))return!1;if(t($.minimumTimestamp)&&!(W.getTime()>=$.minimumTimestamp))return!1;if(t($.multipleOfTimestamp)&&W.getTime()%$.multipleOfTimestamp!==0)return!1;return!0},KQ=function($,Y,W){return(0,B0.IsFunction)(W)},PQ=function($,Y,W){if(!(0,B0.IsInteger)(W))return!1;if(t($.exclusiveMaximum)&&!(W<$.exclusiveMaximum))return!1;if(t($.exclusiveMinimum)&&!(W>$.exclusiveMinimum))return!1;if(t($.maximum)&&!(W<=$.maximum))return!1;if(t($.minimum)&&!(W>=$.minimum))return!1;if(t($.multipleOf)&&W%$.multipleOf!==0)return!1;return!0},OQ=function($,Y,W){const X=$.allOf.every((Z)=>C0(Z,Y,W));if($.unevaluatedProperties===!1){const Z=new RegExp(L0.KeyResolver.ResolvePattern($)),Q=Object.getOwnPropertyNames(W).every((J)=>Z.test(J));return X&&Q}else if(L0.TypeGuard.TSchema($.unevaluatedProperties)){const Z=new RegExp(L0.KeyResolver.ResolvePattern($)),Q=Object.getOwnPropertyNames(W).every((J)=>Z.test(J)||C0($.unevaluatedProperties,Y,W[J]));return X&&Q}else return X},SQ=function($,Y,W){return(0,B0.IsIterator)(W)},LQ=function($,Y,W){return W===$.const},CQ=function($,Y,W){return!1},IQ=function($,Y,W){return!C0($.not,Y,W)},bQ=function($,Y,W){return(0,B0.IsNull)(W)},GQ=function($,Y,W){if(!Q$.TypeSystemPolicy.IsNumberLike(W))return!1;if(t($.exclusiveMaximum)&&!(W<$.exclusiveMaximum))return!1;if(t($.exclusiveMinimum)&&!(W>$.exclusiveMinimum))return!1;if(t($.minimum)&&!(W>=$.minimum))return!1;if(t($.maximum)&&!(W<=$.maximum))return!1;if(t($.multipleOf)&&W%$.multipleOf!==0)return!1;return!0},RQ=function($,Y,W){if(!Q$.TypeSystemPolicy.IsObjectLike(W))return!1;if(t($.minProperties)&&!(Object.getOwnPropertyNames(W).length>=$.minProperties))return!1;if(t($.maxProperties)&&!(Object.getOwnPropertyNames(W).length<=$.maxProperties))return!1;const X=Object.getOwnPropertyNames($.properties);for(let Z of X){const Q=$.properties[Z];if($.required&&$.required.includes(Z)){if(!C0(Q,Y,W[Z]))return!1;if((L0.ExtendsUndefined.Check(Q)||MQ(Q))&&!(Z in W))return!1}else if(Q$.TypeSystemPolicy.IsExactOptionalProperty(W,Z)&&!C0(Q,Y,W[Z]))return!1}if($.additionalProperties===!1){const Z=Object.getOwnPropertyNames(W);if($.required&&$.required.length===X.length&&Z.length===X.length)return!0;else return Z.every((Q)=>X.includes(Q))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(W).every((Q)=>X.includes(Q)||C0($.additionalProperties,Y,W[Q]));else return!0},_Q=function($,Y,W){return(0,B0.IsPromise)(W)},EQ=function($,Y,W){if(!Q$.TypeSystemPolicy.IsRecordLike(W))return!1;if(t($.minProperties)&&!(Object.getOwnPropertyNames(W).length>=$.minProperties))return!1;if(t($.maxProperties)&&!(Object.getOwnPropertyNames(W).length<=$.maxProperties))return!1;const[X,Z]=Object.entries($.patternProperties)[0],Q=new RegExp(X),J=Object.entries(W).every(([D,F])=>{return Q.test(D)?C0(Z,Y,F):!0}),z=typeof $.additionalProperties==="object"?Object.entries(W).every(([D,F])=>{return!Q.test(D)?C0($.additionalProperties,Y,F):!0}):!0,A=$.additionalProperties===!1?Object.getOwnPropertyNames(W).every((D)=>{return Q.test(D)}):!0;return J&&z&&A},VQ=function($,Y,W){return C0((0,IY.Deref)($,Y),Y,W)},xQ=function($,Y,W){if(!(0,B0.IsString)(W))return!1;if(t($.minLength)){if(!(W.length>=$.minLength))return!1}if(t($.maxLength)){if(!(W.length<=$.maxLength))return!1}if(t($.pattern)){if(!new RegExp($.pattern).test(W))return!1}if(t($.format)){if(!L0.FormatRegistry.Has($.format))return!1;return L0.FormatRegistry.Get($.format)(W)}return!0},kQ=function($,Y,W){return(0,B0.IsSymbol)(W)},gQ=function($,Y,W){return(0,B0.IsString)(W)&&new RegExp($.pattern).test(W)},fQ=function($,Y,W){return C0((0,IY.Deref)($,Y),Y,W)},TQ=function($,Y,W){if(!(0,B0.IsArray)(W))return!1;if($.items===void 0&&W.length!==0)return!1;if(W.length!==$.maxItems)return!1;if(!$.items)return!0;for(let X=0;X<$.items.length;X++)if(!C0($.items[X],Y,W[X]))return!1;return!0},dQ=function($,Y,W){return(0,B0.IsUndefined)(W)},yQ=function($,Y,W){return $.anyOf.some((X)=>C0(X,Y,W))},vQ=function($,Y,W){if(!(0,B0.IsUint8Array)(W))return!1;if(t($.maxByteLength)&&!(W.length<=$.maxByteLength))return!1;if(t($.minByteLength)&&!(W.length>=$.minByteLength))return!1;return!0},pQ=function($,Y,W){return!0},iQ=function($,Y,W){return Q$.TypeSystemPolicy.IsVoidLike(W)},mQ=function($,Y,W){if(!L0.TypeRegistry.Has($[L0.Kind]))return!1;return L0.TypeRegistry.Get($[L0.Kind])($,W)},C0=function($,Y,W){const X=t($.$id)?[...Y,$]:Y,Z=$;switch(Z[L0.Kind]){case"Any":return UQ(Z,X,W);case"Array":return AQ(Z,X,W);case"AsyncIterator":return BQ(Z,X,W);case"BigInt":return FQ(Z,X,W);case"Boolean":return DQ(Z,X,W);case"Constructor":return wQ(Z,X,W);case"Date":return jQ(Z,X,W);case"Function":return KQ(Z,X,W);case"Integer":return PQ(Z,X,W);case"Intersect":return OQ(Z,X,W);case"Iterator":return SQ(Z,X,W);case"Literal":return LQ(Z,X,W);case"Never":return CQ(Z,X,W);case"Not":return IQ(Z,X,W);case"Null":return bQ(Z,X,W);case"Number":return GQ(Z,X,W);case"Object":return RQ(Z,X,W);case"Promise":return _Q(Z,X,W);case"Record":return EQ(Z,X,W);case"Ref":return VQ(Z,X,W);case"String":return xQ(Z,X,W);case"Symbol":return kQ(Z,X,W);case"TemplateLiteral":return gQ(Z,X,W);case"This":return fQ(Z,X,W);case"Tuple":return TQ(Z,X,W);case"Undefined":return dQ(Z,X,W);case"Union":return yQ(Z,X,W);case"Uint8Array":return vQ(Z,X,W);case"Unknown":return pQ(Z,X,W);case"Void":return iQ(Z,X,W);default:if(!L0.TypeRegistry.Has(Z[L0.Kind]))throw new d6(Z);return mQ(Z,X,W)}},uQ=function(...$){return $.length===3?C0($[0],$[1],$[2]):C0($[0],[],$[1])};Object.defineProperty(bY,"__esModule",{value:!0});bY.Check=bY.ValueCheckUnknownTypeError=void 0;var B0=E0(),Q$=x$(),IY=D1(),NQ=W$(),L0=x0();class d6 extends L0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}bY.ValueCheckUnknownTypeError=d6;bY.Check=uQ});var h6=Q0((VY)=>{var oQ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else return{}},cQ=function($,Y){if($.uniqueItems===!0&&!(0,s.HasPropertyKey)($,"default"))throw new Error("ValueCreate.Array: Array with the uniqueItems constraint requires a default value");else if(("contains"in $)&&!(0,s.HasPropertyKey)($,"default"))throw new Error("ValueCreate.Array: Array with the contains constraint requires a default value");else if("default"in $)return $.default;else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((W)=>{return f0($.items,Y)});else return[]},lQ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else return async function*(){}()},tQ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else return BigInt(0)},sQ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else return!1},rQ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else{const W=f0($.returns,Y);if(typeof W==="object"&&!Array.isArray(W))return class{constructor(){for(let[X,Z]of Object.entries(W)){const Q=this;Q[X]=Z}}};else return class{}}},aQ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date(0)},eQ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else return()=>f0($.returns,Y)},$J=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else if($.minimum!==void 0)return $.minimum;else return 0},YJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else{const W=$.allOf.reduce((X,Z)=>{const Q=f0(Z,Y);return typeof Q==="object"?{...X,...Q}:Q},{});if(!(0,nQ.Check)($,Y,W))throw new i6($);return W}},WJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else return function*(){}()},XJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else return $.const},ZJ=function($,Y){throw new v6($)},QJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else throw new p6($)},JJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else return null},zJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else if($.minimum!==void 0)return $.minimum;else return 0},HJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else{const W=new Set($.required);return $.default||Object.entries($.properties).reduce((X,[Z,Q])=>{return W.has(Z)?{...X,[Z]:f0(Q,Y)}:{...X}},{})}},qJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else return Promise.resolve(f0($.item,Y))},NJ=function($,Y){const[W,X]=Object.entries($.patternProperties)[0];if((0,s.HasPropertyKey)($,"default"))return $.default;else if(!(W===V0.PatternStringExact||W===V0.PatternNumberExact))return W.slice(1,W.length-1).split("|").reduce((Q,J)=>{return{...Q,[J]:f0(X,Y)}},{});else return{}},MJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else return f0((0,_Y.Deref)($,Y),Y)},UJ=function($,Y){if($.pattern!==void 0)if(!(0,s.HasPropertyKey)($,"default"))throw new Error("ValueCreate.String: String types with patterns must specify a default value");else return $.default;else if($.format!==void 0)if(!(0,s.HasPropertyKey)($,"default"))throw new Error("ValueCreate.String: String types with formats must specify a default value");else return $.default;else if((0,s.HasPropertyKey)($,"default"))return $.default;else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>".").join("");else return""},AJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else if("value"in $)return Symbol.for($.value);else return Symbol()},BJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;const W=V0.TemplateLiteralParser.ParseExact($.pattern);if(!V0.TemplateLiteralFinite.Check(W))throw new m6($);return V0.TemplateLiteralGenerator.Generate(W).next().value},FJ=function($,Y){if(EY++>RY)throw new u6($,RY);if((0,s.HasPropertyKey)($,"default"))return $.default;else return f0((0,_Y.Deref)($,Y),Y)},DJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((W,X)=>f0($.items[X],Y))},wJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else return},jJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else if($.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return f0($.anyOf[0],Y)},KJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)},PJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else return{}},OJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else return},SJ=function($,Y){if((0,s.HasPropertyKey)($,"default"))return $.default;else throw new Error("User defined types must specify a default value")},f0=function($,Y){const W=(0,s.IsString)($.$id)?[...Y,$]:Y,X=$;switch(X[V0.Kind]){case"Any":return oQ(X,W);case"Array":return cQ(X,W);case"AsyncIterator":return lQ(X,W);case"BigInt":return tQ(X,W);case"Boolean":return sQ(X,W);case"Constructor":return rQ(X,W);case"Date":return aQ(X,W);case"Function":return eQ(X,W);case"Integer":return $J(X,W);case"Intersect":return YJ(X,W);case"Iterator":return WJ(X,W);case"Literal":return XJ(X,W);case"Never":return ZJ(X,W);case"Not":return QJ(X,W);case"Null":return JJ(X,W);case"Number":return zJ(X,W);case"Object":return HJ(X,W);case"Promise":return qJ(X,W);case"Record":return NJ(X,W);case"Ref":return MJ(X,W);case"String":return UJ(X,W);case"Symbol":return AJ(X,W);case"TemplateLiteral":return BJ(X,W);case"This":return FJ(X,W);case"Tuple":return DJ(X,W);case"Undefined":return wJ(X,W);case"Union":return jJ(X,W);case"Uint8Array":return KJ(X,W);case"Unknown":return PJ(X,W);case"Void":return OJ(X,W);default:if(!V0.TypeRegistry.Has(X[V0.Kind]))throw new y6(X);return SJ(X,W)}},LJ=function(...$){return EY=0,$.length===2?f0($[0],$[1]):f0($[0],[])};Object.defineProperty(VY,"__esModule",{value:!0});VY.Create=VY.ValueCreateRecursiveInstantiationError=VY.ValueCreateTempateLiteralTypeError=VY.ValueCreateIntersectTypeError=VY.ValueCreateNotTypeError=VY.ValueCreateNeverTypeError=VY.ValueCreateUnknownTypeError=void 0;var s=E0(),nQ=J$(),_Y=D1(),V0=x0();class y6 extends V0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}VY.ValueCreateUnknownTypeError=y6;class v6 extends V0.TypeBoxError{constructor($){super("Never types cannot be created");this.schema=$}}VY.ValueCreateNeverTypeError=v6;class p6 extends V0.TypeBoxError{constructor($){super("Not types must have a default value");this.schema=$}}VY.ValueCreateNotTypeError=p6;class i6 extends V0.TypeBoxError{constructor($){super("Intersect produced invalid value. Consider using a default value.");this.schema=$}}VY.ValueCreateIntersectTypeError=i6;class m6 extends V0.TypeBoxError{constructor($){super("Can only create template literal values from patterns that produce finite sequences. Consider using a default value.");this.schema=$}}VY.ValueCreateTempateLiteralTypeError=m6;class u6 extends V0.TypeBoxError{constructor($,Y){super("Value cannot be created as recursive type may produce value of infinite size. Consider using a default.");this.schema=$,this.recursiveMaxDepth=Y}}VY.ValueCreateRecursiveInstantiationError=u6;var RY=512,EY=0;VY.Create=LJ});var vY=Q0((dY)=>{var fY=function($,Y,W){return(0,v0.Check)($,Y,W)?(0,u1.Clone)(W):(0,N1.Create)($,Y)},o6=function($,Y,W){return(0,v0.Check)($,Y,W)?W:(0,N1.Create)($,Y)},EJ=function($,Y,W){if((0,v0.Check)($,Y,W))return(0,u1.Clone)(W);const X=(0,w1.IsArray)(W)?(0,u1.Clone)(W):(0,N1.Create)($,Y),Z=(0,w1.IsNumber)($.minItems)&&X.length<$.minItems?[...X,...Array.from({length:$.minItems-X.length},()=>null)]:X,J=((0,w1.IsNumber)($.maxItems)&&Z.length>$.maxItems?Z.slice(0,$.maxItems):Z).map((A)=>$1($.items,Y,A));if($.uniqueItems!==!0)return J;const z=[...new Set(J)];if(!(0,v0.Check)($,Y,z))throw new c6($,z);return z},VJ=function($,Y,W){if((0,v0.Check)($,Y,W))return(0,N1.Create)($,Y);const X=new Set($.returns.required||[]),Z=function(){};for(let[Q,J]of Object.entries($.returns.properties)){if(!X.has(Q)&&W.prototype[Q]===void 0)continue;Z.prototype[Q]=$1(J,Y,W.prototype[Q])}return Z},xJ=function($,Y,W){const X=(0,N1.Create)($,Y),Z=(0,w1.IsPlainObject)(X)&&(0,w1.IsPlainObject)(W)?{...X,...W}:W;return(0,v0.Check)($,Y,Z)?Z:(0,N1.Create)($,Y)},kJ=function($,Y,W){throw new l6($)},gJ=function($,Y,W){if((0,v0.Check)($,Y,W))return W;if(W===null||typeof W!=="object")return(0,N1.Create)($,Y);const X=new Set($.required||[]),Z={};for(let[Q,J]of Object.entries($.properties)){if(!X.has(Q)&&W[Q]===void 0)continue;Z[Q]=$1(J,Y,W[Q])}if(typeof $.additionalProperties==="object"){const Q=Object.getOwnPropertyNames($.properties);for(let J of Object.getOwnPropertyNames(W)){if(Q.includes(J))continue;Z[J]=$1($.additionalProperties,Y,W[J])}}return Z},fJ=function($,Y,W){if((0,v0.Check)($,Y,W))return(0,u1.Clone)(W);if(W===null||typeof W!=="object"||Array.isArray(W)||W instanceof Date)return(0,N1.Create)($,Y);const X=Object.getOwnPropertyNames($.patternProperties)[0],Z=$.patternProperties[X],Q={};for(let[J,z]of Object.entries(W))Q[J]=$1(Z,Y,z);return Q},TJ=function($,Y,W){return $1((0,kY.Deref)($,Y),Y,W)},dJ=function($,Y,W){return $1((0,kY.Deref)($,Y),Y,W)},yJ=function($,Y,W){if((0,v0.Check)($,Y,W))return(0,u1.Clone)(W);if(!(0,w1.IsArray)(W))return(0,N1.Create)($,Y);if($.items===void 0)return[];return $.items.map((X,Z)=>$1(X,Y,W[Z]))},vJ=function($,Y,W){return(0,v0.Check)($,Y,W)?(0,u1.Clone)(W):n6.Create($,Y,W)},$1=function($,Y,W){const X=(0,w1.IsString)($.$id)?[...Y,$]:Y,Z=$;switch($[q1.Kind]){case"Array":return EJ(Z,X,W);case"Constructor":return VJ(Z,X,W);case"Intersect":return xJ(Z,X,W);case"Never":return kJ(Z,X,W);case"Object":return gJ(Z,X,W);case"Record":return fJ(Z,X,W);case"Ref":return TJ(Z,X,W);case"This":return dJ(Z,X,W);case"Tuple":return yJ(Z,X,W);case"Union":return vJ(Z,X,W);case"Date":case"Symbol":case"Uint8Array":return fY($,Y,W);case"Any":case"AsyncIterator":case"BigInt":case"Boolean":case"Function":case"Integer":case"Iterator":case"Literal":case"Not":case"Null":case"Number":case"Promise":case"String":case"TemplateLiteral":case"Undefined":case"Unknown":case"Void":return o6(Z,X,W);default:if(!q1.TypeRegistry.Has(Z[q1.Kind]))throw new t6(Z);return o6(Z,X,W)}},TY=function(...$){return $.length===3?$1($[0],$[1],$[2]):$1($[0],[],$[1])};Object.defineProperty(dY,"__esModule",{value:!0});dY.Cast=dY.Default=dY.DefaultClone=dY.ValueCastUnknownTypeError=dY.ValueCastRecursiveTypeError=dY.ValueCastNeverTypeError=dY.ValueCastArrayUniqueItemsTypeError=void 0;var w1=E0(),N1=h6(),v0=J$(),u1=i1(),kY=D1(),q1=x0();class c6 extends q1.TypeBoxError{constructor($,Y){super("Array cast produced invalid data due to uniqueItems constraint");this.schema=$,this.value=Y}}dY.ValueCastArrayUniqueItemsTypeError=c6;class l6 extends q1.TypeBoxError{constructor($){super("Never types cannot be cast");this.schema=$}}dY.ValueCastNeverTypeError=l6;class gY extends q1.TypeBoxError{constructor($){super("Cannot cast recursive schemas");this.schema=$}}dY.ValueCastRecursiveTypeError=gY;class t6 extends q1.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}dY.ValueCastUnknownTypeError=t6;var n6;(function($){function Y(Z,Q,J){if(Z[q1.Kind]==="Object"&&typeof J==="object"&&!(0,w1.IsNull)(J)){const z=Z,A=Object.getOwnPropertyNames(J),D=Object.entries(z.properties),[F,S]=[1/D.length,D.length];return D.reduce((b,[j,M])=>{const P=M[q1.Kind]==="Literal"&&M.const===J[j]?S:0,O=(0,v0.Check)(M,Q,J[j])?F:0,U=A.includes(j)?F:0;return b+(P+O+U)},0)}else return(0,v0.Check)(Z,Q,J)?1:0}function W(Z,Q,J){let[z,A]=[Z.anyOf[0],0];for(let D of Z.anyOf){const F=Y(D,Q,J);if(F>A)z=D,A=F}return z}function X(Z,Q,J){if("default"in Z)return Z.default;else{const z=W(Z,Q,J);return TY(z,Q,J)}}$.Create=X})(n6||(n6={}));dY.DefaultClone=fY;dY.Default=o6;dY.Cast=TY});var oY=Q0((hY)=>{var k$=function($){return(0,W0.IsString)($)&&!isNaN($)&&!isNaN(parseFloat($))},lJ=function($){return(0,W0.IsBigInt)($)||(0,W0.IsBoolean)($)||(0,W0.IsNumber)($)},z$=function($){return $===!0||(0,W0.IsNumber)($)&&$===1||(0,W0.IsBigInt)($)&&$===BigInt("1")||(0,W0.IsString)($)&&($.toLowerCase()==="true"||$==="1")},H$=function($){return $===!1||(0,W0.IsNumber)($)&&($===0||Object.is($,-0))||(0,W0.IsBigInt)($)&&$===BigInt("0")||(0,W0.IsString)($)&&($.toLowerCase()==="false"||$==="0"||$==="-0")},tJ=function($){return(0,W0.IsString)($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)},sJ=function($){return(0,W0.IsString)($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)},rJ=function($){return(0,W0.IsString)($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)},aJ=function($){return(0,W0.IsString)($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)},eJ=function($){return(0,W0.IsString)($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)},$9=function($,Y){const W=mY($);return W===Y?W:$},Y9=function($,Y){const W=uY($);return W===Y?W:$},W9=function($,Y){const W=iY($);return W===Y?W:$},X9=function($,Y){if(typeof $.const==="string")return $9(Y,$.const);else if(typeof $.const==="number")return Y9(Y,$.const);else if(typeof $.const==="boolean")return W9(Y,$.const);else return(0,oJ.Clone)(Y)},iY=function($){return z$($)?!0:H$($)?!1:$},Z9=function($){return k$($)?BigInt(parseInt($)):(0,W0.IsNumber)($)?BigInt($|0):H$($)?BigInt(0):z$($)?BigInt(1):$},mY=function($){return lJ($)?$.toString():(0,W0.IsSymbol)($)&&$.description!==void 0?$.description.toString():$},uY=function($){return k$($)?parseFloat($):z$($)?1:H$($)?0:$},Q9=function($){return k$($)?parseInt($):(0,W0.IsNumber)($)?$|0:z$($)?1:H$($)?0:$},J9=function($){return(0,W0.IsString)($)&&$.toLowerCase()==="null"?null:$},z9=function($){return(0,W0.IsString)($)&&$==="undefined"?void 0:$},H9=function($){return(0,W0.IsDate)($)?$:(0,W0.IsNumber)($)?new Date($):z$($)?new Date(1):H$($)?new Date(0):k$($)?new Date(parseInt($)):sJ($)?new Date(`1970-01-01T${$}.000Z`):tJ($)?new Date(`1970-01-01T${$}`):aJ($)?new Date(`${$}.000Z`):rJ($)?new Date($):eJ($)?new Date(`${$}T00:00:00.000Z`):$},s6=function($){return $},q9=function($,Y,W){if((0,W0.IsArray)(W))return W.map((X)=>n0($.items,Y,X));return W},N9=function($,Y,W){return Z9(W)},M9=function($,Y,W){return iY(W)},U9=function($,Y,W){return H9(W)},A9=function($,Y,W){return Q9(W)},B9=function($,Y,W){return $.allOf.every((X)=>h1.TypeGuard.TObject(X))?n0(h1.Type.Composite($.allOf),Y,W):n0($.allOf[0],Y,W)},F9=function($,Y,W){return X9($,W)},D9=function($,Y,W){return J9(W)},w9=function($,Y,W){return uY(W)},j9=function($,Y,W){if((0,W0.IsObject)(W))return Object.getOwnPropertyNames($.properties).reduce((X,Z)=>{return W[Z]!==void 0?{...X,[Z]:n0($.properties[Z],Y,W[Z])}:{...X}},W);return W},K9=function($,Y,W){const X=Object.getOwnPropertyNames($.patternProperties)[0],Z=$.patternProperties[X],Q={};for(let[J,z]of Object.entries(W))Q[J]=n0(Z,Y,z);return Q},P9=function($,Y,W){return n0((0,pY.Deref)($,Y),Y,W)},O9=function($,Y,W){return mY(W)},S9=function($,Y,W){return(0,W0.IsString)(W)||(0,W0.IsNumber)(W)?Symbol(W):W},L9=function($,Y,W){return n0((0,pY.Deref)($,Y),Y,W)},C9=function($,Y,W){if((0,W0.IsArray)(W)&&!(0,W0.IsUndefined)($.items))return W.map((X,Z)=>{return Z<$.items.length?n0($.items[Z],Y,X):X});return W},I9=function($,Y,W){return z9(W)},b9=function($,Y,W){for(let X of $.anyOf){const Z=n0(X,Y,W);if((0,cJ.Check)(X,Y,Z))return Z}return W},n0=function($,Y,W){const X=(0,W0.IsString)($.$id)?[...Y,$]:Y,Z=$;switch($[h1.Kind]){case"Array":return q9(Z,X,W);case"BigInt":return N9(Z,X,W);case"Boolean":return M9(Z,X,W);case"Date":return U9(Z,X,W);case"Integer":return A9(Z,X,W);case"Intersect":return B9(Z,X,W);case"Literal":return F9(Z,X,W);case"Null":return D9(Z,X,W);case"Number":return w9(Z,X,W);case"Object":return j9(Z,X,W);case"Record":return K9(Z,X,W);case"Ref":return P9(Z,X,W);case"String":return O9(Z,X,W);case"Symbol":return S9(Z,X,W);case"This":return L9(Z,X,W);case"Tuple":return C9(Z,X,W);case"Undefined":return I9(Z,X,W);case"Union":return b9(Z,X,W);case"Any":case"AsyncIterator":case"Constructor":case"Function":case"Iterator":case"Never":case"Promise":case"TemplateLiteral":case"Uint8Array":case"Unknown":case"Void":return s6(W);default:if(!h1.TypeRegistry.Has(Z[h1.Kind]))throw new r6(Z);return s6(W)}},G9=function(...$){return $.length===3?n0($[0],$[1],$[2]):n0($[0],[],$[1])};Object.defineProperty(hY,"__esModule",{value:!0});hY.Convert=hY.Default=hY.ValueConvertUnknownTypeError=void 0;var W0=E0(),oJ=i1(),cJ=J$(),pY=D1(),h1=x0();class r6 extends h1.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}hY.ValueConvertUnknownTypeError=r6;hY.Default=s6;hY.Convert=G9});var $8=Q0((aY)=>{Object.defineProperty(aY,"__esModule",{value:!0});aY.EncodeTransform=aY.DecodeTransform=aY.HasTransform=aY.TransformEncodeError=aY.TransformDecodeError=aY.TransformEncodeCheckError=aY.TransformDecodeCheckError=aY.TransformUnknownTypeError=void 0;var o0=E0(),n1=D1(),n=x0();class q$ extends n.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}aY.TransformUnknownTypeError=q$;class sY extends n.TypeBoxError{constructor($,Y,W){super("Unable to decode due to invalid value");this.schema=$,this.value=Y,this.error=W}}aY.TransformDecodeCheckError=sY;class rY extends n.TypeBoxError{constructor($,Y,W){super("Unable to encode due to invalid value");this.schema=$,this.value=Y,this.error=W}}aY.TransformEncodeCheckError=rY;class a6 extends n.TypeBoxError{constructor($,Y,W){super(`${W instanceof Error?W.message:"Unknown error"}`);this.schema=$,this.value=Y}}aY.TransformDecodeError=a6;class e6 extends n.TypeBoxError{constructor($,Y,W){super(`${W instanceof Error?W.message:"Unknown error"}`);this.schema=$,this.value=Y}}aY.TransformEncodeError=e6;var cY;(function($){function Y(w,I){return n.TypeGuard.TTransform(w)||P(w.items,I)}function W(w,I){return n.TypeGuard.TTransform(w)||P(w.items,I)}function X(w,I){return n.TypeGuard.TTransform(w)||P(w.returns,I)||w.parameters.some((R)=>P(R,I))}function Z(w,I){return n.TypeGuard.TTransform(w)||P(w.returns,I)||w.parameters.some((R)=>P(R,I))}function Q(w,I){return n.TypeGuard.TTransform(w)||n.TypeGuard.TTransform(w.unevaluatedProperties)||w.allOf.some((R)=>P(R,I))}function J(w,I){return n.TypeGuard.TTransform(w)||P(w.items,I)}function z(w,I){return n.TypeGuard.TTransform(w)||P(w.not,I)}function A(w,I){return n.TypeGuard.TTransform(w)||Object.values(w.properties).some((R)=>P(R,I))||n.TypeGuard.TSchema(w.additionalProperties)&&P(w.additionalProperties,I)}function D(w,I){return n.TypeGuard.TTransform(w)||P(w.item,I)}function F(w,I){const R=Object.getOwnPropertyNames(w.patternProperties)[0],k=w.patternProperties[R];return n.TypeGuard.TTransform(w)||P(k,I)||n.TypeGuard.TSchema(w.additionalProperties)&&n.TypeGuard.TTransform(w.additionalProperties)}function S(w,I){if(n.TypeGuard.TTransform(w))return!0;return P((0,n1.Deref)(w,I),I)}function b(w,I){if(n.TypeGuard.TTransform(w))return!0;return P((0,n1.Deref)(w,I),I)}function j(w,I){return n.TypeGuard.TTransform(w)||n.TypeGuard.TSchema(w.items)&&w.items.some((R)=>P(R,I))}function M(w,I){return n.TypeGuard.TTransform(w)||w.anyOf.some((R)=>P(R,I))}function P(w,I){const R=(0,o0.IsString)(w.$id)?[...I,w]:I,k=w;if(w.$id&&O.has(w.$id))return!1;if(w.$id)O.add(w.$id);switch(w[n.Kind]){case"Array":return Y(k,R);case"AsyncIterator":return W(k,R);case"Constructor":return X(k,R);case"Function":return Z(k,R);case"Intersect":return Q(k,R);case"Iterator":return J(k,R);case"Not":return z(k,R);case"Object":return A(k,R);case"Promise":return D(k,R);case"Record":return F(k,R);case"Ref":return S(k,R);case"This":return b(k,R);case"Tuple":return j(k,R);case"Union":return M(k,R);case"Any":case"BigInt":case"Boolean":case"Date":case"Integer":case"Literal":case"Never":case"Null":case"Number":case"String":case"Symbol":case"TemplateLiteral":case"Undefined":case"Uint8Array":case"Unknown":case"Void":return n.TypeGuard.TTransform(w);default:if(!n.TypeRegistry.Has(k[n.Kind]))throw new q$(k);return n.TypeGuard.TTransform(w)}}const O=new Set;function U(w,I){return O.clear(),P(w,I)}$.Has=U})(cY||(aY.HasTransform=cY={}));var lY;(function($){function Y(M,P){try{return n.TypeGuard.TTransform(M)?M[n.Transform].Decode(P):P}catch(O){throw new a6(M,P,O)}}function W(M,P,O){const U=O.map((w)=>S(M.items,P,w));return Y(M,U)}function X(M,P,O){if(!(0,o0.IsPlainObject)(O)||(0,o0.IsValueType)(O))return Y(M,O);const U=n.KeyResolver.ResolveKeys(M,{includePatterns:!1}),w=Object.entries(O).reduce((R,[k,_])=>{return!U.includes(k)?{...R,[k]:_}:{...R,[k]:Y(n.IndexedAccessor.Resolve(M,[k]),_)}},{});if(!n.TypeGuard.TTransform(M.unevaluatedProperties))return Y(M,w);const I=Object.entries(w).reduce((R,[k,_])=>{return U.includes(k)?{...R,[k]:_}:{...R,[k]:Y(M.unevaluatedProperties,_)}},{});return Y(M,I)}function Z(M,P,O){const U=S(M.not,P,O);return Y(M,U)}function Q(M,P,O){if(!(0,o0.IsPlainObject)(O))return Y(M,O);const U=Object.entries(O).reduce((R,[k,_])=>{return!(k in M.properties)?{...R,[k]:_}:{...R,[k]:S(M.properties[k],P,_)}},{});if(!n.TypeGuard.TSchema(M.additionalProperties))return Y(M,U);const w=M.additionalProperties,I=Object.entries(U).reduce((R,[k,_])=>{return k in M.properties?{...R,[k]:_}:{...R,[k]:S(w,P,_)}},{});return Y(M,I)}function J(M,P,O){if(!(0,o0.IsPlainObject)(O))return Y(M,O);const U=Object.getOwnPropertyNames(M.patternProperties)[0],w=M.patternProperties[U],I=new RegExp(U),R=Object.entries(O).reduce((X0,[e,N0])=>{return!I.test(e)?{...X0,[e]:N0}:{...X0,[e]:S(w,P,N0)}},{});if(!n.TypeGuard.TSchema(M.additionalProperties))return Y(M,R);const k=M.additionalProperties,_=Object.entries(R).reduce((X0,[e,N0])=>{return I.test(e)?{...X0,[e]:N0}:{...X0,[e]:S(k,P,N0)}},{});return Y(M,_)}function z(M,P,O){const U=(0,n1.Deref)(M,P),w=S(U,P,O);return Y(M,w)}function A(M,P,O){const U=(0,n1.Deref)(M,P),w=S(U,P,O);return Y(M,w)}function D(M,P,O){const U=(0,o0.IsArray)(M.items)?M.items.map((w,I)=>S(w,P,O[I])):[];return Y(M,U)}function F(M,P,O){const U=Y(M,O);for(let w of M.anyOf){if(!b(w,P,U))continue;return S(w,P,U)}return U}function S(M,P,O){const U=typeof M.$id==="string"?[...P,M]:P,w=M;switch(M[n.Kind]){case"Array":return W(w,U,O);case"Intersect":return X(w,U,O);case"Not":return Z(w,U,O);case"Object":return Q(w,U,O);case"Record":return J(w,U,O);case"Ref":return z(w,U,O);case"Symbol":return Y(w,O);case"This":return A(w,U,O);case"Tuple":return D(w,U,O);case"Union":return F(w,U,O);case"Any":case"AsyncIterator":case"BigInt":case"Boolean":case"Constructor":case"Date":case"Function":case"Integer":case"Iterator":case"Literal":case"Never":case"Null":case"Number":case"Promise":case"String":case"TemplateLiteral":case"Undefined":case"Uint8Array":case"Unknown":case"Void":return Y(w,O);default:if(!n.TypeRegistry.Has(w[n.Kind]))throw new q$(w);return Y(w,O)}}let b=()=>!1;function j(M,P,O,U){return b=U,S(M,P,O)}$.Decode=j})(lY||(aY.DecodeTransform=lY={}));var tY;(function($){function Y(M,P){try{return n.TypeGuard.TTransform(M)?M[n.Transform].Encode(P):P}catch(O){throw new e6(M,P,O)}}function W(M,P,O){return Y(M,O).map((w)=>S(M.items,P,w))}function X(M,P,O){const U=Y(M,O);if(!(0,o0.IsPlainObject)(O)||(0,o0.IsValueType)(O))return U;const w=n.KeyResolver.ResolveKeys(M,{includePatterns:!1}),I=Object.entries(U).reduce((R,[k,_])=>{return!w.includes(k)?{...R,[k]:_}:{...R,[k]:Y(n.IndexedAccessor.Resolve(M,[k]),_)}},{});if(!n.TypeGuard.TTransform(M.unevaluatedProperties))return Y(M,I);return Object.entries(I).reduce((R,[k,_])=>{return w.includes(k)?{...R,[k]:_}:{...R,[k]:Y(M.unevaluatedProperties,_)}},{})}function Z(M,P,O){const U=Y(M,O);return Y(M.not,U)}function Q(M,P,O){const U=Y(M,O);if(!(0,o0.IsPlainObject)(O))return U;const w=Object.entries(U).reduce((R,[k,_])=>{return!(k in M.properties)?{...R,[k]:_}:{...R,[k]:S(M.properties[k],P,_)}},{});if(!n.TypeGuard.TSchema(M.additionalProperties))return w;const I=M.additionalProperties;return Object.entries(w).reduce((R,[k,_])=>{return k in M.properties?{...R,[k]:_}:{...R,[k]:S(I,P,_)}},{})}function J(M,P,O){const U=Y(M,O);if(!(0,o0.IsPlainObject)(O))return U;const w=Object.getOwnPropertyNames(M.patternProperties)[0],I=M.patternProperties[w],R=new RegExp(w),k=Object.entries(U).reduce((X0,[e,N0])=>{return!R.test(e)?{...X0,[e]:N0}:{...X0,[e]:S(I,P,N0)}},{});if(!n.TypeGuard.TSchema(M.additionalProperties))return Y(M,k);const _=M.additionalProperties;return Object.entries(k).reduce((X0,[e,N0])=>{return R.test(e)?{...X0,[e]:N0}:{...X0,[e]:S(_,P,N0)}},{})}function z(M,P,O){const U=(0,n1.Deref)(M,P),w=S(U,P,O);return Y(M,w)}function A(M,P,O){const U=(0,n1.Deref)(M,P),w=S(U,P,O);return Y(M,w)}function D(M,P,O){const U=Y(M,O);return(0,o0.IsArray)(M.items)?M.items.map((w,I)=>S(w,P,U[I])):[]}function F(M,P,O){for(let U of M.anyOf){if(!b(U,P,O))continue;const w=S(U,P,O);return Y(M,w)}return Y(M,O)}function S(M,P,O){const U=typeof M.$id==="string"?[...P,M]:P,w=M;switch(M[n.Kind]){case"Array":return W(w,U,O);case"Intersect":return X(w,U,O);case"Not":return Z(w,U,O);case"Object":return Q(w,U,O);case"Record":return J(w,U,O);case"Ref":return z(w,U,O);case"This":return A(w,U,O);case"Tuple":return D(w,U,O);case"Union":return F(w,U,O);case"Any":case"AsyncIterator":case"BigInt":case"Boolean":case"Constructor":case"Date":case"Function":case"Integer":case"Iterator":case"Literal":case"Never":case"Null":case"Number":case"Promise":case"String":case"Symbol":case"TemplateLiteral":case"Undefined":case"Uint8Array":case"Unknown":case"Void":return Y(w,O);default:if(!n.TypeRegistry.Has(w[n.Kind]))throw new q$(w);return Y(w,O)}}let b=()=>!1;function j(M,P,O,U){return b=U,S(M,P,O)}$.Encode=j})(tY||(aY.EncodeTransform=tY={}))});var HW=Q0((JW)=>{Object.defineProperty(JW,"__esModule",{value:!0});JW.Value=void 0;var $W=G$(),d9=OY(),y9=W$(),v9=CY(),YW=vY(),p9=i1(),WW=oY(),XW=h6(),g$=J$(),ZW=x6(),f$=$8(),QW;(function($){function Y(...M){return YW.Cast.apply(YW,M)}$.Cast=Y;function W(...M){return XW.Create.apply(XW,M)}$.Create=W;function X(...M){return g$.Check.apply(g$,M)}$.Check=X;function Z(...M){return WW.Convert.apply(WW,M)}$.Convert=Z;function Q(M){return p9.Clone(M)}$.Clone=Q;function J(...M){const[P,O,U]=M.length===3?[M[0],M[1],M[2]]:[M[0],[],M[1]];if(!X(P,O,U))throw new f$.TransformDecodeCheckError(P,U,A(P,O,U).First());return f$.DecodeTransform.Decode(P,O,U,g$.Check)}$.Decode=J;function z(...M){const[P,O,U]=M.length===3?[M[0],M[1],M[2]]:[M[0],[],M[1]],w=f$.EncodeTransform.Encode(P,O,U,g$.Check);if(!X(P,O,w))throw new f$.TransformEncodeCheckError(P,U,A(P,O,U).First());return w}$.Encode=z;function A(...M){return $W.Errors.apply($W,M)}$.Errors=A;function D(M,P){return v9.Equal(M,P)}$.Equal=D;function F(M,P){return ZW.Diff(M,P)}$.Diff=F;function S(M){return y9.Hash(M)}$.Hash=S;function b(M,P){return ZW.Patch(M,P)}$.Patch=b;function j(M,P){d9.Mutate(M,P)}$.Mutate=j})(QW||(JW.Value=QW={}))});var Y8=Q0((Y1)=>{Object.defineProperty(Y1,"__esModule",{value:!0});Y1.Value=Y1.ValuePointer=Y1.Delete=Y1.Update=Y1.Insert=Y1.Edit=Y1.ValueErrorIterator=Y1.ValueErrorType=void 0;var qW=G$();Object.defineProperty(Y1,"ValueErrorType",{enumerable:!0,get:function(){return qW.ValueErrorType}});Object.defineProperty(Y1,"ValueErrorIterator",{enumerable:!0,get:function(){return qW.ValueErrorIterator}});var T$=x6();Object.defineProperty(Y1,"Edit",{enumerable:!0,get:function(){return T$.Edit}});Object.defineProperty(Y1,"Insert",{enumerable:!0,get:function(){return T$.Insert}});Object.defineProperty(Y1,"Update",{enumerable:!0,get:function(){return T$.Update}});Object.defineProperty(Y1,"Delete",{enumerable:!0,get:function(){return T$.Delete}});var i9=R$();Object.defineProperty(Y1,"ValuePointer",{enumerable:!0,get:function(){return i9.ValuePointer}});var m9=HW();Object.defineProperty(Y1,"Value",{enumerable:!0,get:function(){return m9.Value}})});var FW=Q0((AW)=>{Object.defineProperty(AW,"__esModule",{value:!0});AW.TypeCompiler=AW.Policy=AW.TypeCompilerTypeGuardError=AW.TypeCompilerUnknownTypeError=AW.TypeCheck=void 0;var U$=$8(),o=E0(),r9=Y$(),A$=x$(),a9=D1(),e9=W$(),U0=x0();class J8{constructor($,Y,W,X){this.schema=$,this.references=Y,this.checkFunc=W,this.code=X,this.hasTransform=U$.HasTransform.Has($,Y)}Code(){return this.code}Errors($){return(0,r9.Errors)(this.schema,this.references,$)}Check($){return this.checkFunc($)}Decode($){if(!this.checkFunc($))throw new U$.TransformDecodeCheckError(this.schema,$,this.Errors($).First());return this.hasTransform?U$.DecodeTransform.Decode(this.schema,this.references,$,(Y,W,X)=>this.Check(X)):$}Encode($){const Y=this.hasTransform?U$.EncodeTransform.Encode(this.schema,this.references,$,(W,X,Z)=>this.Check(Z)):$;if(!this.checkFunc(Y))throw new U$.TransformEncodeCheckError(this.schema,$,this.Errors($).First());return Y}}AW.TypeCheck=J8;var M1;(function($){function Y(Q){return Q===36}$.DollarSign=Y;function W(Q){return Q===95}$.IsUnderscore=W;function X(Q){return Q>=65&&Q<=90||Q>=97&&Q<=122}$.IsAlpha=X;function Z(Q){return Q>=48&&Q<=57}$.IsNumeric=Z})(M1||(M1={}));var i$;(function($){function Y(Q){if(Q.length===0)return!1;return M1.IsNumeric(Q.charCodeAt(0))}function W(Q){if(Y(Q))return!1;for(let J=0;J<Q.length;J++){const z=Q.charCodeAt(J);if(!(M1.IsAlpha(z)||M1.IsNumeric(z)||M1.DollarSign(z)||M1.IsUnderscore(z)))return!1}return!0}function X(Q){return Q.replace(/'/g,"\\'")}function Z(Q,J){return W(J)?`${Q}.${J}`:`${Q}['${X(J)}']`}$.Encode=Z})(i$||(i$={}));var Z8;(function($){function Y(W){const X=[];for(let Z=0;Z<W.length;Z++){const Q=W.charCodeAt(Z);if(M1.IsNumeric(Q)||M1.IsAlpha(Q))X.push(W.charAt(Z));else X.push(`_${Q}_`)}return X.join("").replace(/__/g,"_")}$.Encode=Y})(Z8||(Z8={}));var Q8;(function($){function Y(W){return W.replace(/'/g,"\\'")}$.Escape=Y})(Q8||(Q8={}));class z8 extends U0.TypeBoxError{constructor($){super("Unknown type");this.schema=$}}AW.TypeCompilerUnknownTypeError=z8;class m$ extends U0.TypeBoxError{constructor($){super("Preflight validation check failed to guard for the given schema");this.schema=$}}AW.TypeCompilerTypeGuardError=m$;var C1;(function($){function Y(J,z,A){return A$.TypeSystemPolicy.ExactOptionalPropertyTypes?`('${z}' in ${J} ? ${A} : true)`:`(${i$.Encode(J,z)} !== undefined ? ${A} : true)`}$.IsExactOptionalProperty=Y;function W(J){return!A$.TypeSystemPolicy.AllowArrayObject?`(typeof ${J} === 'object' && ${J} !== null && !Array.isArray(${J}))`:`(typeof ${J} === 'object' && ${J} !== null)`}$.IsObjectLike=W;function X(J){return!A$.TypeSystemPolicy.AllowArrayObject?`(typeof ${J} === 'object' && ${J} !== null && !Array.isArray(${J}) && !(${J} instanceof Date) && !(${J} instanceof Uint8Array))`:`(typeof ${J} === 'object' && ${J} !== null && !(${J} instanceof Date) && !(${J} instanceof Uint8Array))`}$.IsRecordLike=X;function Z(J){return!A$.TypeSystemPolicy.AllowNaN?`(typeof ${J} === 'number' && Number.isFinite(${J}))`:`typeof ${J} === 'number'`}$.IsNumberLike=Z;function Q(J){return A$.TypeSystemPolicy.AllowNullVoid?`(${J} === undefined || ${J} === null)`:`${J} === undefined`}$.IsVoidLike=Q})(C1||(AW.Policy=C1={}));var UW;(function($){function Y(K){return K[U0.Kind]==="Any"||K[U0.Kind]==="Unknown"}function*W(K,E,L){yield"true"}function*X(K,E,L){yield`Array.isArray(${L})`;const[p,T]=[F0("value","any"),F0("acc","number")];if((0,o.IsNumber)(K.maxItems))yield`${L}.length <= ${K.maxItems}`;if((0,o.IsNumber)(K.minItems))yield`${L}.length >= ${K.minItems}`;const d=f(K.items,E,"value");if(yield`${L}.every((${p}) => ${d})`,U0.TypeGuard.TSchema(K.contains)||(0,o.IsNumber)(K.minContains)||(0,o.IsNumber)(K.maxContains)){const $0=U0.TypeGuard.TSchema(K.contains)?K.contains:U0.Type.Never(),K0=f($0,E,"value"),Y0=(0,o.IsNumber)(K.minContains)?[`(count >= ${K.minContains})`]:[],N=(0,o.IsNumber)(K.maxContains)?[`(count <= ${K.maxContains})`]:[],c=`const count = value.reduce((${T}, ${p}) => ${K0} ? acc + 1 : acc, 0)`,O0=["(count > 0)",...Y0,...N].join(" && ");yield`((${p}) => { ${c}; return ${O0}})(${L})`}if(K.uniqueItems===!0)yield`((${p}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${L})`}function*Z(K,E,L){yield`(typeof value === 'object' && Symbol.asyncIterator in ${L})`}function*Q(K,E,L){if(yield`(typeof ${L} === 'bigint')`,(0,o.IsBigInt)(K.exclusiveMaximum))yield`${L} < BigInt(${K.exclusiveMaximum})`;if((0,o.IsBigInt)(K.exclusiveMinimum))yield`${L} > BigInt(${K.exclusiveMinimum})`;if((0,o.IsBigInt)(K.maximum))yield`${L} <= BigInt(${K.maximum})`;if((0,o.IsBigInt)(K.minimum))yield`${L} >= BigInt(${K.minimum})`;if((0,o.IsBigInt)(K.multipleOf))yield`(${L} % BigInt(${K.multipleOf})) === 0`}function*J(K,E,L){yield`(typeof ${L} === 'boolean')`}function*z(K,E,L){yield*T0(K.returns,E,`${L}.prototype`)}function*A(K,E,L){if(yield`(${L} instanceof Date) && Number.isFinite(${L}.getTime())`,(0,o.IsNumber)(K.exclusiveMaximumTimestamp))yield`${L}.getTime() < ${K.exclusiveMaximumTimestamp}`;if((0,o.IsNumber)(K.exclusiveMinimumTimestamp))yield`${L}.getTime() > ${K.exclusiveMinimumTimestamp}`;if((0,o.IsNumber)(K.maximumTimestamp))yield`${L}.getTime() <= ${K.maximumTimestamp}`;if((0,o.IsNumber)(K.minimumTimestamp))yield`${L}.getTime() >= ${K.minimumTimestamp}`;if((0,o.IsNumber)(K.multipleOfTimestamp))yield`(${L}.getTime() % ${K.multipleOfTimestamp}) === 0`}function*D(K,E,L){yield`(typeof ${L} === 'function')`}function*F(K,E,L){if(yield`(typeof ${L} === 'number' && Number.isInteger(${L}))`,(0,o.IsNumber)(K.exclusiveMaximum))yield`${L} < ${K.exclusiveMaximum}`;if((0,o.IsNumber)(K.exclusiveMinimum))yield`${L} > ${K.exclusiveMinimum}`;if((0,o.IsNumber)(K.maximum))yield`${L} <= ${K.maximum}`;if((0,o.IsNumber)(K.minimum))yield`${L} >= ${K.minimum}`;if((0,o.IsNumber)(K.multipleOf))yield`(${L} % ${K.multipleOf}) === 0`}function*S(K,E,L){const p=K.allOf.map((T)=>f(T,E,L)).join(" && ");if(K.unevaluatedProperties===!1){const T=h(`${new RegExp(U0.KeyResolver.ResolvePattern(K))};`),d=`Object.getOwnPropertyNames(${L}).every(key => ${T}.test(key))`;yield`(${p} && ${d})`}else if(U0.TypeGuard.TSchema(K.unevaluatedProperties)){const T=h(`${new RegExp(U0.KeyResolver.ResolvePattern(K))};`),d=`Object.getOwnPropertyNames(${L}).every(key => ${T}.test(key) || ${f(K.unevaluatedProperties,E,`${L}[key]`)})`;yield`(${p} && ${d})`}else yield`(${p})`}function*b(K,E,L){yield`(typeof value === 'object' && Symbol.iterator in ${L})`}function*j(K,E,L){if(typeof K.const==="number"||typeof K.const==="boolean")yield`(${L} === ${K.const})`;else yield`(${L} === '${Q8.Escape(K.const)}')`}function*M(K,E,L){yield"false"}function*P(K,E,L){yield`(!${f(K.not,E,L)})`}function*O(K,E,L){yield`(${L} === null)`}function*U(K,E,L){if(yield C1.IsNumberLike(L),(0,o.IsNumber)(K.exclusiveMaximum))yield`${L} < ${K.exclusiveMaximum}`;if((0,o.IsNumber)(K.exclusiveMinimum))yield`${L} > ${K.exclusiveMinimum}`;if((0,o.IsNumber)(K.maximum))yield`${L} <= ${K.maximum}`;if((0,o.IsNumber)(K.minimum))yield`${L} >= ${K.minimum}`;if((0,o.IsNumber)(K.multipleOf))yield`(${L} % ${K.multipleOf}) === 0`}function*w(K,E,L){if(yield C1.IsObjectLike(L),(0,o.IsNumber)(K.minProperties))yield`Object.getOwnPropertyNames(${L}).length >= ${K.minProperties}`;if((0,o.IsNumber)(K.maxProperties))yield`Object.getOwnPropertyNames(${L}).length <= ${K.maxProperties}`;const p=Object.getOwnPropertyNames(K.properties);for(let T of p){const d=i$.Encode(L,T),$0=K.properties[T];if(K.required&&K.required.includes(T)){if(yield*T0($0,E,d),U0.ExtendsUndefined.Check($0)||Y($0))yield`('${T}' in ${L})`}else{const K0=f($0,E,d);yield C1.IsExactOptionalProperty(L,T,K0)}}if(K.additionalProperties===!1)if(K.required&&K.required.length===p.length)yield`Object.getOwnPropertyNames(${L}).length === ${p.length}`;else{const T=`[${p.map((d)=>`'${d}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${L}).every(key => ${T}.includes(key))`}if(typeof K.additionalProperties==="object"){const T=f(K.additionalProperties,E,`${L}[key]`),d=`[${p.map(($0)=>`'${$0}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${L}).every(key => ${d}.includes(key) || ${T}))`}}function*I(K,E,L){yield`(typeof value === 'object' && typeof ${L}.then === 'function')`}function*R(K,E,L){if(yield C1.IsRecordLike(L),(0,o.IsNumber)(K.minProperties))yield`Object.getOwnPropertyNames(${L}).length >= ${K.minProperties}`;if((0,o.IsNumber)(K.maxProperties))yield`Object.getOwnPropertyNames(${L}).length <= ${K.maxProperties}`;const[p,T]=Object.entries(K.patternProperties)[0],d=h(`${new RegExp(p)}`),$0=f(T,E,"value"),K0=U0.TypeGuard.TSchema(K.additionalProperties)?f(K.additionalProperties,E,L):K.additionalProperties===!1?"false":"true",Y0=`(${d}.test(key) ? ${$0} : ${K0})`;yield`(Object.entries(${L}).every(([key, value]) => ${Y0}))`}function*k(K,E,L){const p=(0,a9.Deref)(K,E);if(G.functions.has(K.$ref))return yield`${i(K.$ref)}(${L})`;yield*T0(p,E,L)}function*_(K,E,L){if(yield`(typeof ${L} === 'string')`,(0,o.IsNumber)(K.maxLength))yield`${L}.length <= ${K.maxLength}`;if((0,o.IsNumber)(K.minLength))yield`${L}.length >= ${K.minLength}`;if(K.pattern!==void 0)yield`${h(`${new RegExp(K.pattern)};`)}.test(${L})`;if(K.format!==void 0)yield`format('${K.format}', ${L})`}function*X0(K,E,L){yield`(typeof ${L} === 'symbol')`}function*e(K,E,L){yield`(typeof ${L} === 'string')`,yield`${h(`${new RegExp(K.pattern)};`)}.test(${L})`}function*N0(K,E,L){yield`${i(K.$ref)}(${L})`}function*_1(K,E,L){if(yield`Array.isArray(${L})`,K.items===void 0)return yield`${L}.length === 0`;yield`(${L}.length === ${K.maxItems})`;for(let p=0;p<K.items.length;p++)yield`${f(K.items[p],E,`${L}[${p}]`)}`}function*p0(K,E,L){yield`${L} === undefined`}function*i0(K,E,L){yield`(${K.anyOf.map((T)=>f(T,E,L)).join(" || ")})`}function*H0(K,E,L){if(yield`${L} instanceof Uint8Array`,(0,o.IsNumber)(K.maxByteLength))yield`(${L}.length <= ${K.maxByteLength})`;if((0,o.IsNumber)(K.minByteLength))yield`(${L}.length >= ${K.minByteLength})`}function*J0(K,E,L){yield"true"}function*m0(K,E,L){yield C1.IsVoidLike(L)}function*r0(K,E,L){const p=G.instances.size;G.instances.set(p,K),yield`kind('${K[U0.Kind]}', ${p}, ${L})`}function*T0(K,E,L,p=!0){const T=(0,o.IsString)(K.$id)?[...E,K]:E,d=K;if(p&&(0,o.IsString)(K.$id)){const $0=i(K.$id);if(G.functions.has($0))return yield`${$0}(${L})`;else{const K0=z0($0,K,E,"value",!1);return G.functions.set($0,K0),yield`${$0}(${L})`}}switch(d[U0.Kind]){case"Any":return yield*W(d,T,L);case"Array":return yield*X(d,T,L);case"AsyncIterator":return yield*Z(d,T,L);case"BigInt":return yield*Q(d,T,L);case"Boolean":return yield*J(d,T,L);case"Constructor":return yield*z(d,T,L);case"Date":return yield*A(d,T,L);case"Function":return yield*D(d,T,L);case"Integer":return yield*F(d,T,L);case"Intersect":return yield*S(d,T,L);case"Iterator":return yield*b(d,T,L);case"Literal":return yield*j(d,T,L);case"Never":return yield*M(d,T,L);case"Not":return yield*P(d,T,L);case"Null":return yield*O(d,T,L);case"Number":return yield*U(d,T,L);case"Object":return yield*w(d,T,L);case"Promise":return yield*I(d,T,L);case"Record":return yield*R(d,T,L);case"Ref":return yield*k(d,T,L);case"String":return yield*_(d,T,L);case"Symbol":return yield*X0(d,T,L);case"TemplateLiteral":return yield*e(d,T,L);case"This":return yield*N0(d,T,L);case"Tuple":return yield*_1(d,T,L);case"Undefined":return yield*p0(d,T,L);case"Union":return yield*i0(d,T,L);case"Uint8Array":return yield*H0(d,T,L);case"Unknown":return yield*J0(d,T,L);case"Void":return yield*m0(d,T,L);default:if(!U0.TypeRegistry.Has(d[U0.Kind]))throw new z8(K);return yield*r0(d,T,L)}}const G={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function f(K,E,L,p=!0){return`(${[...T0(K,E,L,p)].join(" && ")})`}function i(K){return`check_${Z8.Encode(K)}`}function h(K){const E=`local_${G.variables.size}`;return G.variables.set(E,`const ${E} = ${K}`),E}function z0(K,E,L,p,T=!0){const[d,$0]=["\n",(c)=>"".padStart(c," ")],K0=F0("value","any"),Y0=D0("boolean"),N=[...T0(E,L,p,T)].map((c)=>`${$0(4)}${c}`).join(` &&${d}`);return`function ${K}(${K0})${Y0} {${d}${$0(2)}return (${d}${N}${d}${$0(2)})\n}`}function F0(K,E){const L=G.language==="typescript"?`: ${E}`:"";return`${K}${L}`}function D0(K){return G.language==="typescript"?`: ${K}`:""}function w0(K,E,L){const p=z0("check",K,E,"value"),T=F0("value","any"),d=D0("boolean"),$0=[...G.functions.values()],K0=[...G.variables.values()],Y0=(0,o.IsString)(K.$id)?`return function check(${T})${d} {\n  return ${i(K.$id)}(value)\n}`:`return ${p}`;return[...K0,...$0,Y0].join("\n")}function q0(...K){const E={language:"javascript"},[L,p,T]=K.length===2&&(0,o.IsArray)(K[1])?[K[0],K[1],E]:K.length===2&&!(0,o.IsArray)(K[1])?[K[0],[],K[1]]:K.length===3?[K[0],K[1],K[2]]:K.length===1?[K[0],[],E]:[null,[],E];if(G.language=T.language,G.variables.clear(),G.functions.clear(),G.instances.clear(),!U0.TypeGuard.TSchema(L))throw new m$(L);for(let d of p)if(!U0.TypeGuard.TSchema(d))throw new m$(d);return w0(L,p,T)}$.Code=q0;function B1(K,E=[]){const L=q0(K,E,{language:"javascript"}),p=globalThis.Function("kind","format","hash",L),T=new Map(G.instances);function d(N,c,O0){if(!U0.TypeRegistry.Has(N)||!T.has(c))return!1;const t$=U0.TypeRegistry.Get(N),s$=T.get(c);return t$(s$,O0)}function $0(N,c){if(!U0.FormatRegistry.Has(N))return!1;return U0.FormatRegistry.Get(N)(c)}function K0(N){return(0,e9.Hash)(N)}const Y0=p(d,$0,K0);return new J8(K,E,Y0,L)}$.Compile=B1})(UW||(AW.TypeCompiler=UW={}))});var wW=Q0((c0)=>{var Z7=c0&&c0.__createBinding||(Object.create?function($,Y,W,X){if(X===void 0)X=W;var Z=Object.getOwnPropertyDescriptor(Y,W);if(!Z||("get"in Z?!Y.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return Y[W]}};Object.defineProperty($,X,Z)}:function($,Y,W,X){if(X===void 0)X=W;$[X]=Y[W]}),Q7=c0&&c0.__exportStar||function($,Y){for(var W in $)if(W!=="default"&&!Object.prototype.hasOwnProperty.call(Y,W))Z7(Y,$,W)};Object.defineProperty(c0,"__esModule",{value:!0});c0.ValueErrorIterator=c0.ValueErrorType=void 0;var DW=G$();Object.defineProperty(c0,"ValueErrorType",{enumerable:!0,get:function(){return DW.ValueErrorType}});Object.defineProperty(c0,"ValueErrorIterator",{enumerable:!0,get:function(){return DW.ValueErrorIterator}});Q7(FW(),c0)});var GW=Q0((wz,bW)=>{var H7=function($){var Y=$.indexOf("%");if(Y===-1)return $;var W=$.length,X="",Z=0,Q=0,J=Y,z=CW;while(Y>-1&&Y<W){var A=IW($[Y+1],4),D=IW($[Y+2],0),F=A|D,S=F8[F];if(z=F8[256+z+S],Q=Q<<6|F&F8[364+S],z===CW)X+=$.slice(Z,J),X+=Q<=65535?String.fromCharCode(Q):String.fromCharCode(55232+(Q>>10),56320+(Q&1023)),Q=0,Z=Y+3,Y=J=$.indexOf("%",Z);else if(z===z7)return null;else{if(Y+=3,Y<W&&$.charCodeAt(Y)===37)continue;return null}}return X+$.slice(Z)},IW=function($,Y){var W=q7[$];return W===void 0?255:W<<Y},CW=12,z7=0,F8=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7],q7={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};bW.exports=H7});var xW=Q0((jz,VW)=>{var N7=function($){const Y=new EW;if(typeof $!=="string")return Y;let W=$.length,X="",Z="",Q=-1,J=-1,z=!1,A=!1,D=!1,F=!1,S=!1,b=0;for(let j=0;j<W+1;j++)if(b=j!==W?$.charCodeAt(j):38,b===38){if(S=J>Q,!S)J=j;if(X=$.slice(Q+1,J),S||X.length>0){if(D)X=X.replace(_W," ");if(z)X=RW(X)||X;if(S){if(Z=$.slice(J+1,j),F)Z=Z.replace(_W," ");if(A)Z=RW(Z)||Z}const M=Y[X];if(M===void 0)Y[X]=Z;else if(M.pop)M.push(Z);else Y[X]=[M,Z]}Z="",Q=j,J=j,z=!1,A=!1,D=!1,F=!1}else if(b===61)if(J<=Q)J=j;else A=!0;else if(b===43)if(J>Q)F=!0;else D=!0;else if(b===37)if(J>Q)A=!0;else z=!0;return Y},RW=GW(),_W=/\+/g,EW=function(){};EW.prototype=Object.create(null);VW.exports=N7});var gW=Q0((Kz,kW)=>{var U7=function($){const Y=$.length;if(Y===0)return"";let W="",X=0,Z=0;$:for(;Z<Y;Z++){let Q=$.charCodeAt(Z);while(Q<128){if(M7[Q]!==1){if(X<Z)W+=$.slice(X,Z);X=Z+1,W+=X1[Q]}if(++Z===Y)break $;Q=$.charCodeAt(Z)}if(X<Z)W+=$.slice(X,Z);if(Q<2048){X=Z+1,W+=X1[192|Q>>6]+X1[128|Q&63];continue}if(Q<55296||Q>=57344){X=Z+1,W+=X1[224|Q>>12]+X1[128|Q>>6&63]+X1[128|Q&63];continue}if(++Z,Z>=Y)throw new Error("URI malformed");const J=$.charCodeAt(Z)&1023;X=Z+1,Q=65536+((Q&1023)<<10|J),W+=X1[240|Q>>18]+X1[128|Q>>12&63]+X1[128|Q>>6&63]+X1[128|Q&63]}if(X===0)return $;if(X<Y)return W+$.slice(X);return W},X1=Array.from({length:256},($,Y)=>"%"+((Y<16?"0":"")+Y.toString(16)).toUpperCase()),M7=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);kW.exports={encodeString:U7}});var dW=Q0((Pz,TW)=>{var fW=function($){const Y=typeof $;if(Y==="string")return D8($);else if(Y==="bigint")return $.toString();else if(Y==="boolean")return $?"true":"false";else if(Y==="number"&&Number.isFinite($))return $<1000000000000000000000?""+$:D8(""+$);return""},A7=function($){let Y="";if($===null||typeof $!=="object")return Y;const W="&",X=Object.keys($),Z=X.length;let Q=0;for(let J=0;J<Z;J++){const z=X[J],A=$[z],D=D8(z)+"=";if(J)Y+=W;if(Array.isArray(A)){Q=A.length;for(let F=0;F<Q;F++){if(F)Y+=W;Y+=D,Y+=fW(A[F])}}else Y+=D,Y+=fW(A)}return Y},{encodeString:D8}=gW();TW.exports=A7});var w8=Q0((Oz,D$)=>{var yW=xW(),vW=dW(),pW={parse:yW,stringify:vW};D$.exports=pW;D$.exports.default=pW;D$.exports.parse=yW;D$.exports.stringify=vW});var E1=($,Y)=>({part:$,store:null,inert:Y!==void 0?new Map(Y.map((W)=>[W.part.charCodeAt(0),W])):null,params:null,wildcardStore:null}),I8=($,Y)=>({...$,part:Y}),b8=($)=>({paramName:$,store:null,inert:null});class K1{root={};history=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g};add($,Y,W){let X;if(typeof Y!="string")throw TypeError("Route path must be a string");Y===""?Y="/":Y[0]!=="/"&&(Y=`/${Y}`),this.history.push([$,Y,W]);let Z=Y[Y.length-1]==="*";Z&&(Y=Y.slice(0,-1));let Q=Y.split(K1.regex.static),J=Y.match(K1.regex.params)||[];Q[Q.length-1]===""&&Q.pop(),X=this.root[$]?this.root[$]:this.root[$]=E1("/");let z=0;for(let A=0;A<Q.length;++A){let D=Q[A];if(A>0){let F=J[z++].slice(1);if(X.params===null)X.params=b8(F);else if(X.params.paramName!==F)throw Error(`Cannot create route "${Y}" with parameter "${F}" because a route already exists with a different parameter name ("${X.params.paramName}") in the same location`);let S=X.params;if(S.inert===null){X=S.inert=E1(D);continue}X=S.inert}for(let F=0;;){if(F===D.length){if(F<X.part.length){let S=I8(X,X.part.slice(F));Object.assign(X,E1(D,[S]))}break}if(F===X.part.length){if(X.inert===null)X.inert=new Map;else if(X.inert.has(D.charCodeAt(F))){X=X.inert.get(D.charCodeAt(F)),D=D.slice(F),F=0;continue}let S=E1(D.slice(F));X.inert.set(D.charCodeAt(F),S),X=S;break}if(D[F]!==X.part[F]){let S=I8(X,X.part.slice(F)),b=E1(D.slice(F));Object.assign(X,E1(X.part.slice(0,F),[S,b])),X=b;break}++F}}if(z<J.length){let A=J[z],D=A.slice(1);if(X.params===null)X.params=b8(D);else if(X.params.paramName!==D)throw Error(`Cannot create route "${Y}" with parameter "${D}" because a route already exists with a different parameter name ("${X.params.paramName}") in the same location`);return X.params.store===null&&(X.params.store=W),X.params.store}return Z?(X.wildcardStore===null&&(X.wildcardStore=W),X.wildcardStore):(X.store===null&&(X.store=W),X.store)}find($,Y){let W=this.root[$];return W?a$(Y,Y.length,W,0):null}}var a$=($,Y,W,X)=>{let Z=W?.part,Q=X+Z.length;if(Z.length>1){if(Q>Y)return null;if(Z.length<15){for(let J=1,z=X+1;J<Z.length;++J,++z)if(Z.charCodeAt(J)!==$.charCodeAt(z))return null}else if($.substring(X,Q)!==Z)return null}if(Q===Y)return W.store!==null?{store:W.store,params:{}}:W.wildcardStore!==null?{store:W.wildcardStore,params:{"*":""}}:null;if(W.inert!==null){let J=W.inert.get($.charCodeAt(Q));if(J!==void 0){let z=a$($,Y,J,Q);if(z!==null)return z}}if(W.params!==null){let J=W.params,z=$.indexOf("/",Q);if(z!==Q){if(z===-1||z>=Y){if(J.store!==null){let A={};return A[J.paramName]=$.substring(Q,Y),{store:J.store,params:A}}}else if(J.inert!==null){let A=a$($,Y,J.inert,z);if(A!==null)return A.params[J.paramName]=$.substring(Q,z),A}}}return W.wildcardStore!==null?{store:W.wildcardStore,params:{"*":$.substring(Q,Y)}}:null};var _8=Z1(R8(),1);var E8=_8.default;var P$=()=>{let $;return[new Promise((W)=>{$=W}),$]},F1=()=>{const[$,Y]=P$(),[W,X]=P$(),Z=[],Q=[];return{signal:$,consume:(J)=>{switch(J.type){case"begin":if(J.unit&&Z.length===0)for(let z=0;z<J.unit;z++){const[A,D]=P$(),[F,S]=P$();Z.push(A),Q.push([(b)=>{D({children:[],end:F,name:b.name??"",skip:!1,time:b.time})},(b)=>{S(b)}])}Y({children:Z,end:W,name:J.name??"",skip:!1,time:J.time});break;case"end":X(J.time);break}},consumeChild(J){switch(J.type){case"begin":if(!Q[0])return;const[z]=Q[0];z({children:[],end:W,name:J.name??"",skip:!1,time:J.time});break;case"end":const A=Q.shift();if(!A)return;A[1](J.time)}},resolve(){Y({children:[],end:new Promise((J)=>J(0)),name:"",skip:!0,time:0});for(let[J,z]of Q)J({children:[],end:new Promise((A)=>A(0)),name:"",skip:!0,time:0}),z(0);X(0)}}},V8=($,Y,W)=>{return async function X(X){if(X.event!=="request"||X.type!=="begin")return;const Z=X.id,Q=$(),J=F1(),z=F1(),A=F1(),D=F1(),F=F1(),S=F1(),b=F1(),j=F1();J.consume(X);const M=(P)=>{if(P.id===Z)switch(P.event){case"request":J.consume(P);break;case"request.unit":J.consumeChild(P);break;case"parse":z.consume(P);break;case"parse.unit":z.consumeChild(P);break;case"transform":A.consume(P);break;case"transform.unit":A.consumeChild(P);break;case"beforeHandle":D.consume(P);break;case"beforeHandle.unit":D.consumeChild(P);break;case"handle":F.consume(P);break;case"afterHandle":S.consume(P);break;case"afterHandle.unit":S.consumeChild(P);break;case"error":b.consume(P);break;case"error.unit":b.consumeChild(P);break;case"response":if(P.type==="begin")J.resolve(),z.resolve(),A.resolve(),D.resolve(),F.resolve(),S.resolve(),b.resolve();else Q.off("event",M);j.consume(P);break;case"response.unit":j.consumeChild(P);break;case"exit":J.resolve(),z.resolve(),A.resolve(),D.resolve(),F.resolve(),S.resolve(),b.resolve();break}};Q.on("event",M),await W({id:Z,context:X.ctx,set:X.ctx?.set,store:X.ctx?.store,time:X.time,request:J.signal,parse:z.signal,transform:A.signal,beforeHandle:D.signal,handle:F.signal,afterHandle:S.signal,error:b.signal,response:j.signal}),Q.emit(`res${Z}.${Y}`,void 0)}};var W8=Z1(Y8(),1),NW=typeof Bun!=="undefined"?Bun.env:typeof process!=="undefined"?process?.env:void 0,o1=Symbol("ErrorCode"),N$=(NW?.NODE_ENV??NW?.ENV)==="production";class d$ extends Error{code="INTERNAL_SERVER_ERROR";status=500;constructor($){super($??"INTERNAL_SERVER_ERROR")}}class L1 extends Error{code="NOT_FOUND";status=404;constructor($){super($??"NOT_FOUND")}}class MW extends Error{code="PARSE";status=400;constructor($){super($??"PARSE")}}class M$ extends Error{$;code="INVALID_COOKIE_SIGNATURE";status=400;constructor($,Y){super(Y??`"${$}" has invalid cookie signature`);this.key=$}}class P0 extends Error{$;Y;W;code="VALIDATION";status=400;constructor($,Y,W){const X=N$?void 0:Y.Errors(W).First(),Z=X?.schema.error?typeof X.schema.error==="function"?X.schema.error($,Y,W):X.schema.error:void 0,Q=N$?Z??`Invalid ${$??X?.schema.error??X?.message}`:Z??`Invalid ${$}, '${X?.path?.slice(1)||"type"}': ${X?.message}`+"\n\nExpected: "+JSON.stringify(W8.Value.Create(Y.schema),null,2)+"\n\nFound: "+JSON.stringify(W,null,2);super(Q);this.type=$;this.validator=Y;this.value=W;Object.setPrototypeOf(this,P0.prototype)}get all(){return[...this.validator.Errors(this.value)]}get model(){return W8.Value.Create(this.validator.schema)}toResponse($){return new Response(this.message,{status:400,headers:$})}}var X8={open($){$.data.open?.($)},message($,Y){$.data.message?.($,Y)},drain($){$.data.drain?.($)},close($,Y,W){$.data.close?.($,Y,W)}};class c1{$;Y;id;validator;constructor($,Y){this.raw=$;this.data=Y;this.validator=$.data.validator,this.id=Date.now()}get publish(){return($,Y=void 0,W)=>{if(this.validator?.Check(Y)===!1)throw new P0("message",this.validator,Y);if(typeof Y==="object")Y=JSON.stringify(Y);return this.raw.publish($,Y,W),this}}get send(){return($)=>{if(this.validator?.Check($)===!1)throw new P0("message",this.validator,$);if(Buffer.isBuffer($))return this.raw.send($),this;if(typeof $==="object")$=JSON.stringify($);return this.raw.send($),this}}get subscribe(){return($)=>{return this.raw.subscribe($),this}}get unsubscribe(){return($)=>{return this.raw.unsubscribe($),this}}get cork(){return($)=>{return this.raw.cork($),this}}get close(){return()=>{return this.raw.close(),this}}get terminate(){return this.raw.terminate.bind(this.raw)}get isSubscribed(){return this.raw.isSubscribed.bind(this.raw)}get remoteAddress(){return this.raw.remoteAddress}}var n9=function($,Y){if(typeof $!=="string")throw new TypeError("argument str must be a string");var W={},X=Y||{},Z=X.decode||c9,Q=0;while(Q<$.length){var J=$.indexOf("=",Q);if(J===-1)break;var z=$.indexOf(";",Q);if(z===-1)z=$.length;else if(z<J){Q=$.lastIndexOf(";",J-1)+1;continue}var A=$.slice(Q,J).trim();if(W[A]===void 0){var D=$.slice(J+1,z).trim();if(D.charCodeAt(0)===34)D=D.slice(1,-1);W[A]=s9(D,Z)}Q=z+1}return W},o9=function($,Y,W){var X=W||{},Z=X.encode||l9;if(typeof Z!=="function")throw new TypeError("option encode is invalid");if(!y$.test($))throw new TypeError("argument name is invalid");var Q=Z(Y);if(Q&&!y$.test(Q))throw new TypeError("argument val is invalid");var J=$+"="+Q;if(X.maxAge!=null){var z=X.maxAge-0;if(isNaN(z)||!isFinite(z))throw new TypeError("option maxAge is invalid");J+="; Max-Age="+Math.floor(z)}if(X.domain){if(!y$.test(X.domain))throw new TypeError("option domain is invalid");J+="; Domain="+X.domain}if(X.path){if(!y$.test(X.path))throw new TypeError("option path is invalid");J+="; Path="+X.path}if(X.expires){var A=X.expires;if(!t9(A)||isNaN(A.valueOf()))throw new TypeError("option expires is invalid");J+="; Expires="+A.toUTCString()}if(X.httpOnly)J+="; HttpOnly";if(X.secure)J+="; Secure";if(X.priority){var D=typeof X.priority==="string"?X.priority.toLowerCase():X.priority;switch(D){case"low":J+="; Priority=Low";break;case"medium":J+="; Priority=Medium";break;case"high":J+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(X.sameSite){var F=typeof X.sameSite==="string"?X.sameSite.toLowerCase():X.sameSite;switch(F){case!0:J+="; SameSite=Strict";break;case"lax":J+="; SameSite=Lax";break;case"strict":J+="; SameSite=Strict";break;case"none":J+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return J},c9=function($){return $.indexOf("%")!==-1?decodeURIComponent($):$},l9=function($){return encodeURIComponent($)},t9=function($){return h9.call($)==="[object Date]"||$ instanceof Date},s9=function($,Y){try{return Y($)}catch(W){return $}};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var v$=n9,p$=o9;var h9=Object.prototype.toString,y$=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;var u$=Z1(x0(),1),B$=Z1(Y8(),1),q8=Z1(wW(),1);var H8=($)=>$&&typeof $==="object"&&!Array.isArray($),J7=($)=>typeof $==="function"&&/^\s*class\s+/.test($.toString())||$.toString().startsWith("[object ")||l0(Object.getPrototypeOf($)),U1=($,Y,{skipKeys:W}={})=>{if(H8($)&&H8(Y))for(let[X,Z]of Object.entries(Y)){if(W?.includes(X))continue;if(!H8(Z)){$[X]=Z;continue}if(!(X in $)){$[X]=Z;continue}if(J7(Z)){$[X]=Z;continue}$[X]=U1($[X],Z)}return $},jW=($,Y)=>U1($,Y,{skipKeys:["properties"]}),I0=($,Y)=>{const W=[...Array.isArray($)?$:[$]],X=[];for(let Z of W)if(Z.$elysiaChecksum)X.push(Z.$elysiaChecksum);for(let Z of Array.isArray(Y)?Y:[Y])if(!X.includes(Z?.$elysiaChecksum))W.push(Z);return W},I1=($,Y)=>{return{body:Y?.body??$?.body,headers:Y?.headers??$?.headers,params:Y?.params??$?.params,query:Y?.query??$?.query,response:Y?.response??$?.response,type:$?.type||Y?.type,detail:U1(Y?.detail??{},$?.detail??{}),parse:I0($?.parse??[],Y?.parse??[]),transform:I0($?.transform??[],Y?.transform??[]),beforeHandle:I0($?.beforeHandle??[],Y?.beforeHandle??[]),afterHandle:I0($?.afterHandle??[],Y?.afterHandle??[]),onResponse:I0($?.onResponse??[],Y?.onResponse??[]),trace:I0($?.trace??[],Y?.trace??[]),error:I0($?.error??[],Y?.error??[])}},W1=($,{models:Y={},additionalProperties:W=!1,dynamic:X=!1})=>{if(!$)return;if(typeof $==="string"&&!($ in Y))return;const Z=typeof $==="string"?Y[$]:$;if(Z.type==="object"&&("additionalProperties"in Z)===!1)Z.additionalProperties=W;if(X)return{schema:Z,references:"",checkFunc:()=>{},code:"",Check:(Q)=>B$.Value.Check(Z,Q),Errors:(Q)=>B$.Value.Errors(Z,Q),Code:()=>""};return q8.TypeCompiler.Compile(Z)},N8=($,{models:Y={},additionalProperties:W=!1,dynamic:X=!1})=>{if(!$)return;if(typeof $==="string"&&!($ in Y))return;const Z=typeof $==="string"?Y[$]:$,Q=(z)=>{if(X)return{schema:z,references:"",checkFunc:()=>{},code:"",Check:(A)=>B$.Value.Check(z,A),Errors:(A)=>B$.Value.Errors(z,A),Code:()=>""};return q8.TypeCompiler.Compile(z)};if(u$.Kind in Z){if(("additionalProperties"in Z)===!1)Z.additionalProperties=W;return{200:Q(Z)}}const J={};return Object.keys(Z).forEach((z)=>{const A=Z[+z];if(typeof A==="string"){if(A in Y){const D=Y[A];D.type==="object"&&("additionalProperties"in D),J[+z]=(u$.Kind in D)?Q(D):D}return}if(A.type==="object"&&("additionalProperties"in A)===!1)A.additionalProperties=W;J[+z]=(u$.Kind in A)?Q(A):A}),J},M8=($)=>{let Y=9;for(let W=0;W<$.length;)Y=Math.imul(Y^$.charCodeAt(W++),387420489);return Y=Y^Y>>>9},h$=($,Y,W)=>{const X=(Z)=>{if(W)Z.$elysiaChecksum=W;return Z};return{start:I0($.start,("start"in Y?Y.start??[]:[]).map(X)),request:I0($.request,("request"in Y?Y.request??[]:[]).map(X)),parse:I0($.parse,"parse"in Y?Y?.parse??[]:[]).map(X),transform:I0($.transform,(Y?.transform??[]).map(X)),beforeHandle:I0($.beforeHandle,(Y?.beforeHandle??[]).map(X)),afterHandle:I0($.afterHandle,(Y?.afterHandle??[]).map(X)),onResponse:I0($.onResponse,(Y?.onResponse??[]).map(X)),trace:$.trace,error:I0($.error,(Y?.error??[]).map(X)),stop:I0($.stop,("stop"in Y?Y.stop??[]:[]).map(X))}};var KW=($,Y=!0)=>{if(!$)return $;if(typeof $==="function"){if(Y)$.$elysiaHookType="global";else $.$elysiaHookType=void 0;return $}return $.map((W)=>{if(Y)W.$elysiaHookType="global";else W.$elysiaHookType=void 0;return W})},l1=($)=>{if(!$)return $;if(typeof $==="function")return $.$elysiaHookType==="global"?$:void 0;return $.filter((Y)=>Y.$elysiaHookType==="global")},U8=($)=>{return{...$,type:$?.type,detail:$?.detail,parse:l1($?.parse),transform:l1($?.transform),beforeHandle:l1($?.beforeHandle),afterHandle:l1($?.afterHandle),onResponse:l1($?.onResponse),error:l1($?.error)}},A8={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},t1=async($,Y)=>{if(typeof $!=="string")throw new TypeError("Cookie value must be provided as a string.");if(Y===null)throw new TypeError("Secret key must be provided.");const W=new TextEncoder,X=await crypto.subtle.importKey("raw",W.encode(Y),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),Z=await crypto.subtle.sign("HMAC",X,W.encode($)),Q=Array.from(new Uint8Array(Z)),J=btoa(String.fromCharCode(...Q));return`${$}.${J.replace(/=+$/,"")}`},B8=async($,Y)=>{if(typeof $!=="string")throw new TypeError("Signed cookie string must be provided.");if(Y===null)throw new TypeError("Secret key must be provided.");const W=$.slice(0,$.lastIndexOf("."));return await t1(W,Y)===$?W:!1};class t0{$;Y;name;setter;constructor($,Y={}){this._value=$;this.property=Y}get(){return this._value}get value(){return this._value}set value($){if(typeof $==="object"){if(JSON.stringify(this.value)===JSON.stringify($))return}else if(this.value===$)return;this._value=$,this.sync()}add($){const Y=Object.assign(this.property,typeof $==="function"?$(Object.assign(this.property,this.value)):$);if("value"in Y)this._value=Y.value,delete Y.value;return this.property=Y,this.sync()}set($){const Y=typeof $==="function"?$(Object.assign(this.property,this.value)):$;if("value"in Y)this._value=Y.value,delete Y.value;return this.property=Y,this.sync()}remove($){if(this.value===void 0)return;this.set({domain:$?.domain,expires:new Date(0),maxAge:0,path:$?.path,sameSite:$?.sameSite,secure:$?.secure,value:""})}get domain(){return this.property.domain}set domain($){if(this.property.domain===$)return;this.property.domain=$,this.sync()}get expires(){return this.property.expires}set expires($){if(this.property.expires?.getTime()===$?.getTime())return;this.property.expires=$,this.sync()}get httpOnly(){return this.property.httpOnly}set httpOnly($){if(this.property.domain===$)return;this.property.httpOnly=$,this.sync()}get maxAge(){return this.property.maxAge}set maxAge($){if(this.property.maxAge===$)return;this.property.maxAge=$,this.sync()}get path(){return this.property.path}set path($){if(this.property.path===$)return;this.property.path=$,this.sync()}get priority(){return this.property.priority}set priority($){if(this.property.priority===$)return;this.property.priority=$,this.sync()}get sameSite(){return this.property.sameSite}set sameSite($){if(this.property.sameSite===$)return;this.property.sameSite=$,this.sync()}get secure(){return this.property.secure}set secure($){if(this.property.secure===$)return;this.property.secure=$,this.sync()}toString(){return typeof this.value==="object"?JSON.stringify(this.value):this.value?.toString()??""}sync(){if(!this.name||!this.setter)return this;if(!this.setter.cookie)this.setter.cookie={[this.name]:Object.assign(this.property,{value:this.toString()})};else this.setter.cookie[this.name]=Object.assign(this.property,{value:this.toString()});return this}}var PW=($,Y,W)=>new Proxy($,{get(X,Z){if(Z in X)return X[Z];const Q=new t0(void 0,W?{...W}:void 0);return Q.setter=Y,Q.name=Z,Q},set(X,Z,Q){if(!(Q instanceof t0))return!1;if(!Y.cookie)Y.cookie={};return Q.setter=Y,Q.name=Z,Q.sync(),X[Z]=Q,!0}}),n$=async($,Y,{secret:W,sign:X,...Z}={})=>{if(!Y)return PW({},$,Z);const Q={},J=typeof W==="string";if(X&&X!==!0&&!Array.isArray(X))X=[X];const z=Object.keys(v$(Y));for(let A=0;A<z.length;A++){const D=z[A];let F=v$(Y)[D];if(X===!0||X?.includes(D)){if(!W)throw new Error("No secret is provided to cookie plugin");if(J){if(F=await B8(F,W),F===!1)throw new M$(D)}else{let j=!0;for(let M=0;M<W.length;M++){const P=await B8(F,W[M]);if(P!==!1){F=P,j=!1;break}}if(j)throw new M$(D)}}if(F===void 0)continue;const S=F.charCodeAt(0);if(S===123||S===91)try{const j=new t0(JSON.parse(F));j.setter=$,j.name=D,Q[D]=j;continue}catch{}if(!Number.isNaN(+F))F=+F;else if(F==="true")F=!0;else if(F==="false")F=!1;const b=new t0(F,Z);b.setter=$,b.name=D,Q[D]=b}return PW(Q,$)};var OW="toJSON"in new Headers,l0=($)=>{for(let Y in $)return!0;return!1},SW=($,Y)=>{if(!$||!Array.isArray(Y))return $;$.delete("Set-Cookie");for(let W=0;W<Y.length;W++){const X=Y[W].indexOf("=");$.append("Set-Cookie",`${Y[W].slice(0,X)}=${Y[W].slice(X+1)}`)}return $},LW=($)=>{if(!$||typeof $!=="object"||!l0($))return;const Y=[];for(let[W,X]of Object.entries($)){if(!W||!X)continue;if(Array.isArray(X.value))for(let Z=0;Z<X.value.length;Z++){let Q=X.value[Z];if(Q===void 0||Q===null)continue;if(typeof Q==="object")Q=JSON.stringify(Q);Y.push(p$(W,Q,X))}else{let Z=X.value;if(Z===void 0||Z===null)continue;if(typeof Z==="object")Z=JSON.stringify(Z);Y.push(p$(W,X.value,X))}}if(Y.length===0)return;if(Y.length===1)return Y[0];return Y},A1=($,Y)=>{if($?.$passthrough)$=$[$.$passthrough];if(l0(Y.headers)||Y.status!==200||Y.redirect||Y.cookie){if(typeof Y.status==="string")Y.status=A8[Y.status];if(Y.redirect){if(Y.headers.Location=Y.redirect,!Y.status||Y.status<300||Y.status>=400)Y.status=302}if(Y.cookie&&l0(Y.cookie))Y.headers["Set-Cookie"]=LW(Y.cookie);if(Y.headers["Set-Cookie"]&&Array.isArray(Y.headers["Set-Cookie"]))Y.headers=SW(new Headers(Y.headers),Y.headers["Set-Cookie"]);switch($?.constructor?.name){case"String":case"Blob":return new Response($,{status:Y.status,headers:Y.headers});case"Object":case"Array":return Response.json($,Y);case"ReadableStream":if(!Y.headers["content-type"]?.startsWith("text/event-stream"))Y.headers["content-type"]="text/event-stream; charset=utf-8";return new Response($,Y);case void 0:if(!$)return new Response("",Y);return Response.json($,Y);case"Response":const W={...Y.headers};if(OW)Y.headers=$.headers.toJSON();else for(let[Z,Q]of $.headers.entries())if(Z in Y.headers)Y.headers[Z]=Q;for(let Z in W)$.headers.append(Z,W[Z]);return $;case"Error":return F$($,Y);case"Promise":return $.then((Z)=>A1(Z,Y));case"Function":return A1($(),Y);case"Number":case"Boolean":return new Response($.toString(),Y);case"Cookie":if($ instanceof t0)return new Response($.value,Y);return new Response($?.toString(),Y);default:const X=JSON.stringify($);if(X.charCodeAt(0)===123){if(!Y.headers["Content-Type"])Y.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),Y)}return new Response(X,Y)}}else switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"ReadableStream":return new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return F$($,Y);case"Promise":return $.then((X)=>{const Z=j1(X);if(Z!==void 0)return Z;return new Response("")});case"Function":return j1($());case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof t0)return new Response($.value,Y);return new Response($?.toString(),Y);default:const W=JSON.stringify($);if(W.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(W)}},s0=($,Y)=>{if($===void 0||$===null)return;if($?.$passthrough)$=$[$.$passthrough];if(l0(Y.headers)||Y.status!==200||Y.redirect||Y.cookie){if(typeof Y.status==="string")Y.status=A8[Y.status];if(Y.redirect){if(Y.headers.Location=Y.redirect,!Y.status||Y.status<300||Y.status>=400)Y.status=302}if(Y.cookie&&l0(Y.cookie))Y.headers["Set-Cookie"]=LW(Y.cookie);if(Y.headers["Set-Cookie"]&&Array.isArray(Y.headers["Set-Cookie"]))Y.headers=SW(new Headers(Y.headers),Y.headers["Set-Cookie"]);switch($?.constructor?.name){case"String":case"Blob":return new Response($,Y);case"Object":case"Array":return Response.json($,Y);case"ReadableStream":if(!Y.headers["content-type"]?.startsWith("text/event-stream"))Y.headers["content-type"]="text/event-stream; charset=utf-8";return new Response($,Y);case void 0:if(!$)return;return Response.json($,Y);case"Response":const W=Object.assign({},Y.headers);if(OW)Y.headers=$.headers.toJSON();else for(let[Z,Q]of $.headers.entries())if(!(Z in Y.headers))Y.headers[Z]=Q;for(let Z in W)$.headers.append(Z,W[Z]);if($.status!==Y.status)Y.status=$.status;return $;case"Promise":return $.then((Z)=>{const Q=s0(Z,Y);if(Q!==void 0)return Q;return});case"Error":return F$($,Y);case"Function":return s0($(),Y);case"Number":case"Boolean":return new Response($.toString(),Y);case"Cookie":if($ instanceof t0)return new Response($.value,Y);return new Response($?.toString(),Y);default:const X=JSON.stringify($);if(X.charCodeAt(0)===123){if(!Y.headers["Content-Type"])Y.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),Y)}return new Response(X,Y)}}else switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"ReadableStream":return new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Promise":return $.then((X)=>{const Z=s0(X,Y);if(Z!==void 0)return Z;return});case"Error":return F$($,Y);case"Function":return j1($());case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof t0)return new Response($.value,Y);return new Response($?.toString(),Y);default:const W=JSON.stringify($);if(W.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(W)}},j1=($)=>{if($?.$passthrough)$=$[$.$passthrough];switch($?.constructor?.name){case"String":case"Blob":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"ReadableStream":return new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":return $;case"Error":return F$($);case"Promise":return $.then((W)=>{const X=j1(W);if(X!==void 0)return X;return new Response("")});case"Function":return j1($());case"Number":case"Boolean":return new Response($.toString());default:const Y=JSON.stringify($);if(Y.charCodeAt(0)===123)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});return new Response(Y)}},F$=($,Y)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:Y?.status!==200?Y?.status??500:500,headers:Y?.headers});var iW=Z1(w8(),1);var B7=(new Headers()).toJSON,mW=new RegExp(" (\\w+) = context","g"),uW={value:0},hW=({hasTrace:$,hasTraceSet:Y=!1,addFn:W,condition:X={}})=>{if(W("\nconst reporter = getReporter()\n"),$)return(Z,{name:Q,attribute:J="",unit:z=0}={})=>{const A=Z.indexOf("."),D=A===-1;if(Z!=="request"&&Z!=="response"&&!X[D?Z:Z.slice(0,A)])return()=>{if(Y&&Z==="afterHandle")W("reporter.emit('event',{id,event:'exit',type:'begin',time:0})"),W("\nawait traceDone\n")};if(D)Q||=Z;else Q||="anonymous";W("\n"+`reporter.emit('event', { 
					id,
					event: '${Z}',
					type: 'begin',
					name: '${Q}',
					time: performance.now(),
					${D?`unit: ${z},`:""}
					${J}
				})`.replace(/(\t| |\n)/g,"")+"\n");let F=!1;return()=>{if(F)return;if(F=!0,W("\n"+`reporter.emit('event', {
							id,
							event: '${Z}',
							type: 'end',
							time: performance.now()
						})`.replace(/(\t| |\n)/g,"")+"\n"),Y&&Z==="afterHandle")W("\nreporter.emit('event',{id,event:'exit',type:'begin',time:0})\n"),W("\nawait traceDone\n")}};else return()=>()=>{}},w$=($)=>{const Y=$.indexOf(")");if($.charCodeAt(Y+2)===61&&$.charCodeAt(Y+5)!==123)return!0;return $.includes("return")},F7=($,{injectResponse:Y=""}={})=>({composeValidation:(W,X=`c.${W}`)=>$?`c.set.status = 400; throw new ValidationError(
'${W}',
${W},
${X}
)`:`c.set.status = 400; return new ValidationError(
	'${W}',
	${W},
	${X}
).toResponse(c.set.headers)`,composeResponseValidation:(W="r")=>{const X=$?`throw new ValidationError(
'response',
response[c.set.status],
${W}
)`:`return new ValidationError(
'response',
response[c.set.status],
${W}
).toResponse(c.set.headers)`;return`\n${Y}
		if(response[c.set.status]?.Check(${W}) === false) { 
	if(!(response instanceof Error))
		${X}
}\n`}}),j0=($,Y)=>{if(Y=Y.trimStart(),Y=Y.replaceAll(/^async /g,""),/^(\w+)\(/g.test(Y))Y=Y.slice(Y.indexOf("("));const W=Y.charCodeAt(0)===40||Y.startsWith("function")?Y.slice(Y.indexOf("(")+1,Y.indexOf(")")):Y.slice(0,Y.indexOf("=")-1);if(W==="")return!1;const X=W.charCodeAt(0)===123?W.indexOf("..."):-1;if(W.charCodeAt(0)===123){if(W.includes($))return!0;if(X===-1)return!1}if(Y.match(new RegExp(`${W}(.${$}|\\["${$}"\\])`)))return!0;const Z=X!==-1?W.slice(X+3,W.indexOf(" ",X+3)):void 0;if(Y.match(new RegExp(`${Z}(.${$}|\\["${$}"\\])`)))return!0;const Q=[W];if(Z)Q.push(Z);for(let z of Y.matchAll(mW))Q.push(z[1]);const J=new RegExp(`{.*?} = (${Q.join("|")})`,"g");for(let[z]of Y.matchAll(J))if(z.includes(`{ ${$}`)||z.includes(`, ${$}`))return!0;return!1},j$=($)=>{if($=$.trimStart(),$=$.replaceAll(/^async /g,""),/^(\w+)\(/g.test($))$=$.slice($.indexOf("("));const Y=$.charCodeAt(0)===40||$.startsWith("function")?$.slice($.indexOf("(")+1,$.indexOf(")")):$.slice(0,$.indexOf("=")-1);if(Y==="")return!1;const W=Y.charCodeAt(0)===123?Y.indexOf("..."):-1,X=W!==-1?Y.slice(W+3,Y.indexOf(" ",W+3)):void 0,Z=[Y];if(X)Z.push(X);for(let J of $.matchAll(mW))Z.push(J[1]);for(let J of Z)if(new RegExp(`\\b\\w+\\([^)]*\\b${J}\\b[^)]*\\)`).test($))return!0;const Q=new RegExp(`{.*?} = (${Z.join("|")})`,"g");for(let[J]of $.matchAll(Q))if(new RegExp(`\\b\\w+\\([^)]*\\b${J}\\b[^)]*\\)`).test($))return!0;return!1},s1=Symbol.for("TypeBox.Kind"),o$=($,Y)=>{if(!Y)return;if((s1 in Y)&&Y[s1]===$)return!0;if(Y.type==="object"){const W=Y.properties;for(let X of Object.keys(W)){const Z=W[X];if(Z.type==="object"){if(o$($,Z))return!0}else if(Z.anyOf){for(let Q=0;Q<Z.anyOf.length;Q++)if(o$($,Z.anyOf[Q]))return!0}if((s1 in Z)&&Z[s1]===$)return!0}return!1}return Y.properties&&(s1 in Y.properties)&&Y.properties[s1]===$},j8=Symbol.for("TypeBox.Transform"),b1=($)=>{if(!$)return;if($.type==="object"&&$.properties){const Y=$.properties;for(let W of Object.keys(Y)){const X=Y[W];if(X.type==="object"){if(b1(X))return!0}else if(X.anyOf){for(let Q=0;Q<X.anyOf.length;Q++)if(b1(X.anyOf[Q]))return!0}if(j8 in X)return!0}return!1}return(j8 in $)||$.properties&&(j8 in $.properties)},D7=($)=>{if(!$)return;const Y=$?.schema;if(Y&&("anyOf"in Y)){let W=!1;const X=Y.anyOf[0].type;for(let Z of Y.anyOf)if(Z.type!==X){W=!0;break}if(!W)return X}return $.schema?.type},w7=/(?:return|=>) \S*\(/g,M0=($)=>{if($.constructor.name==="AsyncFunction")return!0;return $.toString().match(w7)},nW=({path:$,method:Y,hooks:W,validator:X,handler:Z,handleError:Q,definitions:J,schema:z,onRequest:A,config:D,getReporter:F})=>{const S=D.forceErrorEncapsulation||W.error.length>0||typeof Bun==="undefined"||W.onResponse.length>0||!!W.trace.length,b=W.onResponse.length?`\n;(async () => {${W.onResponse.map((G,f)=>`await res${f}(c)`).join(";")}})();\n`:"",j=W.trace.map((G)=>G.toString());let M=!1;if(j$(Z.toString()))M=!0;if(!M)for(let[G,f]of Object.entries(W)){if(!Array.isArray(f)||!f.length||!["parse","transform","beforeHandle","afterHandle","onResponse"].includes(G))continue;for(let i of f){if(typeof i!=="function")continue;if(j$(i.toString())){M=!0;break}}if(M)break}const P={parse:j.some((G)=>j0("parse",G)),transform:j.some((G)=>j0("transform",G)),handle:j.some((G)=>j0("handle",G)),beforeHandle:j.some((G)=>j0("beforeHandle",G)),afterHandle:j.some((G)=>j0("afterHandle",G)),error:S||j.some((G)=>j0("error",G))},O=W.trace.length>0;let U="";const w=X||Y!=="GET"&&Y!=="HEAD"?[Z,...W.transform,...W.beforeHandle,...W.afterHandle].map((G)=>G.toString()):[],I=M||Y!=="GET"&&Y!=="HEAD"&&W.type!=="none"&&(!!X.body||!!W.type||w.some((G)=>j0("body",G))),R=M||X.headers||w.some((G)=>j0("headers",G)),k=M||X.cookie||w.some((G)=>j0("cookie",G)),_=X?.cookie?.schema;let X0="";if(_?.sign){if(!_.secrets)throw new Error(`t.Cookie required secret which is not set in (${Y}) ${$}.`);const G=!_.secrets?void 0:typeof _.secrets==="string"?_.secrets:_.secrets[0];if(X0+=`const _setCookie = c.set.cookie
		if(_setCookie) {`,_.sign===!0)X0+=`for(const [key, cookie] of Object.entries(_setCookie)) {
				c.set.cookie[key].value = await signCookie(cookie.value, '${G}')
			}`;else for(let f of _.sign)X0+=`if(_setCookie['${f}']?.value) { c.set.cookie['${f}'].value = await signCookie(_setCookie['${f}'].value, '${G}') }\n`;X0+="}\n"}const{composeValidation:e,composeResponseValidation:N0}=F7(S);if(R)U+=B7?"c.headers = c.request.headers.toJSON()\n":`c.headers = {}
                for (const [key, value] of c.request.headers.entries())
					c.headers[key] = value
				`;if(k){const G=(i,h)=>{const z0=_?.[i]??h;if(!z0)return typeof h==="string"?`${i}: "${h}",`:`${i}: ${h},`;if(typeof z0==="string")return`${i}: '${z0}',`;if(z0 instanceof Date)return`${i}: new Date(${z0.getTime()}),`;return`${i}: ${z0},`},f=_?`{
			secret: ${_.secrets!==void 0?typeof _.secrets==="string"?`'${_.secrets}'`:"["+_.secrets.reduce((i,h)=>i+`'${h}',`,"")+"]":"undefined"},
			sign: ${_.sign===!0?!0:_.sign!==void 0?"["+_.sign.reduce((i,h)=>i+`'${h}',`,"")+"]":"undefined"},
			${G("domain")}
			${G("expires")}
			${G("httpOnly")}
			${G("maxAge")}
			${G("path","/")}
			${G("priority")}
			${G("sameSite")}
			${G("secure")}
		}`:"undefined";if(R)U+=`\nc.cookie = await parseCookie(c.set, c.headers.cookie, ${f})\n`;else U+=`\nc.cookie = await parseCookie(c.set, c.request.headers.get('cookie'), ${f})\n`}if(M||X.query||w.some((G)=>j0("query",G)))U+=`const url = c.request.url

		if(c.qi !== -1) {
			c.query ??= parseQuery(url.substring(c.qi + 1))
		} else {
			c.query ??= {}
		}
		`;const i0=W.trace.map((G)=>G.toString()).some((G)=>j0("set",G)||j$(G));M||W.trace.some((G)=>j0("set",G.toString()));const H0=i0||k||w.some((G)=>j0("set",G))||A.some((G)=>j0("set",G.toString()));if(O)U+="\nconst id = c.$$requestId\n";const J0=hW({hasTrace:O,hasTraceSet:i0,condition:P,addFn:(G)=>{U+=G}});if(U+=S?"try {\n":"",O){U+="\nconst traceDone = Promise.all([";for(let G=0;G<W.trace.length;G++)U+=`new Promise(r => { reporter.once(\`res\${id}.${G}\`, r) }),`;U+="])\n"}const m0=k||I||i0||M0(Z)||W.parse.length>0||W.afterHandle.some(M0)||W.beforeHandle.some(M0)||W.transform.some(M0),r0=J0("parse",{unit:W.parse.length});if(I){const G=D7(X?.body);if(W.type&&!Array.isArray(W.type)){if(W.type)switch(W.type){case"json":case"application/json":U+="c.body = await c.request.json()\n";break;case"text":case"text/plain":U+="c.body = await c.request.text()\n";break;case"urlencoded":case"application/x-www-form-urlencoded":U+="c.body = parseQuery(await c.request.text())\n";break;case"arrayBuffer":case"application/octet-stream":U+="c.body = await c.request.arrayBuffer()\n";break;case"formdata":case"multipart/form-data":U+=`c.body = {}

						const form = await c.request.formData()
						for (const key of form.keys()) {
							if (c.body[key])
								continue

							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						}\n`;break}if(W.parse.length)U+="}}"}else{const i=(()=>{if(W.parse.length&&G&&!Array.isArray(W.type)){const h=X?.body?.schema;switch(G){case"object":if(o$("File",h)||o$("Files",h))return`c.body = {}
		
								const form = await c.request.formData()
								for (const key of form.keys()) {
									if (c.body[key])
										continue
			
									const value = form.getAll(key)
									if (value.length === 1)
										c.body[key] = value[0]
									else c.body[key] = value
								}`;break;default:break}}})();if(i)U+=i;else{if(U+="\n",U+=R?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",U+=`
				if (contentType) {
					const index = contentType.indexOf(';')
					if (index !== -1) contentType = contentType.substring(0, index)\n`,W.parse.length){U+="let used = false\n";const h=J0("parse",{unit:W.parse.length});for(let z0=0;z0<W.parse.length;z0++){const F0=J0("parse.unit",{name:W.parse[z0].name}),D0=`bo${z0}`;if(z0!==0)U+="if(!used) {\n";if(U+=`let ${D0} = parse[${z0}](c, contentType)\n`,U+=`if(${D0} instanceof Promise) ${D0} = await ${D0}\n`,U+=`if(${D0} !== undefined) { c.body = ${D0}; used = true }\n`,F0(),z0!==0)U+="}"}h()}if(W.parse.length)U+="if (!used)";U+=`
				switch (contentType) {
					case 'application/json':
						c.body = await c.request.json()
						break
				
					case 'text/plain':
						c.body = await c.request.text()
						break
				
					case 'application/x-www-form-urlencoded':
						c.body = parseQuery(await c.request.text())
						break
				
					case 'application/octet-stream':
						c.body = await c.request.arrayBuffer();
						break
				
					case 'multipart/form-data':
						c.body = {}
				
						const form = await c.request.formData()
						for (const key of form.keys()) {
							if (c.body[key])
								continue
				
							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						}
				
						break
					}\n`,U+="}\n"}}U+="\n"}if(r0(),W?.transform){const G=J0("transform",{unit:W.transform.length});for(let f=0;f<W.transform.length;f++){const i=W.transform[f],h=J0("transform.unit",{name:i.name});if(i.$elysia==="derive")U+=M0(W.transform[f])?`Object.assign(c, await transform[${f}](c));`:`Object.assign(c, transform[${f}](c));`;else U+=M0(W.transform[f])?`await transform[${f}](c);`:`transform[${f}](c);`;h()}G()}if(X){if(U+="\n",X.headers){if(U+=`if(headers.Check(c.headers) === false) {
				${e("headers")}
			}`,b1(X.headers.schema))U+="\nc.headers = headers.Decode(c.headers)\n"}if(X.params){if(U+=`if(params.Check(c.params) === false) {
				${e("params")}
			}`,b1(X.params.schema))U+="\nc.params = params.Decode(c.params)\n"}if(X.query){if(U+=`if(query.Check(c.query) === false) {
				${e("query")} 
			}`,b1(X.query.schema))U+="\nc.query = query.Decode(Object.assign({}, c.query))\n"}if(X.body){if(U+=`if(body.Check(c.body) === false) { 
				${e("body")}
			}`,b1(X.body.schema))U+="\nc.body = body.Decode(c.body)\n"}if(l0(X.cookie?.schema.properties??{})){if(U+=`const cookieValue = {}
			for(const [key, value] of Object.entries(c.cookie))
				cookieValue[key] = value.value

			if(cookie.Check(cookieValue) === false) {
				${e("cookie","cookieValue")}
			}`,b1(X.cookie.schema))U+="\nc.cookie = params.Decode(c.cookie)\n"}}if(W?.beforeHandle){const G=J0("beforeHandle",{unit:W.beforeHandle.length});for(let f=0;f<W.beforeHandle.length;f++){const i=J0("beforeHandle.unit",{name:W.beforeHandle[f].name}),h=`be${f}`;if(!w$(W.beforeHandle[f].toString()))U+=M0(W.beforeHandle[f])?`await beforeHandle[${f}](c);\n`:`beforeHandle[${f}](c);\n`,i();else{U+=M0(W.beforeHandle[f])?`let ${h} = await beforeHandle[${f}](c);\n`:`let ${h} = beforeHandle[${f}](c);\n`,i(),U+=`if(${h} !== undefined) {\n`;const F0=J0("afterHandle",{unit:W.transform.length});if(W.afterHandle){const D0=h;for(let w0=0;w0<W.afterHandle.length;w0++){const q0=w$(W.afterHandle[w0].toString()),B1=J0("afterHandle.unit",{name:W.afterHandle[w0].name});if(U+=`c.response = ${D0}\n`,!q0)U+=M0(W.afterHandle[w0])?`await afterHandle[${w0}](c, ${D0});\n`:`afterHandle[${w0}](c, ${D0});\n`;else{const K=`af${w0}`;U+=M0(W.afterHandle[w0])?`const ${K} = await afterHandle[${w0}](c);\n`:`const ${K} = afterHandle[${w0}](c);\n`,U+=`if(${K} !== undefined) { c.response = ${D0} = ${K} }\n`}B1()}}if(F0(),X.response)U+=N0(h);U+=X0,U+=`return mapEarlyResponse(${h}, c.set)}\n`}}G()}if(W?.afterHandle.length){const G=J0("handle",{name:Z.name});if(W.afterHandle.length)U+=M0(Z)?"let r = c.response = await handler(c);\n":"let r = c.response = handler(c);\n";else U+=M0(Z)?"let r = await handler(c);\n":"let r = handler(c);\n";G();const f=J0("afterHandle",{unit:W.afterHandle.length});for(let i=0;i<W.afterHandle.length;i++){const h=`af${i}`,z0=w$(W.afterHandle[i].toString()),F0=J0("afterHandle.unit",{name:W.afterHandle[i].name});if(!z0)U+=M0(W.afterHandle[i])?`await afterHandle[${i}](c)\n`:`afterHandle[${i}](c)\n`,F0();else{if(X.response)U+=M0(W.afterHandle[i])?`let ${h} = await afterHandle[${i}](c)\n`:`let ${h} = afterHandle[${i}](c)\n`;else U+=M0(W.afterHandle[i])?`let ${h} = mapEarlyResponse(await afterHandle[${i}](c), c.set)\n`:`let ${h} = mapEarlyResponse(afterHandle[${i}](c), c.set)\n`;if(F0(),X.response){if(U+=`if(${h} !== undefined) {`,U+=N0(h),U+=`${h} = mapEarlyResponse(${h}, c.set)\n`,U+=`if(${h}) {`,f(),i0)U+=`${h} = mapEarlyResponse(${h}, c.set)\n`;U+=`return ${h} } }`}else U+=`if(${h}) {`,f(),U+=`return ${h}}\n`}}if(f(),U+="r = c.response\n",X.response)U+=N0();if(U+=X0,H0)U+="return mapResponse(r, c.set)\n";else U+="return mapCompactResponse(r)\n"}else{const G=J0("handle",{name:Z.name});if(X.response)if(U+=M0(Z)?"const r = await handler(c);\n":"const r = handler(c);\n",G(),U+=N0(),J0("afterHandle")(),U+=X0,H0)U+="return mapResponse(r, c.set)\n";else U+="return mapCompactResponse(r)\n";else if(P.handle||k)if(U+=M0(Z)?"let r = await handler(c);\n":"let r = handler(c);\n",G(),J0("afterHandle")(),U+=X0,H0)U+="return mapResponse(r, c.set)\n";else U+="return mapCompactResponse(r)\n";else{G();const f=M0(Z)?"await handler(c) ":"handler(c)";if(J0("afterHandle")(),H0)U+=`return mapResponse(${f}, c.set)\n`;else U+=`return mapCompactResponse(${f})\n`}}if(S||b){if(U+=`
} catch(error) {`,!m0)U+="return (async () => {";U+=`const set = c.set

		if (!set.status || set.status < 300) set.status = 500
	`;const G=J0("error",{unit:W.error.length});if(W.error.length)for(let f=0;f<W.error.length;f++){const i=`er${f}`,h=J0("error.unit",{name:W.error[f].name});if(U+=`\nlet ${i} = handleErrors[${f}](
					Object.assign(c, {
						error: error,
						code: error.code ?? error[ERROR_CODE] ?? "UNKNOWN"
					})
				)\n`,M0(W.error[f]))U+=`if (${i} instanceof Promise) ${i} = await ${i}\n`;h(),U+=`${i} = mapEarlyResponse(${i}, set)\n`,U+=`if (${i}) {`,U+=`return ${i} }\n`}if(G(),U+="return handleError(c, error)\n\n",!m0)U+="})()";if(U+="}",b||O){U+=" finally { ";const f=J0("response",{unit:W.onResponse.length});U+=b,f(),U+="}"}}return U=`const { 
		handler,
		handleError,
		hooks: {
			transform,
			beforeHandle,
			afterHandle,
			parse,
			error: handleErrors,
			onResponse
		},
		validator: {
			body,
			headers,
			params,
			query,
			response,
			cookie
		},
		utils: {
			mapResponse,
			mapCompactResponse,
			mapEarlyResponse,
			parseQuery
		},
		error: {
			NotFoundError,
			ValidationError,
			InternalServerError
		},
		schema,
		definitions,
		ERROR_CODE,
		getReporter,
		requestId,
		parseCookie,
		signCookie
	} = hooks

	${W.onResponse.length?`const ${W.onResponse.map((G,f)=>`res${f} = onResponse[${f}]`).join(",")}`:""}

	return ${m0?"async":""} function(c) {
		${z&&J?"c.schema = schema; c.defs = definitions;":""}
		${U}
	}`,Function("hooks",U)({handler:Z,hooks:W,validator:X,handleError:Q,utils:{mapResponse:A1,mapCompactResponse:j1,mapEarlyResponse:s0,parseQuery:iW.parse},error:{NotFoundError:L1,ValidationError:P0,InternalServerError:d$},schema:z,definitions:J,ERROR_CODE:o1,getReporter:F,requestId:uW,parseCookie:n$,signCookie:t1})},K8=($)=>{let Y="",W="";for(let j of Object.keys($.decorators))Y+=`,${j}: app.decorators.${j}`;const{router:X,staticRouter:Z}=$,Q=$.event.trace.length>0,J=`
	const route = find(request.method, path) ${X.root.ALL?'?? find("ALL", path)':""}
	if (route === null)
		return ${$.event.error.length?"app.handleError(ctx, notFound)":`new Response(error404, {
					status: ctx.set.status === 200 ? 404 : ctx.set.status,
					headers: ctx.set.headers
				})`}

	ctx.params = route.params

	return route.store(ctx)`;let z="";for(let[j,{code:M,all:P}]of Object.entries(Z.map))z+=`case '${j}':\nswitch(request.method) {\n${M}\n${P??"default: break map"}}\n\n`;const A=$.event.request.some(M0);W+=`const {
		app,
		app: { store, router, staticRouter, wsRouter },
		mapEarlyResponse,
		NotFoundError,
		requestId,
		getReporter
	} = data

	const notFound = new NotFoundError()

	${$.event.request.length?"const onRequest = app.event.request":""}

	${Z.variables}

	const find = router.find.bind(router)
	const findWs = wsRouter.find.bind(wsRouter)
	const handleError = app.handleError.bind(this)

	${$.event.error.length?"":"const error404 = notFound.message.toString()"}

	return ${A?"async":""} function map(request) {
	`;const D=$.event.trace.map((j)=>j.toString()),F=hW({hasTrace:Q,hasTraceSet:$.event.trace.some((j)=>{const M=j.toString();return j0("set",M)||j$(M)}),condition:{request:D.some((j)=>j0("request",j)||j$(j))},addFn:(j)=>{W+=j}});if($.event.request.length){W+=`
			${Q?"const id = +requestId.value++":""}

			const ctx = {
				request,
				store,
				set: {
					cookie: {},
					headers: {},
					status: 200
				}
				${Q?",$$requestId: +id":""}
				${Y}
			}
		`;const j=F("request",{attribute:"ctx",unit:$.event.request.length});W+="try {\n";for(let M=0;M<$.event.request.length;M++){const P=$.event.request[M],O=w$(P.toString()),U=M0(P),w=F("request.unit",{name:$.event.request[M].name}),I=`re${M}`;if(O)W+=`const ${I} = mapEarlyResponse(
					${U?"await":""} onRequest[${M}](ctx),
					ctx.set
				)\n`,w(),W+=`if(${I}) return ${I}\n`;else W+=`${U?"await":""} onRequest[${M}](ctx)\n`,w()}W+=`} catch (error) {
			return app.handleError(ctx, error)
		}`,j(),W+=`
		const url = request.url,
		s = url.indexOf('/', 11),
		i = ctx.qi = url.indexOf('?', s + 1),
		path = ctx.path = i === -1 ? url.substring(s) : url.substring(s, i);`}else W+=`
		const url = request.url,
			s = url.indexOf('/', 11),
			qi = url.indexOf('?', s + 1),
			path = qi === -1
				? url.substring(s)
				: url.substring(s, qi)

		${Q?"const id = +requestId.value++":""}

		const ctx = {
			request,
			store,
			qi,
			path,
			set: {
				headers: {},
				status: 200
			}
			${Q?",$$requestId: id":""}
			${Y}
		}`,F("request",{unit:$.event.request.length,attribute:D.some((j)=>j0("context",j))||D.some((j)=>j0("store",j))||D.some((j)=>j0("set",j))?"ctx":""})();const{wsPaths:S,wsRouter:b}=$;if(Object.keys(S).length||b.history.length){W+=`
			if(request.method === 'GET') {
				switch(path) {`;for(let[j,M]of Object.entries(S))W+=`
					case '${j}':
						if(request.headers.get('upgrade') === 'websocket')
							return st${M}(ctx)
							
						break`;W+=`
				default:
					if(request.headers.get('upgrade') === 'websocket') {
						const route = findWs('ws', path)

						if(route) {
							ctx.params = route.params

							return route.store(ctx)
						}
					}

					break
			}
		}\n`}return W+=`
		map: switch(path) {
			${z}

			default:
				break
		}

		${J}
	}`,$.handleError=P8($),Function("data",W)({app:$,mapEarlyResponse:s0,NotFoundError:L1,getReporter:()=>$.reporter,requestId:uW})},P8=($)=>{let Y=`const {
		app: { event: { error: onError, onResponse: res } },
		mapResponse,
		ERROR_CODE
	} = inject

	return ${$.event.error.find(M0)?"async":""} function(context, error) {
		const { set } = context
		`;for(let W=0;W<$.event.error.length;W++){const X=$.event.error[W],Z=`${M0(X)?"await ":""}onError[${W}](
			Object.assign(context, {
				code: error.code ?? error[ERROR_CODE] ?? 'UNKNOWN',
				error
			})
		)`;if(w$(X.toString()))Y+=`const r${W} = ${Z}; if(r${W} !== undefined) return mapResponse(r${W}, set)\n`;else Y+=Z+"\n"}return Y+=`if(error.constructor.name === "ValidationError") {
		set.status = error.status ?? 400
		return new Response(
			error.message, 
			{ headers: set.headers, status: set.status }
		)
	} else {
		return new Response(error.message, { headers: set.headers, status: error.status ?? 500 })
	}
}`,Function("inject",Y)({app:$,mapResponse:A1,ERROR_CODE:o1})};var c$=Z1(w8(),1);var O8=($)=>async(Y)=>{const W={cookie:{},status:200,headers:{}};let X;if($.decorators)X=$.decorators,X.request=Y,X.set=W,X.store=$.store;else X={set:W,store:$.store,request:Y};const Z=Y.url,Q=Z.indexOf("/",11),J=Z.indexOf("?",Q+1),z=J===-1?Z.substring(Q):Z.substring(Q,J);try{for(let O=0;O<$.event.request.length;O++){const U=$.event.request[O];let w=U(X);if(w instanceof Promise)w=await w;if(w=s0(w,W),w)return w}const A=$.dynamicRouter.find(Y.method,z)??$.dynamicRouter.find("ALL",z);if(!A)throw new L1;const{handle:D,hooks:F,validator:S,content:b}=A.store;let j;if(Y.method!=="GET"&&Y.method!=="HEAD")if(b)switch(b){case"application/json":j=await Y.json();break;case"text/plain":j=await Y.text();break;case"application/x-www-form-urlencoded":j=c$.parse(await Y.text());break;case"application/octet-stream":j=await Y.arrayBuffer();break;case"multipart/form-data":j={};const O=await Y.formData();for(let U of O.keys()){if(j[U])continue;const w=O.getAll(U);if(w.length===1)j[U]=w[0];else j[U]=w}break}else{let O=Y.headers.get("content-type");if(O){const U=O.indexOf(";");if(U!==-1)O=O.slice(0,U);for(let w=0;w<$.event.parse.length;w++){let I=$.event.parse[w](X,O);if(I instanceof Promise)I=await I;if(I){j=I;break}}if(j===void 0)switch(O){case"application/json":j=await Y.json();break;case"text/plain":j=await Y.text();break;case"application/x-www-form-urlencoded":j=c$.parse(await Y.text());break;case"application/octet-stream":j=await Y.arrayBuffer();break;case"multipart/form-data":j={};const w=await Y.formData();for(let I of w.keys()){if(j[I])continue;const R=w.getAll(I);if(R.length===1)j[I]=R[0];else j[I]=R}break}}}X.body=j,X.params=A?.params||void 0,X.query=J===-1?{}:c$.parse(Z.substring(J+1)),X.headers={};for(let[O,U]of Y.headers.entries())X.headers[O]=U;const M=S?.cookie?.schema;X.cookie=await n$(X.set,X.headers.cookie,M?{secret:M.secrets!==void 0?typeof M.secrets==="string"?M.secrets:M.secrets.join(","):void 0,sign:M.sign===!0?!0:M.sign!==void 0?typeof M.sign==="string"?M.sign:M.sign.join(","):void 0}:void 0);for(let O=0;O<F.transform.length;O++){const U=F.transform[O](X);if(F.transform[O].$elysia==="derive")if(U instanceof Promise)Object.assign(X,await U);else Object.assign(X,U);else if(U instanceof Promise)await U}if(S){if(S.headers){const O={};for(let U in Y.headers)O[U]=Y.headers.get(U);if(S.headers.Check(O)===!1)throw new P0("header",S.headers,O)}if(S.params?.Check(X.params)===!1)throw new P0("params",S.params,X.params);if(S.query?.Check(X.query)===!1)throw new P0("query",S.query,X.query);if(S.cookie){const O={};for(let[U,w]of Object.entries(X.cookie))O[U]=w.value;if(S.cookie?.Check(O)===!1)throw new P0("cookie",S.cookie,O)}if(S.body?.Check(j)===!1)throw new P0("body",S.body,j)}for(let O=0;O<F.beforeHandle.length;O++){let U=F.beforeHandle[O](X);if(U instanceof Promise)U=await U;if(U!==void 0){X.response=U;for(let I=0;I<F.afterHandle.length;I++){let R=F.afterHandle[I](X);if(R instanceof Promise)R=await R;if(R)U=R}const w=s0(U,X.set);if(w)return w}}let P=D(X);if(P instanceof Promise)P=await P;if(!F.afterHandle.length){const O=S?.response?.[P.status];if(O?.Check(P)===!1)throw new P0("response",O,P)}else{X.response=P;for(let O=0;O<F.afterHandle.length;O++){let U=F.afterHandle[O](X);if(U instanceof Promise)U=await U;const w=s0(U,X.set);if(w!==void 0){const I=S?.response?.[P.status];if(I?.Check(w)===!1)throw new P0("response",I,w);return w}}}if(X.set.cookie&&M?.sign){const O=!M.secrets?void 0:typeof M.secrets==="string"?M.secrets:M.secrets[0];if(M.sign===!0)for(let[U,w]of Object.entries(X.set.cookie))X.set.cookie[U].value=await t1(w.value,"${secret}");else for(let U of M.sign){if(!(U in M.properties))continue;if(X.set.cookie[U]?.value)X.set.cookie[U].value=await t1(X.set.cookie[U].value,O)}}return A1(P,X.set)}catch(A){if(A.status)W.status=A.status;return $.handleError(X,A)}finally{for(let A of $.event.onResponse)await A(X)}},oW=($)=>async(Y,W)=>{const X=Object.assign(Y,W);X.set=Y.set;for(let Z=0;Z<$.event.error.length;Z++){let Q=$.event.error[Z](X);if(Q instanceof Promise)Q=await Q;if(Q!==void 0&&Q!==null)return A1(Q,Y.set)}return new Response(typeof W.cause==="string"?W.cause:W.message,{headers:Y.set.headers,status:W.status??500})};var G1=Z1(x$(),1),a=Z1(x0(),1);try{G1.TypeSystem.Format("email",($)=>/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test($)),G1.TypeSystem.Format("uuid",($)=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test($)),G1.TypeSystem.Format("date",($)=>!Number.isNaN(new Date($).getTime())),G1.TypeSystem.Format("date-time",($)=>!Number.isNaN(new Date($).getTime()))}catch($){}var cW=($)=>{if(typeof $==="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},S8=($,Y)=>{if(!(Y instanceof Blob))return!1;if($.minSize&&Y.size<cW($.minSize))return!1;if($.maxSize&&Y.size>cW($.maxSize))return!1;if($.extension)if(typeof $.extension==="string"){if(!Y.type.startsWith($.extension))return!1}else{for(let W=0;W<$.extension.length;W++)if(Y.type.startsWith($.extension[W]))return!0;return!1}return!0},j7=G1.TypeSystem.Type("Files",($,Y)=>{if(!Array.isArray(Y))return S8($,Y);if($.minItems&&Y.length<$.minItems)return!1;if($.maxItems&&Y.length>$.maxItems)return!1;for(let W=0;W<Y.length;W++)if(!S8($,Y[W]))return!1;return!0});a.FormatRegistry.Set("numeric",($)=>!isNaN(+$));a.FormatRegistry.Set("ObjectString",($)=>{let Y=$.charCodeAt(0);if(Y===9||Y===10||Y===32)Y=$.trimStart().charCodeAt(0);if(Y!==123&&Y!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});var R1={Numeric:($)=>a.Type.Transform(a.Type.Union([a.Type.String({format:"numeric",default:0}),a.Type.Number($)])).Decode((Y)=>{const W=+Y;if(isNaN(W))return Y;return W}).Encode((Y)=>Y),ObjectString:($,Y)=>a.Type.Transform(a.Type.Union([a.Type.String({format:"ObjectString",default:""}),a.Type.Object($,Y)])).Decode((W)=>{if(typeof W==="string")try{return JSON.parse(W)}catch{return W}return W}).Encode((W)=>JSON.stringify(W)),File:G1.TypeSystem.Type("File",S8),Files:($={})=>a.Type.Transform(a.Type.Union([j7($)])).Decode((Y)=>{if(Array.isArray(Y))return Y;return[Y]}).Encode((Y)=>Y),Nullable:($)=>a.Type.Union([a.Type.Null(),$]),MaybeEmpty:($)=>a.Type.Union([a.Type.Null(),a.Type.Undefined(),$]),Cookie:($,Y)=>a.Type.Object($,Y)};a.Type.ObjectString=R1.ObjectString;a.Type.Numeric=R1.Numeric;a.Type.File=($={})=>R1.File({default:"File",...$,extension:$?.type,type:"string",format:"binary"});a.Type.Files=($={})=>R1.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}});a.Type.Nullable=($)=>R1.Nullable($);a.Type.MaybeEmpty=R1.MaybeEmpty;a.Type.Cookie=R1.Cookie;class l${config;dependencies={};store={};decorators={};definitions={type:{},error:{}};schema={};event={start:[],request:[],parse:[],transform:[],beforeHandle:[],afterHandle:[],onResponse:[],trace:[],error:[],stop:[]};reporter=new E8;server=null;getServer(){return this.server}validator=null;router=new K1;wsRouter=new K1;routes=[];staticRouter={handlers:[],variables:"",map:{},all:""};wsPaths={};dynamicRouter=new K1;lazyLoadModules=[];path="";constructor($){this.config={forceErrorEncapsulation:!1,prefix:"",aot:!0,strictPath:!1,scoped:!1,cookie:{},...$,seed:$?.seed===void 0?"":$?.seed}}add($,Y,W,X,{allowMeta:Z=!1,skipPrefix:Q=!1}={allowMeta:!1,skipPrefix:!1}){if(typeof Y==="string")Y=[Y];for(let J of Y){if(J=J===""?J:J.charCodeAt(0)===47?J:`/${J}`,this.config.prefix&&!Q)J=this.config.prefix+J;if(X?.type)switch(X.type){case"text":X.type="text/plain";break;case"json":X.type="application/json";break;case"formdata":X.type="multipart/form-data";break;case"urlencoded":X.type="application/x-www-form-urlencoded";break;case"arrayBuffer":X.type="application/octet-stream";break;default:break}const z=this.definitions.type;let A=W1(X?.cookie??this.validator?.cookie,{dynamic:!this.config.aot,models:z,additionalProperties:!0});if(l0(this.config.cookie??{}))if(A)A.schema=jW(A.schema,this.config.cookie??{});else A=W1(a.Type.Cookie({},this.config.cookie),{dynamic:!this.config.aot,models:z,additionalProperties:!0});const D={body:W1(X?.body??this.validator?.body,{dynamic:!this.config.aot,models:z}),headers:W1(X?.headers??this.validator?.headers,{dynamic:!this.config.aot,models:z,additionalProperties:!0}),params:W1(X?.params??this.validator?.params,{dynamic:!this.config.aot,models:z}),query:W1(X?.query??this.validator?.query,{dynamic:!this.config.aot,models:z}),cookie:A,response:N8(X?.response??this.validator?.response,{dynamic:!this.config.aot,models:z})},F=I1(this.event,X),S=J.endsWith("/")?J.slice(0,J.length-1):J+"/";if(this.config.aot===!1){if(this.dynamicRouter.add($,J,{validator:D,hooks:F,content:X?.type,handle:W}),this.config.strictPath===!1)this.dynamicRouter.add($,S,{validator:D,hooks:F,content:X?.type,handle:W});this.routes.push({method:$,path:J,composed:null,handler:W,hooks:F});return}const b=nW({path:J,method:$,hooks:F,validator:D,handler:W,handleError:this.handleError,onRequest:this.event.request,config:this.config,definitions:Z?this.definitions.type:void 0,schema:Z?this.schema:void 0,getReporter:()=>this.reporter}),j=this.routes.findIndex((M)=>M.path===J&&M.method===$);if(j!==-1)this.routes.splice(j,1);if(this.routes.push({method:$,path:J,composed:b,handler:W,hooks:F}),$==="$INTERNALWS"){const M=this.config.strictPath?void 0:J.endsWith("/")?J.slice(0,J.length-1):J+"/";if(J.indexOf(":")===-1&&J.indexOf("*")===-1){const P=this.staticRouter.handlers.length;if(this.staticRouter.handlers.push(b),this.staticRouter.variables+=`const st${P} = staticRouter.handlers[${P}]\n`,this.wsPaths[J]=P,M)this.wsPaths[M]=P}else if(this.wsRouter.add("ws",J,b),M)this.wsRouter.add("ws",M,b);return}if(J.indexOf(":")===-1&&J.indexOf("*")===-1){const M=this.staticRouter.handlers.length;if(this.staticRouter.handlers.push(b),this.staticRouter.variables+=`const st${M} = staticRouter.handlers[${M}]\n`,!this.staticRouter.map[J])this.staticRouter.map[J]={code:""};if($==="ALL")this.staticRouter.map[J].all=`default: return st${M}(ctx)\n`;else this.staticRouter.map[J].code=`case '${$}': return st${M}(ctx)\n${this.staticRouter.map[J].code}`;if(!this.config.strictPath){if(!this.staticRouter.map[S])this.staticRouter.map[S]={code:""};if($==="ALL")this.staticRouter.map[S].all=`default: return st${M}(ctx)\n`;else this.staticRouter.map[S].code=`case '${$}': return st${M}(ctx)\n${this.staticRouter.map[S].code}`}}else if(this.router.add($,J,b),!this.config.strictPath)this.router.add($,J.endsWith("/")?J.slice(0,J.length-1):J+"/",b)}}onStart($){return this.on("start",$),this}onRequest($){return this.on("request",$),this}onParse($){return this.on("parse",$),this}onTransform($){return this.on("transform",$),this}onBeforeHandle($){return this.on("beforeHandle",$),this}onAfterHandle($){return this.on("afterHandle",$),this}onResponse($){return this.on("response",$),this}trace($){return this.reporter.on("event",V8(()=>this.reporter,this.event.trace.length,$)),this.on("trace",$),this}addError($,Y){return this.error($,Y)}error($,Y){switch(typeof $){case"string":return Y.prototype[o1]=$,this.definitions.error[$]=Y,this;case"function":return this.definitions.error=$(this.definitions.error),this}for(let[W,X]of Object.entries($))X.prototype[o1]=W,this.definitions.error[W]=X;return this}onError($){return this.on("error",$),this}onStop($){return this.on("stop",$),this}on($,Y){for(let W of Array.isArray(Y)?Y:[Y])switch(W=KW(W),$){case"start":this.event.start.push(W);break;case"request":this.event.request.push(W);break;case"response":this.event.onResponse.push(W);break;case"parse":this.event.parse.splice(this.event.parse.length-1,0,W);break;case"transform":this.event.transform.push(W);break;case"beforeHandle":this.event.beforeHandle.push(W);break;case"afterHandle":this.event.afterHandle.push(W);break;case"trace":this.event.trace.push(W);break;case"error":this.event.error.push(W);break;case"stop":this.event.stop.push(W);break}return this}group($,Y,W){const X=new l$({...this.config,prefix:""});X.store=this.store;const Z=typeof Y==="object",Q=(Z?W:Y)(X);if(this.decorators=U1(this.decorators,X.decorators),Q.event.request.length)this.event.request=[...this.event.request,...Q.event.request];if(Q.event.onResponse.length)this.event.onResponse=[...this.event.onResponse,...Q.event.onResponse];return this.model(Q.definitions.type),Object.values(X.routes).forEach(({method:J,path:z,handler:A,hooks:D})=>{if(z=(Z?"":this.config.prefix)+$+z,Z){const F=Y,S=D;this.add(J,z,A,I1(F,{...S,error:!S.error?Q.event.error:Array.isArray(S.error)?[...S.error,...Q.event.error]:[S.error,...Q.event.error]}))}else this.add(J,z,A,I1(D,{error:Q.event.error}),{skipPrefix:!0})}),this}guard($,Y){if(!Y)return this.event=h$(this.event,$),this.validator={body:$.body,headers:$.headers,params:$.params,query:$.query,response:$.response},this;const W=new l$;W.store=this.store;const X=Y(W);if(this.decorators=U1(this.decorators,W.decorators),X.event.request.length)this.event.request=[...this.event.request,...X.event.request];if(X.event.onResponse.length)this.event.onResponse=[...this.event.onResponse,...X.event.onResponse];return this.model(X.definitions.type),Object.values(W.routes).forEach(({method:Z,path:Q,handler:J,hooks:z})=>{this.add(Z,Q,J,I1($,{...z,error:!z.error?X.event.error:Array.isArray(z.error)?[...z.error,...X.event.error]:[z.error,...X.event.error]}))}),this}use($){if($ instanceof Promise)return this.lazyLoadModules.push($.then((Y)=>{if(typeof Y==="function")return Y(this);if(typeof Y.default==="function")return Y.default(this);return this._use(Y)}).then((Y)=>Y.compile())),this;else return this._use($);return this}_use($){if(typeof $==="function"){const Z=$(this);if(Z instanceof Promise)return this.lazyLoadModules.push(Z.then((Q)=>{if(typeof Q==="function")return Q(this);if(typeof Q.default==="function")return Q.default(this);return this._use(Q)}).then((Q)=>Q.compile())),this;return Z}const{name:Y,seed:W}=$.config;$.getServer=()=>this.getServer();const X=$.config.scoped;if(X){if(Y){if(!(Y in this.dependencies))this.dependencies[Y]=[];const Q=W!==void 0?M8(Y+JSON.stringify(W)):0;if(this.dependencies[Y].some((J)=>Q===J))return this;this.dependencies[Y].push(Q)}if($.model(this.definitions.type),$.error(this.definitions.error),$.onRequest((Q)=>{Object.assign(Q,this.decorators),Object.assign(Q.store,this.store)}),$.event.trace=[...this.event.trace,...$.event.trace],$.config.aot)$.compile();const Z=this.mount($.fetch);return this.routes=this.routes.concat(Z.routes),this}else{$.reporter=this.reporter;for(let Z of $.event.trace)this.trace(Z)}this.decorate($.decorators),this.state($.store),this.model($.definitions.type),this.error($.definitions.error);for(let{method:Z,path:Q,handler:J,hooks:z}of Object.values($.routes))this.add(Z,Q,J,I1(z,{error:$.event.error}));if(!X)if(Y){if(!(Y in this.dependencies))this.dependencies[Y]=[];const Z=W!==void 0?M8(Y+JSON.stringify(W)):0;if(this.dependencies[Y].some((Q)=>Z===Q))return this;this.dependencies[Y].push(Z),this.event=h$(this.event,U8($.event),Z)}else this.event=h$(this.event,U8($.event));return this}mount($,Y){if(typeof $==="function"||$.length===0||$==="/"){const Z=typeof $==="function"?$:Y,Q=async({request:J,path:z})=>Z(new Request("http://a.cc"+z||"/",J));return this.all("/",Q,{type:"none"}),this.all("/*",Q,{type:"none"}),this}const W=$.length,X=async({request:Z,path:Q})=>Y(new Request("http://a.cc"+Q.slice(W)||"/",Z));return this.all($,X,{type:"none"}),this.all($+($.endsWith("/")?"*":"/*"),X,{type:"none"}),this}get($,Y,W){return this.add("GET",$,Y,W),this}post($,Y,W){return this.add("POST",$,Y,W),this}put($,Y,W){return this.add("PUT",$,Y,W),this}patch($,Y,W){return this.add("PATCH",$,Y,W),this}delete($,Y,W){return this.add("DELETE",$,Y,W),this}options($,Y,W){return this.add("OPTIONS",$,Y,W),this}all($,Y,W){return this.add("ALL",$,Y,W),this}head($,Y,W){return this.add("HEAD",$,Y,W),this}connect($,Y,W){return this.add("CONNECT",$,Y,W),this}ws($,Y){const W=Y.transformMessage?Array.isArray(Y.transformMessage)?Y.transformMessage:[Y.transformMessage]:void 0;let X=null;const Z=W1(Y?.body,{models:this.definitions.type}),Q=W1(Y?.response,{models:this.definitions.type}),J=(z)=>{if(typeof z==="string"){const A=z?.charCodeAt(0);if(A===47||A===123)try{z=JSON.parse(z)}catch{}else if(!Number.isNaN(+z))z=+z}if(W?.length)for(let A=0;A<W.length;A++){const D=W[A](z);if(D!==void 0)z=D}return z};return this.route("$INTERNALWS",$,(z)=>{const{set:A,path:D,qi:F,headers:S,query:b,params:j}=z;if(X===null)X=this.getServer();if(X?.upgrade(z.request,{headers:typeof Y.upgrade==="function"?Y.upgrade(z):Y.upgrade,data:{validator:Q,open(M){Y.open?.(new c1(M,z))},message:(M,P)=>{const O=J(P);if(Z?.Check(O)===!1)return void M.send(new P0("message",Z,O).message);Y.message?.(new c1(M,z),O)},drain(M){Y.drain?.(new c1(M,z))},close(M,P,O){Y.close?.(new c1(M,z),P,O)}}}))return;return A.status=400,"Expected a websocket connection"},{beforeHandle:Y.beforeHandle,transform:Y.transform,headers:Y.headers,params:Y.params,query:Y.query}),this}route($,Y,W,{config:X,...Z}={config:{allowMeta:!1}}){return this.add($,Y,W,Z,X),this}state($,Y){switch(typeof $){case"object":return this.store=U1(this.store,$),this;case"function":return this.store=$(this.store),this}if(!($ in this.store))this.store[$]=Y;return this}decorate($,Y){switch(typeof $){case"object":return this.decorators=U1(this.decorators,$),this;case"function":return this.decorators=$(this.decorators),this}if(!($ in this.decorators))this.decorators[$]=Y;return this}derive($){return $.$elysia="derive",this.onTransform($)}model($,Y){switch(typeof $){case"object":return Object.entries($).forEach(([W,X])=>{if(!(W in this.definitions.type))this.definitions.type[W]=X}),this;case"function":return this.definitions.type=$(this.definitions.type),this}return this.definitions.type[$]=Y,this}mapDerive($){return $.$elysia="derive",this.onTransform($)}affix($,Y,W){if(W==="")return this;const X=["_","-"," "],Z=(A)=>A[0].toUpperCase()+A.slice(1),Q=$==="prefix"?(A,D)=>X.includes(A.at(-1)??"")?A+D:A+Z(D):X.includes(W.at(-1)??"")?(A,D)=>D+A:(A,D)=>D+Z(A),J=(A)=>{const D={};switch(A){case"decorator":for(let F in this.decorators)D[Q(W,F)]=this.decorators[F];this.decorators=D;break;case"state":for(let F in this.store)D[Q(W,F)]=this.store[F];this.store=D;break;case"model":for(let F in this.definitions.type)D[Q(W,F)]=this.definitions.type[F];this.definitions.type=D;break;case"error":for(let F in this.definitions.error)D[Q(W,F)]=this.definitions.error[F];this.definitions.error=D;break}},z=Array.isArray(Y)?Y:[Y];for(let A of z.some((D)=>D==="all")?["decorator","state","model","error"]:z)J(A);return this}prefix($,Y){return this.affix("prefix",$,Y)}suffix($,Y){return this.affix("suffix",$,Y)}compile(){if(this.fetch=this.config.aot?K8(this):O8(this),typeof this.server?.reload==="function")this.server.reload({...this.server,fetch:this.fetch});return this}handle=async($)=>this.fetch($);fetch=($)=>(this.fetch=this.config.aot?K8(this):O8(this))($);handleError=async($,Y)=>(this.handleError=this.config.aot?P8(this):oW(this))($,Y);outerErrorHandler=($)=>new Response($.message||$.name||"Error",{status:$?.status??500});listen=($,Y)=>{if(!Bun)throw new Error("Bun to run");if(this.compile(),typeof $==="string"){if($=+$.trim(),Number.isNaN($))throw new Error("Port must be a numeric value")}const W=this.fetch,X=typeof $==="object"?{development:!N$,...this.config.serve,...$,websocket:{...this.config.websocket,...X8},fetch:W,error:this.outerErrorHandler}:{development:!N$,...this.config.serve,websocket:{...this.config.websocket,...X8},port:$,fetch:W,error:this.outerErrorHandler};if(typeof Bun==="undefined")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if(this.server=Bun?.serve(X),this.event.start.length)(async()=>{const Z=Object.assign(this.decorators,{store:this.store,app:this});for(let Q=0;Q<this.event.transform.length;Q++){const J=this.event.transform[Q](Z);if(this.event.transform[Q].$elysia==="derive")if(J instanceof Promise)Object.assign(Z,await J);else Object.assign(Z,J)}for(let Q=0;Q<this.event.start.length;Q++)this.event.start[Q](Z)})();if(Y)Y(this.server);return Promise.all(this.lazyLoadModules).then(()=>{Bun?.gc(!1)}),this};stop=async()=>{if(!this.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");if(this.server.stop(),this.event.stop.length)(async()=>{const $=Object.assign(this.decorators,{store:this.store,app:this});for(let Y=0;Y<this.event.transform.length;Y++){const W=this.event.transform[Y]($);if(this.event.transform[Y].$elysia==="derive")if(W instanceof Promise)Object.assign($,await W);else Object.assign($,W)}for(let Y=0;Y<this.event.stop.length;Y++)this.event.stop[Y]($)})()};get modules(){return Promise.all(this.lazyLoadModules)}}var export_t=a.Type;export{export_t as t,I0 as mergeObjectArray,I1 as mergeHook,U1 as mergeDeep,A1 as mapResponse,s0 as mapEarlyResponse,j1 as mapCompactResponse,W1 as getSchemaValidator,N8 as getResponseSchemaValidator,l$ as default,P0 as ValidationError,MW as ParseError,L1 as NotFoundError,M$ as InvalidCookieSignature,d$ as InternalServerError,l$ as Elysia,t0 as Cookie};

//# debugId=9AAFD332A14356A464756e2164756e21
